/*! For license information please see dataset-show.js.LICENSE.txt */
(function(){var __webpack_modules__={10428:function(e,t,a){var n=a(49138),i=a(95599);a(89041),a(42e3),function(e){e.fn.combinationList=function(t){var a=e(this[0]).data("combinationList");return a||(a=new e.CombinationListObject(t,this[0])),a},e.CombinationListObject=function(t,a){this.settings=e.extend({},e.CombinationListObject.defaults,t),this.currentList=a,this.init()},e.extend(e.CombinationListObject,{defaults:{clipText:!1,headerContainerSelector:".headerContainer",hoverOnly:!1,initialSort:[],loadedCallback:function(){},scrollableBody:!0,searchable:!1,searchCompleteCallback:function(){},searchFormSelector:"form",selectable:!0,selectionCallback:function(){},sortable:!0,sortGrouping:!0,sortHeaders:{},sortTextExtraction:"complex",treeTable:!1,treeColumn:0},prototype:{init:function(){var i,s,o=this,l=e(o.currentList);(l.data("combinationList",o),o.settings.clipText&&e(window).on("resize",(function(){a(o)})),o.settings.scrollableBody)&&n(i=n(s=l.clone().removeAttr("id")).call(s,"tbody").remove().end().appendTo(o.settings.headerContainerSelector).end().end()).call(i,"thead").remove();if(o.settings.selectable?l.blistSelectableList({rowSelectionHandler:function(e){o.settings.selectionCallback(e,o.selectedItems())}}):o.settings.hoverOnly&&l.blistListHoverItems(),o.settings.treeTable&&l.treeTable({indent:0,treeColumn:o.settings.treeColumn}),o.settings.sortable){l.on("sortEnd",(function(e){t(o,e)}));var c,d={headers:o.settings.sortHeaders,textExtraction:o.settings.sortTextExtraction,widgets:[]},u={};if(o.settings.sortHeaders&&_.each(o.settings.sortHeaders,(function(e,t){u[t]=!1===e.sorter})),n(l).call(l,"thead th").each((function(t){u[t]||e(this).addClass("sortable")})),o.settings.scrollableBody)d.headerNode=n(c=e(o.settings.headerContainerSelector)).call(c,"table.selectableList thead");o.settings.sortGrouping&&d.widgets.push("sortGrouping"),o.settings.initialSort.length>0&&(d.sortInitialOrder=1==o.settings.initialSort[0][1]?"asc":"desc"),l.tablesorter(d),r(o)}o.settings.searchable&&l.searchable({searchFormSelector:o.settings.searchFormSelector,searchCompleteCallback:function(){o.settings.searchCompleteCallback(),l.trigger("applyWidgetId","sortGrouping"),a(o),o.settings.treeTable&&(n(l).call(l,"tr.item.parent.filteredOut").each((function(){e(this).treeTable_disownChildren()})),n(l).call(l,"tr.item.parent:not(.filteredOut)").each((function(){e(this).treeTable_reparentChildren()})))}}),n(l).call(l,"tbody tr").length<1&&o.displayNoResults(),o.settings.loadedCallback()},updateList:function(t){var i,s=this,o=e(s.currentList);(n(o).call(o,"tbody").html(t),s.settings.sortable)&&(n(i=e(s.settings.headerContainerSelector)).call(i,"table tr th").removeClass("headerSortUp").removeClass("headerSortDown"),r(s));s.settings.loadedCallback(),a(s),n(o).call(o,"tbody tr").length>0?(s.settings.treeTable&&o.treeTable({indent:0,treeColumn:s.settings.treeColumn}),o.trigger("update")):s.displayNoResults()},totalItemCount:function(){var t;return n(t=e(this.currentList)).call(t,"tr.item:not(.filteredOut)").length},selectedItems:function(){var t;return n(t=e(this.currentList)).call(t,"tr.item.selected")},displayNoResults:function(){var t,a,i=n(t=e(this.settings.headerContainerSelector)).call(t,"table tr th").length,r=e("<tr class='sortGroup'><td colspan='"+i+"'><div>"+e.t("controls.common.no_results")+"</div></td></tr>");n(a=e(this.currentList)).call(a,"tbody").append(r)}}});var t=function(t){var a=e(t.currentList);t.settings.treeTable&&n(a).call(a,"tr.child").reverse().each((function(){var t=e(this).attr("class").match(/child-of-(\S+)/);if(t&&t.length>1){var a=e("#"+t[1]);1==a.length&&a.after(this)}}))},a=function(t){var a;t.settings.clipText&&n(a=e(t.currentList)).call(a,"tbody .clipText > *").each((function(){blist.widget.clippedText.clipElement(e(this))}))},r=function(t){e.each(t.settings.initialSort,(function(a,i){var r;n(r=e(t.settings.headerContainerSelector)).call(r,"table tr th:nth("+i[0]+")").addClass(1==i[1]?"headerSortUp":"headerSortDown")}))};e.tablesorter.addWidget({id:"sortGrouping",format:function(t){if(!(!t||!t.config||!t.config.sortList||t.config.sortList.length<1||t.config.sortList[0].length<1)){var a=t.config.sortList[0][0];e("tr.sortGroup",t).remove();for(var r,s,o,l,c="",d=0;d<t.tBodies[0].rows.length;d++){var u=e(t.tBodies[0].rows[d]);if(!u.hasClass("child")&&!u.is(":hidden")){var p=e(u[0].cells[a]),m=(r=p,s=t.config.parsers[a],o=void 0,l=void 0,o=s.format(r.text(),t,r[0]),l=o,r.hasClass("type")?l=o+"s":"text"==s.type?l=i(o).call(o,0,1).toLowerCase():s.id.match(/date/i)&&(l=0===o?"":blist.util.humaneDate.getFromDate(new Date(o),blist.util.humaneDate.DAY)),""===l&&(l="none"),l);if(c!=m){c=m;var f=e("<tr class='sortGroup'/>"),h=t.config.headerNode[0].rows[0].cells.length,_=e("<td colspan='"+h+"'/>");f.append(_),n(f).call(f,"td:first-child").append("<div>"+c+"</div>"),u.before(f)}}}}}})}(jQuery)},83892:function(e,t,a){var n=a(49138);!function(e){e.fn.contentIndicator=function(a){var n=e(this[0]).data("contentIndicator");return n||(n=new t(a,this[0])),n};var t=function t(a,n){this.settings=e.extend({},t.defaults,a),this.currentDom=n,this.init()};e.extend(t,{defaults:{left:"-5px",text:"",top:"-5px"},prototype:{init:function(){var t=this;t.$dom().data("contentIndicator",t),e.isBlank(t.settings.text)||a(t)},$dom:function(){return this._$dom||(this._$dom=e(this.currentDom)),this._$dom},setText:function(e){this.settings.text=e||"",i(this)}}});var a=function(t){t.$dom().addClass("contentIndicatorContainer"),t.$dom().append(e.tag({tagName:"span",class:"contentIndicator",style:{left:t.settings.left,top:t.settings.top,display:e.isBlank(t.settings.text)?"none":"block"},contents:t.settings.text}))},i=function(t){var i;t.$dom().hasClass("contentIndicatorContainer")?n(i=t.$dom()).call(i,".contentIndicator").text(t.settings.text).toggle(!e.isBlank(t.settings.text)):a(t)}}(jQuery)},64876:function(e,t,a){"use strict";var n=a(10401),i=a.n(n),r=a(95599),s=a.n(r),o=a(17089),l=a.n(o),c=a(49138),d=a.n(c),u=a(11796),p=a.n(u),m=(a(29954),a(89041),a(2980),a(68640),a(27938),a(42e3),a(73505),blist.namespace.fetch("blist.datasetControls"));blist.datasetControls.hookUpShareMenu=function(e,t,a,n){var i="story"===e.displayType?"share_story_text":"share_text",r=escape($.t("controls.common.share."+i,{name:e.name,site:blist.configuration.strings.company})),s=e.fullUrl,o=e.shortUrl,l={menuButtonContents:$.t("controls.common.share.button_prompt"),menuButtonTitle:$.t("controls.common.share.button_tooltip"),contents:[{text:$.t("controls.common.share.networks.facebook"),className:"facebook",rel:"external",href:"http://www.facebook.com/share.php?u="+s},{text:$.t("controls.common.share.networks.twitter"),className:"twitter",rel:"external",href:"http://twitter.com/?status="+r+o},{text:$.t("controls.common.share.networks.email"),className:"email",href:"#email",onlyIf:!n}]};$.extend(l,a),t.menu(l)},blist.datasetControls.unsavedViewPrompt=function(){$("a").on("click",(function(e){if(blist.dataset.temporary&&!blist.dataset.minorChange&&!e.ctrlKey&&!e.metaKey){var t=e.currentTarget;if(!(t.rel.indexOf("external")>-1||t.className.indexOf("noRedirPrompt")>-1)){var a=t.href;if(!$.isBlank(a)){var n=a,r=window.location.href;if(i()(r).call(r,"#")&&(r=s()(r).call(r,0,-1)),window.location.hash.length>0&&(r=s()(r).call(r,0,-window.location.hash.length)),l()(a).call(a,r)&&(n=s()(a).call(a,r.length)),"#"!=n.charAt(0)&&window.location.href!=a){e.preventDefault();var o=function(){return window.location=a,!0};m.showSaveViewDialog("leavingSaveDialog",o,o)}}}}}))},blist.datasetControls.showSaveViewDialog=function(e,t,a,n,i){if(blist.currentUserId){var r=m.showSaveViewDialog,s=$(".saveViewDialog");d()(s).call(s,".mainError").text(""),s.jqmShow(),r._customClass=e,$.isBlank(r._customClass)||s.addClass(r._customClass);var o=function(){setTimeout((function(){$.isBlank(r._customClass)||s.removeClass(r._customClass),d()(s).call(s,".viewName").val("")}),1e3)};s.loadingSpinner({metric:"save",overlay:!0}),r._saveCallback=t,r._dontSaveCallback=a,r._cancelCallback=n;var l=function(e){var t=d()(s).call(s,".viewName").val();if(e&&$.isBlank(t))d()(s).call(s,".mainError").text($.t("screens.ds.save_dialog.validation.view_name_required"));else{d()(s).call(s,".mainError").text("");!function(){s.loadingSpinner().showHide(!0);var a=function(e){s.loadingSpinner().showHide(!1);var t=!1;_.isFunction(r._saveCallback)&&(t=r._saveCallback(e)),t?(o(),s.jqmHide()):e.redirectTo()},n=function(e){s.loadingSpinner().showHide(!1),d()(s).call(s,".mainError").text(JSON.parse(e.responseText).message)};$.isBlank(i)||blist.dataset.update(i),e?(blist.dataset.name=t,blist.dataset.saveNew(a,n)):blist.dataset.save(a,n)}()}};$.isBlank(r._hookedEvents)&&(d()(s).call(s,"form").on("submit",(function(e){e.preventDefault(),l(!0)})),d()(s).call(s,"a.save").on("click",(function(e){e.preventDefault(),l(d()(s).call(s,".viewName").is(":visible"))})),d()(s).call(s,"a.update").on("click",(function(e){e.preventDefault(),l(!1)})),d()(s).call(s,".jqmClose").on("click",(function(){o(),_.isFunction(r._cancelCallback)&&r._cancelCallback()})),d()(s).call(s,".dontSave").on("click",(function(){_.isFunction(r._dontSaveCallback)&&r._dontSaveCallback()})),r._hookedEvents=!0)}else _.isFunction(a)&&a()},blist.datasetControls.datasetRating=function(e,t,a){a||$.isBlank(e.data("rating-type"))||!$.isBlank(e.data("rating"))?e.stars({onChange:function(a){blist.util.doAuthedAction($.t("controls.common.rate.auth_action_phrase"),(function(n){blist.dataset.updateRating({type:e.attr("data-rating-type"),rating:20*a},(function(a){_.isUndefined(a.type)||d()(t).call(t,".totalTimesRated").text(parseInt(p()($).call($,d()(t).call(t,".totalTimesRated").text()))+1),e.attr("title",""),_.isFunction(n)&&n()}))}))}}):e.closest("dd").addClass("hide").prev("dt").addClass("hide")},blist.datasetControls.datasetContact=function(e){var t=function(){var t=d()(e).call(e,"#contactPurpose").val(),a="";$.isBlank(t)||(a="other"==t?$.t("screens.ds.dataset_contact.other_subject",{dataset_name:blist.dataset.name,site:blist.configuration.strings.company}):$.t("screens.ds.dataset_contact.subject",{dataset_name:blist.dataset.name,reason:$.t("screens.ds.dataset_contact.reasons."+t)}),d()(e).call(e,"#contactSubject").val(a),d()(e).call(e,"#contactBody").focus())},a=function(){var t,a;d()(t=d()(a=d()(e).call(e,".contactOwnerForm").slideToggle()).call(a,"#contactBody").focus().end().end()).call(t,".contactOwnerLinks").slideToggle().end()};e.on("click",".contactButton",(function(n){n.preventDefault();var i=$(this);if(d()(e).call(e,".flash").removeClass("notice").text("").fadeOut(),$.subKeyDefined(blist,"datasetPage.sidebar")&&blist.datasetPage.sidebar.$dom().width()<350&&(blist.datasetPage.sidebar.$dom().width(350),$(window).resize()),0===d()(e).call(e,".contactOwnerForm").length){i.closest(".formSection").after($.renderTemplate("aboutDataset_contact")),blist.util.loadCaptcha("contactCaptcha");var r=d()(e).call(e,".contactOwnerForm").addClass("sectionContent");r.parent().addClass("formSection"),r.validate({rules:{type:"required",subject:"required",message:"required",from_address:{required:!0,email:!0}},messages:{type:$.t("screens.ds.dataset_contact.validation.no_purpose"),subject:$.t("screens.ds.dataset_contact.validation.no_subject"),message:$.t("screens.ds.dataset_contact.validation.no_body"),from_address:{required:$.t("screens.ds.dataset_contact.validation.no_email")}},errorPlacement:function(e,t){e.appendTo(t.closest(".lined"))}});var s=d()(e).call(e,"#contactPurpose").change(t);s.parent().hasClass("uniform")||s.uniform(),r.submit((function(t){t.preventDefault(),r.valid()&&$.ajax({url:r.attr("action"),data:r.serialize(),type:"POST",dataType:"json",error:function(){d()(e).call(e,".flash:not(.recaptcha_flash)").removeClass("notice").addClass("error").text($.t("screens.ds.dataset_contact.error_message")).show(),window.grecaptcha&&window.grecaptcha.reset()},success:function(t){!0===t.success?(_.defer((function(){d()(e).call(e,".flash:not(.recaptcha_flash)").removeClass("error").addClass("notice").text($.t("screens.ds.dataset_contact.success_message")).show(),a()})),d()(e).call(e,".recaptcha_flash").removeClass("error").fadeOut()):!1===t.success&&d()(e).call(e,".recaptcha_flash").removeClass("notice").addClass("error").text($.t("recaptcha2.errors.verification_failed")).fadeIn(),window.grecaptcha&&window.grecaptcha.reset()}})})),d()(e).call(e,".sendContactButton").on("click",(function(e){e.preventDefault(),r.submit()}))}else window.grecaptcha&&window.grecaptcha.reset();var o=d()(e).call(e,".contactOwnerForm");if(o[0].reset(),o.validate().resetForm(),a(),!_.isUndefined(i.attr("data-select"))){var l=d()(e).call(e,"#contactPurpose");l.val(i.attr("data-select")),t(),$.uniform.update(l)}}))},blist.datasetControls.getColumnTip=function(e){return'<div class="blist-th-tooltip '+e.renderTypeName+'"><p class="name">'+$.htmlEscape(e.name).replace(/ /,"&nbsp;")+"</p>"+($.isBlank(e.metadata.originalName)?"":'<p class="originalName"><span class="title">'+$.t("screens.ds.column_tip.original_name")+':</span> <span class="value">'+$.htmlEscape(e.metadata.originalName).replace(/ /,"&nbsp;")+"</span>")+(void 0!==e.description?'<p class="description">'+$.htmlEscape(e.description)+"</p>":"")+'<p class="columnType"><span class="blist-th-icon"></span>'+$.t("core.data_types."+e.dataTypeName)+(void 0!==e.format.grouping_aggregate?" "+$.t("screens.ds.column_tip.aggregate",{aggregate:$.t("core.aggregates."+e.format.grouping_aggregate),data_type:$.t("core.data_types."+e.dataTypeName)}):"")+"</p>"+(void 0!==e.fieldName?'<br/><p class="api-field">'+$.t("screens.ds.column_tip.field_name")+": "+$.htmlEscape(e.fieldName)+"</p>":"")+"</div>"},blist.datasetControls.raReasonBox=function(e){var t=e.siblings("input"),a=e.children("textarea");e.addClass("hide jsEnabled"),e.append(e.siblings(".button").clone()),e.append($.tag({tagName:"a",href:"#Close",class:"remove",contents:{tagName:"span",class:"icon"}})),e.closest("form").validate();var n=function(){e.addClass("hide"),e.closest("form").css("z-index",""),a.blur()};a.keydown((function(e){27==e.which&&n()})),d()(e).call(e,".remove").on("click",(function(e){e.preventDefault(),n()})),t.on("click",(function(t){e.hasClass("hide")&&(t.preventDefault(),e.removeClass("hide"),e.closest("form").css("z-index",10),a.focus())}))},blist.datasetControls.editPublishedMessage=function(){var e="editPublishedMessage"+_.uniqueId(),t=$.tag({tagName:"div",class:"editPublishedMessage",id:e,contents:{tagName:"div",class:"throbber"}}),a=!0,n=function(n,r){var o=blist.datasetControls.copyPending||r,l=$("#"+e);if(0===l.length&&(l=t),0!==l.length&&(a||0!==l.closest("body").length)&&!d()(l).call(l,".doneCopyingMessage").is(":visible")){l.empty().append($.renderTemplate("editAlertTemplate",n,{".editPublished@class+":function(){return o?"hide":""},".editMessage":function(){return i(n)},".editMessage@class+":function(){return o?"hide":""},".copyingMessage":function(){return $.t("screens.ds.dataset_status.copy_in_progress",{additional:n.message})},".copyingMessage@class+":function(){return o?"":"hide"}}));var c=l.closest(".bt-wrapper");if(c.length>0)c.data("socrataTip-$element").data("socrataTip").refreshSize();blist.dataset._unpublishedView||window.setTimeout((function(){s()}),3e4),a=!1}},i=function(e){return blist.dataset.isImmutable()?$.t("screens.ds.dataset_status.immutable"):$.t("screens.ds.dataset_status.needs_copy",{status:$.t("screens.ds.dataset_status.needs_copy_status."+e.status),draft_item:$.t("screens.ds.dataset_status.draft_item.draft")})},r=!1,s=function(){blist.dataset.getOperationStatuses((function(e){var t={},a=!1,i=function(e){return blist.util.humaneDate.getFromDate(new Date(1e3*e))};switch(e.copying.copyStatus){case"finished":t.status=r?"available":"can_be_made";break;case"queued":t.message=$.t("screens.ds.dataset_status.copy_in_progress_additional.queued",{time:i(e.copying.queuedAt),totalQueued:e.copying.totalQueued}),a=!0;break;case"processing":t.message=$.t("screens.ds.dataset_status.copy_in_progress_additional.processing",{time:i(e.copying.startedAt)}),a=!0;break;case"failed":t.status="can_be_made"}r=r||a,n(t,a)}))};return blist.dataset.isDefault()?blist.dataset.getOpenRevision((function(e){$.isBlank(e)?s():n({status:"available"})})):blist.dataset.getUnpublishedView((function(e){$.isBlank(e)?s():n({status:"available"},!1)})),t},blist.datasetControls.hookUpPublishing=function(e){function t(e,t){e.removeClass("disabled"),e.isSocrataTip()&&e.data("socrataTip").destroy(),e.attr("title",e.attr("bt-xtitle")),e.socrataTitleTip(),_.isFunction(t)&&t()}function a(e,t){e.isSocrataTip()&&e.data("socrataTip").destroy(),_.defer((function(){e.addClass("disabled"),e.socrataTip({content:$.tag2({_:"p",className:"errorMessage",contents:t}),showSpike:!0,trigger:"now",positions:["bottom"]})}))}var n,i=d()(e).call(e,".publish");if(d()(e).call(e,".unpublished").socrataTitleTip(),d()(e).call(e,".snapshotted").socrataTitleTip(),i.on("click",(function(n){if(n.preventDefault(),!$(n.target).hasClass("disabled")){blist.dataset.isPublicationStageChangeAvailable(!1,(function(n,r){n?(t(i),blist.dataset.publish((function(e){e.redirectTo()}),(function(t){var a=$.t("screens.ds.dataset_status.error_publishing_html");"Only unpublished datasets can be published."==(JSON.parse((t||{}).responseText)||{}).message&&(a=$.t("screens.ds.dataset_status.error_publishing_unpublished")),d()(e).call(e,"#datasetName").socrataTip({content:$.tag2({_:"p",className:"errorMessage",contents:a}),showSpike:!1,trigger:"now"})}))):a(r)}))}})),i.exists()&&i.socrataTitleTip(),!blist.dataset.isPublished()){blist.dataset.getPublishedView((function(t){var a;$.isBlank(t)?d()(e).call(e,"#publishedLink").hide():d()(a=d()(e).call(e,"#publishedLink").attr("href",t.url)).call(a,".publishedName").text(t.name)}))}var r=function(){blist.dataset.isPublicationStageChangeAvailable(!1,(function(e,r){e?t(i,(function(){clearInterval(n)})):(_.isString(r)&&!_.isNull(r.match(/error/i))&&clearInterval(n),a(i,r))}))};r(),n=setInterval(r,3e4)}},28025:function(e,t,a){"use strict";a(29954);var n=a(49138),i=a.n(n);a(73505);!function(e){var t,a,n,r,s=blist.namespace.fetch("blist.dialog"),o=!1,l=null,c="MAIL.VIEW_PUBLISHED";s.subscribe=function(s){o||d(),s=s||blist.dataset,t.data("dataset",s);var u=s.displayName;a.text(u),n.text(u.capitalize()),i()(t).call(t,".datasetName").text(s.name);var p=s.apiUrl+"/rows.rss";i()(t).call(t,".rssSection a.rss").attr("href",p),i()(t).call(t,".rssSection a.greader").attr("href","http://fusion.google.com/add?feedurl="+p),i()(t).call(t,".rssSection a.feed").attr("href","feed:"+p);var m=function(a){a&&(t.removeClass("unsubscribed").addClass("subscribed"),e.uniform.update(r.prop("checked",!0))),t.removeClass("loading")};blist.currentUser?(l=new User(blist.currentUser)).getEmailInterest(c,s.id,m):m(),t.jqmShow()};var d=function(){t=e(".subscribeToDataset"),a=i()(t).call(t,".datasetTypeName"),n=i()(t).call(t,".datasetTypeNameUpcase"),(r=i()(t).call(t,".subscribeCheckbox")).uniform(),r.on("change",(function(){var a=t.data("dataset"),n=t.hasClass("subscribed"),i=function(){t.toggleClass("loading unsubscribed subscribed")};n?(t.addClass("loading"),l.removeEmailInterest(c,a.id,i)):(l||e.uniform.update(r.prop("checked",!1)),blist.util.doAuthedAction("subscribe to a dataset",(function(){l=new User({id:blist.currentUserId}),t.addClass("loading"),l.addEmailInterest(c,a.id,i),e.uniform.update(r.prop("checked",!0))})))})),o=!0}}(jQuery)},2294:function(e,t,a){"use strict";a(89041),a(2980);var n=a(49138),i=a.n(n),r=a(96110),s=a.n(r);a(73505);!function(e){e.fn.embedForm=function(t){var a=e.extend({},e.fn.embedForm.defaults,t);return this.each((function(){var t=e(this),r=e.meta?e.extend({},a,t.data()):a,o=i()(t).call(t,r.textareaSelector).text();i()(t).call(t,r.widthSelector+","+r.heightSelector).on("keyup",(function(){var e,a=n(t,r,o);s()(e=i()(t).call(t,r.sizesSelector).removeClass("selected")).call(e,"[data-width="+a.width+"][data-height="+a.height+"]").addClass("selected")})).on("keypress",(function(e){if((e.which<48||e.which>57)&&8!=e.which&&0!=e.which)return!1})),i()(t).call(t,r.codeSelector).on("click",(function(){e(this).trigger("select")})),i()(t).call(t,r.sizesSelector).on("click",(function(){var a=e(this);a.siblings().removeClass("selected"),a.addClass("selected"),i()(t).call(t,r.widthSelector).val(a.attr("data-width")),i()(t).call(t,r.heightSelector).val(a.attr("data-height")),n(t,r,o)})),i()(t).call(t,r.templateSelector).on("change",(function(){n(t,r,o)})),i()(t).call(t,r.createTemplateButtonSelector).on("click",(function(t){t.preventDefault(),e(".newTemplateModal #newTemplateName").val(""),e(".newTemplateModal").jqmShow()})),e(".newTemplateModal .submitButton").on("click",(function(t){t.preventDefault(),e(this).closest("form").trigger("submit")})),e(".newTemplateModal form").validate(),e.uniform.update(i()(t).call(t,r.templateSelector).val(e("#embed_default").val())),n(t,r,o)}));function n(e,t,a){var n=i()(e).call(e,t.widthSelector).val(),r=i()(e).call(e,t.heightSelector).val(),s=i()(e).call(e,t.templateSelector).val(),o=a.replace("_width_",n).replace("_height_",r).replace("_variation_",s||"");return _.defer((function(){i()(e).call(e,t.textareaSelector).text(o)})),parseInt(n,10)<425||parseInt(r,10)<425||""==n||""==r?(i()(e).call(e,t.errorMessageSelector).addClass("errorMessage"),i()(e).call(e,t.textareaSelector).attr("disabled",!0),t.invalidCallback()):(i()(e).call(e,t.errorMessageSelector).removeClass("errorMessage"),i()(e).call(e,t.textareaSelector).prop("disabled",!1),t.validCallback()),{width:n,height:r}}},e.fn.embedForm.defaults={textareaSelector:"#embed_code",widthSelector:"#embed_width",heightSelector:"#embed_height",templateSelector:"#embed_template",errorMessageSelector:".sizeInformation",sizesSelector:".sizes li",codeSelector:".htmlCode",createTemplateButtonSelector:".createTemplateButton",invalidCallback:function(){},validCallback:function(){}}}(jQuery)},5218:function(e,t,a){var n=a(49138);!function(e){e.fn.expander=function(t){var a=e.extend({},e.fn.expander.defaults,t);return this.each((function(){var t=e(this),i=e.meta?e.extend({},a,t.data()):a;t.data("config-expander",i);var r=n(t).call(t,i.contentSelector),s=n(t).call(t,i.expandSelector);r.removeClass("collapsed");var o=r.height();if(r.addClass("collapsed"),!i.forceExpander&&(e.isBlank(r.text())||o==r.height()))return s.hide(),void r.removeClass("collapsed");s.addClass(i.expanderCollapsedClass),s.on("click",(function(a){var n;if(a.preventDefault(),s.hasClass(i.expanderCollapsedClass)){i.preExpandCallback(t),n=r.css("height"),r.removeClass("collapsed").css("height","");var o=r.height();t.removeClass("collapsed"),i.animate?r.css("height",n).animate({height:o},i.resizeFinishCallback):(r.height(o),i.resizeFinishCallback()),s.removeClass(i.expanderCollapsedClass).addClass(i.expanderExpandedClass).attr("title",e.t("controls.common.expander.collapse"))}else{r.addClass("collapsed").css("height",""),n=r.height(),r.removeClass("collapsed");var l=function(){r.css("display",""),r.addClass("collapsed"),t.addClass("collapsed"),i.resizeFinishCallback()};i.animate?r.animate({height:n},l):(r.height(n),l()),s.removeClass(i.expanderExpandedClass).addClass(i.expanderCollapsedClass).attr("title",e.t("controls.common.expander.expand"))}}))}))},e.fn.expander.defaults={animate:!0,contentSelector:".content",expanderCollapsedClass:"downArrow",expanderExpandedClass:"upArrow",expandSelector:".expand",forceExpander:!1,moveExpandTrigger:!1,preExpandCallback:function(){},resizeFinishCallback:function(){}}}(jQuery)},27723:function(e,t,a){var n=a(21456),i=a(49138),r=a(17933),s=a(47858),o=a(4081),l=a(6816),c=a(95599),d=a(96110),u=a(65075);a(79167),a(29954),a(68640),a(27938),function(e){var t={".commentActions .commentInappropriateLink":function(t){return t.context.commentFlagged?e.t("controls.feed.comment_actions.already_marked_inappropriate"):e.t("controls.feed.comment_actions.inappropriate")},".commentActions .commentInappropriateLink@class+":function(e){return e.context.commentFlagged?"disabled":""},".commentActions .upRatings":function(e){return e.context.upRatings>0?"+"+e.context.upRatings:""},".commentActions .downRatings":function(e){return e.context.downRatings>0?"-"+e.context.downRatings:""},".commentActions .rateUp@class+":function(e){return _.isUndefined(e.context.currentUserRating)||!0!==e.context.currentUserRating.thumbUp?"":" ratedUp"},".commentActions .rateDown@class+":function(e){return _.isUndefined(e.context.currentUserRating)||!1!==e.context.currentUserRating.thumbUp?"":" ratedDown"},".commentActions@class+":function(e){var t=e.context.viewId?blist.rights.user.MODERATE_COMMENTS:blist.rights.user.EDIT_NOMINATIONS;return _.compact([_.get(e.context,"user.id")==blist.currentUserId?"ownItem":null,!_.isUndefined(blist.currentUser)&&n(_).call(_,blist.currentUser.rights,t)?"isModerator":null]).join(" ")}},a={comment:t,reply:t,view:{".viewDetails@class+":"viewType",".viewName":"viewName!",".viewName@href":"viewPath",".viewDescription":"viewDescription!"}},p={};e((function(){_.each(["comment","view","reply"],(function(t){p[t]=e.compileTemplate("feedItem_"+t,a[t])}))}));e.fn.feedList=function(t){var a=e.extend({},e.fn.feedList.defaults,t),m={".@class+":function(e){return _.compact([a.highlightCallback(e.item)?e.item.itemType+" specialFeedItem":e.item.itemType,e.item.itemDeleted?"itemDeleted":null]).join(" ")},".@data-itemId":"feedItem.itemId",".feedCommon@class+":"feedItem.itemType",".feedActor":"feedItem.user.displayName!",".feedActor@href":function(e){return new User(e.item.user).getProfileUrl()},".feedBody":"feedItem.body!",".feedTimestamp":function(e){return blist.util.humaneDate.getFromDate(1e3*e.item.timestamp)},".feedCustom":function(e){var t=p[e.item.itemType];return _.isFunction(t)?t(e.item):""}},g=e.compileTemplate("feedItem",{li:{"feedItem<-":m}}),v={li:{"feedItem<-":e.extend({},m,{".@data-serialId":"feedItem.serialId",".feedChildren":function(e){return _.isArray(e.item.children)?g(e.item.children):""},".feedChildren@class+":function(e){return _.isUndefined(e.item.children)||0===e.item.childCount?"hide":""},".replyViewAllLink":function(t){return e.t("controls.feed.listing.all_replies_with_count",{count:t.item.childCount})},".replyViewAllLink@class+":function(e){return _.isUndefined(e.item.children)||e.item.childCount<=a.replyPageLimit?"hide":""}})}},b=function e(t,a){return{itemType:a||"comment",itemId:t.id,body:_.compact([t.title,t.body]).join(" "),timestamp:t.createdAt,downRatings:t.downRatings,upRatings:t.upRatings,currentUserRating:t.currentUserRating,commentFlagged:n(_).call(_,s(t)||[],"flaggedByCurrentUser"),user:t.user,viewId:t.view?t.view.id:null,children:_.isUndefined(t.children)?[]:o(_).call(_,t.children,(function(t){return e(t,"reply")}))}},y=o(_).call(_,_.reject(a.comments,(function(t){return e.isBlank(t.title)&&e.isBlank(t.body)})),(function(e){return b(e)})),w=o(_).call(_,a.views,(function(t){return{itemType:"view",itemId:t.id,body:e.t("controls.feed.listing.user_create_action",{thing:t.displayName}),timestamp:t.createdAt,viewName:t.name,viewType:"type"+t.styleClass,viewPath:t.url,viewDescription:t.description,user:t.owner}})),C=r(y).call(y,w);l(C).call(C,(function(e,t){return t.timestamp-e.timestamp}));var x={},k=[],$=function(e){var t;_.isUndefined(e.children)||(e.childCount=e.children.length,e.allChildren=e.children,e.children=c(t=e.allChildren).call(t,0,a.replyPageLimit));return e.serialId=_.uniqueId(),x[e.serialId]=e,e};return C=o(_).call(_,C,$)||[],this.each((function(){var t=e(this),n=t,r=a.$scrollContainer||t.closest(a.scrollContainerSelector),s=i(t).call(t,".feedFilter"),l=i(t).call(t,".feedList"),p=i(t).call(t,".feedMoreItemsLink"),m=i(t).call(t,".moderationNotice");_.isArray(a.filterCategories)&&0!==a.filterCategories.length?1===a.filterCategories.length?i(t).call(t,".feedFilterLine").hide():(s.empty().append(e.tag(o(_).call(_,a.filterCategories,(function(t){return{tagName:"option",value:t,contents:e.t("controls.feed.types."+t)}})),!0)).val(a.defaultFilter||_.first(a.filterCategories)),e.isBlank(e.uniform)||e.isBlank(e.uniform.update)||e.uniform.update(s)):i(t).call(t,".feedFilterLine").hide();var y=function(e){if("all items"==e)return C;var t={view:"views",comment:"comments",replies:"comments"};return d(_).call(_,C,(function(a){return t[a.itemType]==e}))},w=function(n){var s=a.pageSize;n&&(s=a.firstPageSize||a.pageSize);var o=l.children().length;l.append(e.renderTemplate("feedItem",c(k).call(k,o,o+s),v));var d=k.length-o-s;p.show(),d<=0?p.hide():1==d?p.text(e.t("controls.feed.listing.last_item")):p.text(e.t("controls.feed.listing.next_item_page",{count:Math.min(d,a.pageSize)})),n?i(t).call(t,".noResults").toggleClass("hide",l.children().length>0):r.animate({scrollTop:Math.min(t.outerHeight(!0)-r.height(),r.scrollTop()+r.height())},"slow")},S=function(t,r){var s=f(n);if(!e.isBlank(s)){var o=$(b(t));if(e.subKeyDefined(r,"id")){var l,c=i(n).call(n,'.feedItem[data-itemid="'+r.id+'"]');if(c.length<1)return;o.itemType="reply";var d=s.feedMap[h(c)];d.allChildren.unshift(o),d.children.unshift(o),u(l=d.children).call(l,a.replyPageLimit,1),i(c).call(c,".feedChildren").removeClass("hide").prepend(g([o]))}else s.feedData.unshift(o),n.children(".feedList").prepend(e.renderTemplate("feedItem",[o],v));i(n).call(n,".noResults").addClass("hide")}};if(p.on("click",(function(e){e.preventDefault(),w()})),s.on("change",(function(){k=y(e(this).val()),l.empty(),w(!0)})),a.hideFeed||(k=y(a.defaultFilter),w(!0)),t.data("feedList-data",{feedData:k,feedMap:x,opts:a}),t.on("click",".replyViewAllLink",(function(a){a.preventDefault(),t=e(this);var n=f(t);t.siblings(".feedChildren").empty().append(g(n.feedMap[h(t)].allChildren)),t.remove()})),a.hideFeed?i(n).call(n,".feedList, .feedMoreItemsLink, .noResults").addClass("hide"):_.each(a.views,(function(e){e.bind("new_comment",S)}),t),!0===a.bindCommentEvents){t.on("click",".commentActions a",(function(n){n.preventDefault(),t=e(this);var r=f(t).feedMap[h(t,".comment")],s=t.closest(".feedItem.reply");if(s.length>0){var o=parseInt(s.attr("data-itemId"));r=i(_).call(_,r.allChildren,(function(e){return e.itemId==o}))}if(t.is(".commentInappropriateLink:not(.disabled)"))blist.util.doAuthedAction(e.t("controls.feed.authed_actions.flag_comment"),(function(n){a.actionDelegate(r,a).flagComment(r.itemId,(function(){r.commentFlagged=!0,t.fadeOut((function(){t.addClass("disabled").text(e.t("controls.feed.comment_actions.marked_inappropriate")).fadeIn()})),_.isFunction(n)&&n()}))}));else if(t.is(".commentDeleteLink"))blist.util.doAuthedAction(e.t("controls.feed.authed_actions.delete_comment"),(function(e){a.actionDelegate(r,a).removeComment(r.itemId,(function(){r.itemDeleted=!0,t.closest(".feedItem").animate({opacity:.3},2e3),_.isFunction(e)&&e()}))}));else if(t.is(".commentRateUpLink:not(.ratedUp)")||t.is(".commentRateDownLink:not(.ratedDown)")){var l=t.hasClass("commentRateUpLink");blist.util.doAuthedAction(e.t("controls.feed.authed_actions.rate_comment"),(function(e){a.actionDelegate(r,a).rateComment(r.itemId,l,(function(){var a=l?"up":"down";_.isUndefined(r.currentUserRating)||(r[(l?"down":"up")+"Ratings"]--,t.closest("li").siblings().removeClass("ratedUp ratedDown")),r.currentUserRating={thumbUp:l},r[a+"Ratings"]++,t.closest("li").addClass("rated"+a.capitalize()),_.each({up:"+",down:"-"},(function(e,a){var n=e+r[a+"Ratings"];0===r[a+"Ratings"]&&(n=""),t.closest("li").siblings("."+a+"Ratings").text(n)})),_.isFunction(e)&&e()}))}))}else if(t.is(".commentReplyLink")&&0===t.closest(".feedItem").children(".newCommentForm").length){var c,d=e.renderTemplate("feedItem_newComment");i(d).call(d,".postNewCommentButton").data("view",a.actionDelegate(r,a)),t.closest(".feedItem").children(".feedChildren").before(d),i(c=t.closest(".feedItem")).call(c,"#newCommentBody").focus()}})),t.on("click",".newCommentForm .cancelNewCommentButton",(function(a){a.preventDefault(),t=e(this),(e.isBlank(t.siblings("#newCommentBody").val())||confirm(e.t("controls.feed.comment_actions.delete_confirm")))&&t.closest(".newCommentForm").remove()})),t.on("click",".newCommentForm .postNewCommentButton",(function(r){r.preventDefault();var s=(t=e(this)).data("view"),o=t.siblings("#newCommentBody").val();if(e.isBlank(o))t.siblings(".error").text(e.t("controls.feed.comment_form.empty_body_error")).slideDown();else{t.siblings(".error").slideUp();var l=e.extend({},a.commentCreateData,{body:o}),c=parseInt(t.closest(".feedItem").attr("data-itemId"));_.isNumber(c)&&!isNaN(c)&&(l.parent={id:c}),blist.util.doAuthedAction(e.t("controls.feed.authed_actions.post_comment"),(function(e){s.addComment(l,(function(r){if("pending"==r.status)return t.closest(".newCommentForm").remove(),void m.fadeIn(300,(function(){m.effect("highlight",5e3)}));var o=$(b(r));_.isFunction(a.addCommentCallback)&&a.addCommentCallback(s,o),t.closest(".newCommentForm").remove(),!0===a.alwaysShowNewCommentForm&&0===i(n).call(n,".newCommentForm").length&&T(i(n).call(n,".noResults"),a.mainView),_.isFunction(e)&&e()}),(function(e){t.siblings(".error").slideDown().text(JSON.parse(e.responseText).message)}))}))}})),t.on("click",".feedNewCommentButton",(function(a){var n;(a.preventDefault(),0===(t=e(this)).siblings(".newCommentForm").length)&&(T(t,f(t).opts.mainView),i(n=t.siblings(".newCommentForm")).call(n,"#newCommentBody").focus())}));var T=function(t,a){var n=e.renderTemplate("feedItem_newComment");i(n).call(n,".postNewCommentButton").data("view",a),t.after(n)};!0===a.alwaysShowNewCommentForm&&T(i(t).call(t,".noResults"),a.mainView),blist.currentUserId||(e(".feedNewCommentButton, .postNewCommentButton").addClass("disabled").prop("disabled",!0).socrataTip(e.t("controls.feed.tooltips.add_comment_disabled")),e(".commentReplyLink").prop("disabled",!0).socrataTip(e.t("controls.feed.tooltips.add_comment_disabled")),e(".commentInappropriateLink").prop("disabled",!0).socrataTip(e.t("controls.feed.tooltips.flag_inappropriate_disabled")),e(".commentRateUpLink, .commentRateDownLink").prop("disabled",!0).socrataTip(e.t("controls.feed.tooltips.rate_comment_disabled")))}}))};var m,f=function(e){return e.closest(".feed").data("feedList-data")},h=function(e,t){return parseInt(e.closest(".feedItem"+(t||"")).attr("data-serialId"))};e.fn.feedList.defaults={addCommentCallback:function(){},actionDelegate:function(e,t){return function(e,t){var a;return i(_).call(_,r(a=t.views).call(a,t.mainView),(function(t){return t.id==e}))}(e.viewId,t)},alwaysShowNewCommentForm:!1,bindCommentEvents:!0,commentCreateData:{},comments:[],defaultFilter:"comments",filterCategories:(m=["all items","comments","views"],!0===window.blist.feature_flags.remove_views_from_discuss_pane&&(m=["comments"]),m),hideFeed:!1,highlightCallback:function(e){return blist.dataset&&(e.user||{}).id==blist.dataset.tableAuthor.id},firstPageSize:null,mainView:null,pageSize:20,replyPageLimit:2,scrollContainerSelector:".scrollContent",views:[]}}(jQuery)},88319:function(e,t,a){"use strict";a(89041),a(2980);var n=a(49138),i=a.n(n),r=a(66282),s=a.n(r),o=a(21456),l=a.n(o),c=a(70316),d=blist.namespace.fetch("blist.common");d.formInliner=function(e){var t=$(e.target),a=t.data("dataset").cleanCopy();i()(t).call(t,"input[name=view]").length>0||t.append($('<input type="hidden" name="view"/>').val(s()(a))).append($('<input type="hidden" name="method" value="index" />'))},function(e){e.fn.downloadToFormCatcher=function(t,a){return this.each((function(){var n,i=e(this);i.off(".downloadToFormCatcher"),i.on("click.downloadToFormCatcher",(function(r){var s;if(!(_.isUndefined(n)||_.now()-n>3e4))return!1;if(n=_.now(),!0!==t.temporary)return!0;if(r.preventDefault(),t.temporary&&l()(s=i.attr("href")).call(s,"/api/geospatial"))return alert(c.ZP.t("unsaved_views_cannot_be_exported_geospatially",{scope:"controls.grid.errors"})),!1;var o=i.attr("href").replace(/\w{4}-\w{4}/,"INLINE"),u=e("<form>").attr("ACTION",o).attr("method","post");u.data("dataset",t),(a||i).append(u),u.bind("submit",d.formInliner),u.submit()}))}))}}(jQuery)},60799:function(e,t,a){var n=a(49138),i=a(95599),r=a(10401),s=a(17089);a(89041),a(426),a(42e3),a(36413),a(58121),a(98933),a(67360),function(e){e.fn.formatOptions=function(t){var a=e.extend({},e.fn.formatOptions.defaults,t);return this.each((function(){var t,o,l=e(this),c=e.meta?e.extend({},a,l.data()):a;l.data("config-formatOptions",c),c.$grid=e(c.gridSelector),n(l).call(l,"a.toggleButton").click((function(t){t.preventDefault();var a=e(this),n=a.attr("href").split("_")[1];if(!e.isBlank(c.formatEditor)){var i=!a.is(".active");if("link"==n)if(i){var r=prompt("Enter a URL:");null!==r&&(r.match(/^.+@.+\..+/)?r="mailto:"+r:r.match(/^(f|ht)tps?:\/\//)||(r="http://"+r),c.formatEditor.action("link",r))}else c.formatEditor.action("unlink");else c.formatEditor.action(n,i)}})),n(l).call(l,"select").change((function(){var t=e(this),a=t.attr("name").split("_")[1],n=t.val();t.is(".fontSize")&&(n=n/10+"em"),e.isBlank(c.formatEditor)||c.formatEditor.action(a,n)})),n(t=n(o=n(l).call(l,".menu.align").menu({menuButtonContents:e.tag({tagName:"span",class:"alignIcon"},!0),menuButtonTitle:"Alignment",contents:[{title:"Align Left",className:"alignLeft",href:"#format_justifyLeft"},{title:"Align Center",className:"alignCenter",href:"#format_justifyCenter"},{title:"Align Right",className:"alignRight",href:"#format_justifyRight"}]})).call(o,"a").mousedown((function(e){e.stopPropagation()})).end()).call(t,".menuDropdown a").click((function(t){t.preventDefault();var a=e(t.currentTarget).attr("href"),n=i(a).call(a,a.indexOf("#")+1).split("_")[1];e.isBlank(c.formatEditor)||c.formatEditor.action(n,!0)}));var d=n(l).call(l,"a.color");d.colorPicker().bind("color_change",(function(t,a){e.isBlank(c.formatEditor)||c.formatEditor.action("color",a),d.children(".colorIndicator").css("border-bottom-color",a)})).mousedown((function(){d.data("colorpicker-color",n(d).call(d,".colorIndicator").css("border-bottom-color"))})).click((function(e){e.preventDefault()})),e("#color_selector").mousedown((function(e){e.stopPropagation()})),c.$grid.bind("action-state-change",(function(t){if(e(t.target).isControlClass("blistEditor"))if(c.formatEditor=e(t.target).blistEditor(),c.formatEditor.supportsFormatting()){c.formatEditor.registerExternalEditor(l),l.removeClass("disabled");var a=c.formatEditor.getActionStates(),o=n(l).call(l,"a.bold");a.bold.value?o.addClass("active"):o.removeClass("active");var d=n(l).call(l,"a.italic");a.italic.value?d.addClass("active"):d.removeClass("active");var u=n(l).call(l,"a.underline");a.underline.value?u.addClass("active"):u.removeClass("active");var p=n(l).call(l,"a.strike");a.strikethrough.value?p.addClass("active"):p.removeClass("active");var m=n(l).call(l,"a.bulletedList");a.unorderedList.value?m.addClass("active"):m.removeClass("active");var f=n(l).call(l,"a.numberedList");a.orderedList.value?f.addClass("active"):f.removeClass("active");var h=n(l).call(l,"a.link");a.unlink.enabled?h.addClass("active"):h.removeClass("active");var g=n(l).call(l,".fontFamily"),v=(a.fontFamily.value||"arial").toLowerCase(),b=n(g).call(g,'[value="'+v+'"]');b.length<1&&(b=n(g).call(g,'[value^="'+v+'"]')),b.length<1&&(b=n(g).call(g,'[value*="'+v+'"]')),b.length>0&&g.val(b.eq(0).val());var y=n(l).call(l,".fontSize"),w=a.fontSize.value||"10";w="string"==typeof w&&r(w).call(w,"em")?10*parseFloat(w):parseFloat(w);for(var C=n(y).call(y,"option"),x=!1,k=0;k<C.length-1;k++){var $=parseFloat(C.eq(k).val());if($>=w){y.val($),x=!0;break}var S=parseFloat(C.eq(k+1).val());if(S>w){(S+$)/2>w?y.val($):y.val(S),x=!0;break}}x||y.val(C.eq(C.length-1).val());var T=n(l).call(l,".color .colorIndicator"),D=a.color.value+"";if(!s(D).call(D,"#")&&!s(D).call(D,"rgb(")){var F=6-(D=(parseInt(a.color.value)||0).toString(16)).length;for(k=0;k<F;k++)D="0"+D;D="#"+i(D).call(D,0,6)}T.css("border-bottom-color",D);var N=n(l).call(l,".menu.align").removeClass("alignRight alignCenter");a.justifyRight.value?N.addClass("alignRight"):a.justifyCenter.value?N.addClass("alignCenter"):N.addClass("alignLeft"),e.isBlank(e.uniform)||e.isBlank(e.uniform.update)||_.defer((function(){e.uniform.update(n(l).call(l,".uniform :input"))}))}else l.addClass("disabled")})),c.$grid.bind("edit-finished",(function(){var t,a,i,r;n(t=n(a=n(i=n(r=l.addClass("disabled")).call(r,".active").removeClass("active").end()).call(i,"select").each((function(t,a){var i;e(a).val(n(i=e(a)).call(i,".default").val())})).end()).call(a,".menu.align").removeClass("alignRight alignCenter").addClass("alignLeft").end()).call(t,".color .colorIndicator").css("border-bottom-color","#000000"),delete c.formatEditor}))}))},e.fn.formatOptions.defaults={gridSelector:""}}(jQuery)},83126:function(e,t,a){var n=a(96110),i=a(49138);!function(e){e.fn.fullScreen=function(a){var n=e(this[0]).data("fullScreen");return n||(n=new t(a,this[0])),n};var t=function t(a,n){this.settings=e.extend({},t.defaults,a),this.currentDom=n,this.init()};e.extend(t,{defaults:{fullHeightSelector:".fullHeight"},prototype:{init:function(){var t=this;t.$dom().data("fullScreen",t),t.adjustSize(),e(window).on("resize",(function(){t.adjustSize()}))},$dom:function(){return this._$dom||(this._$dom=e(this.currentDom)),this._$dom},adjustSize:function(){var t=this;if(!t._disabled){var r=e(window).height();t.$dom().parents().addBack().each((function(){var t=e(this);r-=t.outerHeight()-t.height()})),r-=a(t.$dom(),t),t.$dom().children().height(r).each((function(){var r,s=e(this);s.is(":visible")&&n(r=i(s).call(s,t.settings.fullHeightSelector)).call(r,":visible").each((function(){var i,r=e(this),s=n(i=r.siblings(t.settings.fullHeightSelector)).call(i,":visible").add(r);r.height(Math.floor(1*(r.parent().innerHeight()-a(r,t))/s.length))}))}))}},enable:function(){this._disabled=!1,this.adjustSize()},disable:function(){var e;this._disabled=!0,i(e=this.$dom().children().height("auto")).call(e,this.settings.fullHeightSelector).height("auto")}}});var a=function(t,a){var n=0;return t.siblings(":visible").each((function(){var t=e(this);t.is(a.settings.fullHeightSelector)||"fixed"!=t.css("position")&&"absolute"!=t.css("position")&&(n+=t.outerHeight(!0))})),n}}(jQuery)},74527:function(e,t,a){"use strict";var n=a(49138),i=a.n(n),r=(a(89041),a(426),a(2980),a(29954),a(79167),a(15552));!function(e){var t={};e.gridSidebar={registerConfig:function(a,n,i,r){if(e.isBlank(a))throw"Sidebar config requires a name";_.each(e.makeArray(r||[]),(function(t){e.gridSidebar.paneForDisplayType[t]=a}));var s={name:a,priority:i||1,controlName:n},o=a.split(".");if(1==o.length)t[a]=e.extend(t[a],s);else{if(2!=o.length)throw"Pane config: can't name with more than one or two parts";var l=o[0];e.isBlank(t[l])&&(t[l]={name:l,isParent:!0,title:e.tNull("controls.common.sidebar.tabs."+l)||l.replace(/([a-z]+)([A-Z])/g,"$1 $2").capitalize(),subPanes:{}}),s.name=o[1],s.parent=t[l],t[l].subPanes[o[1]]=s}},paneForDisplayType:{}},e.Control.extend("gridSidebar",{_init:function(){var t=this;t._super.apply(this,arguments);var a=t.$dom();if(i()(a).call(a,"a.close").on("click",(function(e){e.preventDefault(),t.hide()})),a.addClass("hide position-"+t.settings.position),a.attr("aria-live","polite"),e(window).on("resize",(function(){c(t)})),a.on("resize",(function(){c(t)})),t._setPositionCount=0,t._setPositionMaxCount=50,t._resizeBlocked=!1,t._lastWidth=-1,t._lastHeight=-1,t._resizeNotReady=!1,t._ready=!0,!e.isBlank(t.settings.view)){var n=function(){e.subKeyDefined(t.settings.view,"metadata.sidebar.width")?a.width(t.settings.view.metadata.sidebar.width):a.css("width",""),e(window).trigger("resize")};t.settings.view.bind("clear_temporary",n),n(),t.settings.view.bind("permissions_changed",(function(){t.updateEnabledSubPanes()}))}a.resizable({handles:"left"==t.settings.position?"e":"w",maxWidth:.8*e(window).width(),minWidth:300,stop:function(){d(t)}})},$neighbor:function(){return this._$neighbor||(this._$neighbor=e(this.settings.resizeNeighbor)),this._$neighbor},$currentOuterPane:function(){return e.subKeyDefined(this._currentOuterPane,"$pane")?this._currentOuterPane.$pane:null},$currentPane:function(){return e.subKeyDefined(this._currentPane,"control")?this._currentPane.control.$dom():null},setDefault:function(t){var a=this;a._defaultPane=t,e.isBlank(a._currentPane)&&a.hasPane(a._defaultPane)&&a.show(a._defaultPane)},hasPane:function(a){var i=n(a),r=t[i.primary];if(e.isBlank(r))return!1;var s=(r.subPanes||{})[i.secondary]||t[i.secondary];return!e.isBlank(s)},getPane:function(a){var i=n(a),r=t[i.primary];return!e.isBlank(r)&&((r.subPanes||{})[i.secondary]||t[i.secondary]||{}).control},addPane:function(a,i,r){var s=n(a),o=t[s.primary],l=(o.subPanes||{})[s.secondary]||t[s.secondary];if(e.isBlank(l)||e.isBlank(o))throw"Configuration required for gridSidebar";e.isBlank(o.$pane)&&p(this,o),l.isParent||(l.control.render(i,r),l.control.$dom().hide())},show:function(a,r){var s=this;if(e.isBlank(a)&&(a=s._defaultPane),!e.isBlank(a)){var c=n(a);if(!e.subKeyDefined(s,"_currentOuterPane.name")||s._currentOuterPane.name!=c.primary||!(e.subKeyDefined(s,"_currentPane.name")&&s._currentPane.name==c.secondary||c.secondary==a))if(o(s),e.isBlank(r)||s.addPane(a,r,!0),s._ready){var d=n(a),u=t[d.primary];if(!e.isBlank(u)){var p=(u.subPanes||{})[d.secondary]||t[d.secondary];if(!e.isBlank(p)){var m;if((e.isBlank(u.$pane)||!p.isParent&&e.isBlank(p.control))&&s.addPane(a),e.isBlank(p.control)||p.control.render(),s._currentOuterPane=u,s.$currentOuterPane().show(),!p.isParent)s._currentPane=p,i()(m=s.$currentOuterPane()).call(m,'.headerLink[data-paneName="'+d.secondary+'"]').addClass("selected"),_.defer((function(){var t=s.$currentPane();e.isBlank(t)||t.slideDown((function(){e.isBlank(p.control)||p.control.validatePane()}))}));if(l(s),s.updateEnabledSubPanes(),s.$dom().removeClass("hide"),s.$dom().attr("aria-expanded","true"),e(window).trigger("resize"),p.isParent){var f,h,g=i()(f=s.$currentOuterPane()).call(f,".headerLink:not(.disabled):last");if(g.length<1)g=i()(h=s.$currentOuterPane()).call(h,".headerLink:last");s.show(u.name+"."+g.attr("data-paneName"))}else{var v;if(e.device.ipad)new iScroll(i()(v=s.$currentOuterPane()).call(v,".panes").get(0))}s.settings.onSidebarShown(d.primary,d.secondary),e.isBlank(p.control)||p.control.shown(),e("ul#moreActionBarButtons").addClass("hide")}}}else s._paneToShow=a}},hide:function(t){var a=this;if(a.$dom().removeAttr("aria-expanded"),!t&&!e.isBlank(a._defaultPane)&&a.hasPane(a._defaultPane)){var i=n(a._defaultPane);if(_.isNull(a._currentOuterPane)||_.isNull(a._currentPane))return;if(a._currentOuterPane.name!=i.primary||a._currentPane.name!=i.secondary)return void a.show(a._defaultPane)}a.$dom().addClass("hide"),a.$neighbor().css("width","").css("left",""),o(a),e(window).trigger("resize"),a.settings.onSidebarClosed()},refresh:function(t){if(e.isBlank(t)&&(t=a(this._currentOuterPane,this._currentPane)),!e.isBlank(t)){n(t);var i=s(t);e.subKeyDefined(i,"control")&&i.control.reset()}},updateEnabledSubPanes:function(){var t=this;if(!e.isBlank(t.$currentOuterPane())){_.each(t._currentOuterPane.subPanes||e.makeArray(t._currentOuterPane),(function(a){var n;if(!e.isBlank(a.control)){var r,s=a.control.isAvailable(),o=a.control.getDisabledSubtitle(),l=i()(n=t.$currentOuterPane()).call(n,'.headerLink[data-panename="'+a.name+'"]');if(l.hasClass("disabled")!=!s&&l.toggleClass("disabled",!s).data("title",s?a.control.getSubtitle():o),a.name==(t._currentPane||{}).name)i()(r=a.control.$dom().toggleClass("disabled",!s)).call(r,".disabledMessage").text(o)}}))}},isPaneEnabled:function(a){var i=n(a),r=t[i.primary];if(e.isBlank(r))return!1;var s=(r.subPanes||{})[i.secondary]||t[i.secondary];return!e.isBlank(s)&&(e.isBlank(s.control)&&this.addPane(a),s.control.isAvailable())}},{defaultLoginMessage:"You must be signed in",onSidebarClosed:function(){},onSidebarShown:function(){},position:"right",renderTypeManager:null,resizeNeighbor:null,setHeight:!0,setSidebarTop:!0,view:null,waitOnDataset:!1});var a=function(e,t){var a=e.name;return e.name!=t.name&&(a=_.compact([e.name,t.name]).join(".")),a},n=function(e){var t=e.split("."),a={};if(1==t.length)a.primary=a.secondary=e;else{if(2!=t.length)throw"Only config names of 1 or 2 parts are supported";a.primary=t[0],a.secondary=t[1]}return a},s=function(e){var a=n(e),i=t[a.primary];if(null!=i)return(i.subPanes||{})[a.secondary]||t[a.secondary]},o=function(t,a){var n;if(n=e.isBlank(a)?t._currentPane:s(a),!e.isBlank(n)){var r,o,l=n.parent||n;if(!e.isBlank(l.$pane))i()(r=i()(o=l.$pane.hide()).call(o,".panes").off("scroll")).call(r,".headerLink.selected").removeClass("selected");if(!e.isBlank(n.control)){var c=n.control.$dom();_.defer((function(){c.is(":visible")?c.slideUp():c.hide()}))}e.subKeyDefined(n,"control")&&(n.control.hidden(),n.control.reset(!0)),l==t._currentOuterPane&&(t._currentOuterPane=null),n==t._currentPane&&(t._currentPane=null)}},l=function(t){var a=t.$neighbor().outerHeight(),n=t.$dom().outerHeight()-t.$dom().height();t.settings.setHeight&&t.$dom().height(a-n),t.settings.setSidebarTop&&t.$dom().css("top",-a+"px"),"left"==t.settings.position?(t.$dom().css("left",0),t.$neighbor().css("left",t.$dom().outerWidth(!0))):t.$dom().css("right",0);var r=t.$dom().parent().innerWidth();t.$neighbor().width(r-t.$dom().outerWidth(!0)-(t.$neighbor().outerWidth()-t.$neighbor().width())),t.$neighbor().trigger("resize");var s=t.$currentOuterPane();if(!e.isBlank(s)){if(s.outerHeight()<1)return void(t._resizeNotReady=!0);t._resizeNotReady=!1;var o=i()(s).call(s,".panes");o.css("height",""),n=s.outerHeight()-o.height(),o.height(t.$dom().height()-n)}},c=function(t){var a=e("body").width(),n=t.$dom().height();if(a!=t._lastWidth||n!=t._lastHeight||t._resizeNotReady){if(t._lastWidth=a,t._lastHeight=n,t._setPositionCount>t._setPositionMaxCount||t._resizeBlocked)return console.error("Layout Cycle"),void(t._resizeBlocked=!0);t._setPositionCount++,_.defer((function(){try{t.$dom().is(":hidden")||l(t)}finally{t._setPositionCount--,0==t._setPositionCount&&(t._resizeBlocked=!1)}}))}},d=function(t){if(t.$dom().css("left",""),e(window).trigger("resize"),!e.isBlank(t.settings.view)){var a=e.extend(!0,{},t.settings.view.metadata);a.sidebar=a.sidebar||{},a.sidebar.width=t.$dom().width(),t.settings.view.update({metadata:a},!1,!0)}},u=function(t,a,n){var r,s=e.tag({tagName:"div"});if(i()(r=n.$pane).call(r,".panes").append(s),a.control=s[a.controlName]({renderTypeManager:t.settings.renderTypeManager,view:t.settings.view}),s.on("hide",(function(){a.control.settings.name==(t._currentPane||{}).name&&t.hide()})),!e.isBlank(a.parent)){var o=a.control.getTitle();s.hide().before(e.tag({tagName:"a",href:"#"+o,class:["headerLink",a.name],data:{title:a.control.getSubtitle(),paneName:a.name},contents:[{tagName:"span",class:"icon"},{tagName:"span",class:"title",contents:o}]}))}},p=function(t,a){var n=e.tag({tagName:"div",id:t.$dom().attr("id")+"_outer_"+a.name,class:"outerPane"});a.$pane=n,n.append(e.renderTemplate("outerPane")),e.isBlank(a.controlName)||u(t,a,a),i()(n).call(n,".mainTitleBlock .title").text(e.isBlank(a.control)?a.title:a.control.getTitle()),_.each(_.sortBy(a.subPanes,(function(e){return e.priority})).reverse(),(function(e){u(t,e,a)})),i()(n).call(n,".headerLink").on("click",(function(n){n.preventDefault(),m(t,e(this),a.name)})).each((function(){var t=e(this),a=e(this).data("title").clean();e.isBlank(a)||t.socrataTip({content:function(){return e.tag({tagName:"p",contents:(0,r.purify)(e(this).data("title"))},!0)},killTitle:!0,positions:"left"})})),t.$dom().append(n),n.hide()},m=function(e,t,a){t.is(".selected, .disabled")||e.show(a+"."+t.attr("data-paneName"))}}(jQuery)},78312:function(e,t,a){var n=a(49138);!function(e){e.Control.extend("pane_about",{getTitle:function(){return e.t("controls.common.sidebar.tabs.about")},_getSections:function(){return[{customContent:{template:"aboutDataset",directive:{},data:{},callback:function(t){n(t).call(t,".starsControl").each((function(){blist.datasetControls.datasetRating(e(this),t,!0),e(this).validate()})),blist.currentUserId||n(t).call(t,".yourRating").socrataTip(e.t("screens.about.tooltips.rating_disabled")),n(t).call(t,".expander").on("click",(function(t){t.preventDefault();var a=e(this);a.toggleClass("expanded").toggleClass("collapsed").siblings(".sectionContent").slideToggle(a.hasClass("expanded"))})),blist.datasetControls.datasetContact(t)}}}]}},{name:"about"},"controlPane"),blist.sidebarHidden.about||e.gridSidebar.registerConfig("about","pane_about")}(jQuery)},44477:function(e,t,a){"use strict";a(29954),a(68640),a(27938),a(79167),a(89041),a(2980),a(60148);var n=a(4081),i=a.n(n),r=a(96110),s=a.n(r),o=a(49138),l=a.n(o),c=a(21456),d=a.n(c),u=a(23366),p=a.n(u),m=a(901);function f(e,t,a,n){var r="screens.ds.grid_sidebar.add_column.nbe_geocoding_configuration.",o=function(e,t){var a,n={address:$.t(r+"address_label"),locality:$.t(r+"locality_label"),subregion:$.t(r+"subregion_label"),region:$.t(r+"region_label"),postal_code:$.t(r+"postal_code_label"),country:$.t(r+"country_label")};return'<div class="nbe-geocoding-option line clearfix select"><label for="'+t+'">'+n[t]+'</label><div class="inputWrapper"><div class="selector uniform"><div class="container"><div><span>'+$.t(r+"select_header")+'</span></div></div><select name="'+t+'" class="inputItem"><option value="" selected>'+$.t(r+"select_header")+"</option>"+i()(a=s()(e).call(e,(function(e){return"text"===e.dataTypeName||"number"===e.dataTypeName&&"postal_code"===t}))).call(a,(function(e){return'<option value="'+e.fieldName+'">'+e.name+"</option>"})).join("")+'</select></div></div></div><div class="nbe-geocoding-option line clearfix input"><label for="'+t+'-default">'+$.t(r+"default_label")+'</label><input type="text" name="'+t+'-default" placeholder="'+$.t(r+"default_placeholder")+'" /></div>'},c=$('<div id="nbe-geocoding" class="commonForm formSection"><div class="paneContent"><div><input id="create-point-column" name="create-point-column-type" type="radio" checked><label for="create-point-column">'+$.t("screens.ds.grid_sidebar.add_column.nbe_geocoding_configuration.create_point_column")+'</label></div><div><input id="create-geocoded-point-column" name="create-point-column-type" type="radio"><label for="create-geocoded-point-column">'+$.t("screens.ds.grid_sidebar.add_column.nbe_geocoding_configuration.create_geocoded_point_column")+'</label></div><div id="create-geocoded-point-column-fields" class="formSection" style="display: none;"><div class="subtitleBlock"><p class="subtitle">'+$.t("screens.ds.grid_sidebar.add_column.nbe_geocoding_configuration.subtitle")+'</p></div><div class="nbe-geocoding-fields sectionContent" name="nbe-geocoding-fields">'+o(e,"address")+o(e,"locality")+o(e,"region")+o(e,"postal_code")+o(e,"country")+o(e,"subregion")+'</div></div><div class="nbe-geocoding-buttons finishButtons clearfix"><a id="nbe-geocoding-submit" href="#" class="button arrowButton requiresLogin submit">'+$.t("core.dialogs.create")+'</a><a id="nbe-geocoding-cancel" href="#" class="button requiresLogin">'+$.t("core.dialogs.cancel")+"</a></div></div></div>"),u={address:null,locality:null,subregion:null,region:null,postal_code:null,country:null},m={address:null,locality:null,subregion:null,region:null,postal_code:null,country:null},f=function(){var t,a,n,r=i()(e).call(e,(function(e){return e.fieldName})),o=s()(t=i()(a=l()(n=$("#create-geocoded-point-column-fields")).call(n,"select").toArray()).call(a,(function(e){return $(e).value()}))).call(t,(function(e){return null!==e})),c=s()(o).call(o,(function(e){return!d()(_).call(_,r,e)})),u=!_.isEmpty(o)&&_.isEmpty(c);return $("#nbe-geocoding-submit").toggleClass("disabled",!u),u};l()(c).call(c,"#create-point-column").on("click",(function(){$("#nbe-geocoding-submit").toggleClass("disabled",!1),$("#create-geocoded-point-column-fields").hide()})),l()(c).call(c,"#create-geocoded-point-column").on("click",(function(){f(),$("#create-geocoded-point-column-fields").show()})),l()(c).call(c,".nbe-geocoding-option select").on("change",(function(e){var t,a=$(e.target).value(),n=l()(t=$(e.target).parent()).call(t,".container div span");u[e.target.name]=a,_.isNull(a)?n.text($.t("screens.ds.grid_sidebar.add_column.nbe_geocoding_configuration.optional_select_header")):n.text(a),f()})),l()(c).call(c,".nbe-geocoding-option input").on("input",(function(e){m[e.target.name.replace(/\-default$/,"")]=$(e.target).value(),f()})),l()(c).call(c,"#nbe-geocoding-submit").on("click",(function(){if($("#create-geocoded-point-column").value()){if(f()){var e=_.cloneDeep(u),i=[],r=_.cloneDeep(m);p()(e).forEach((function(t){_.isNull(e[t])?delete e[t]:i.push(_.get(e,t))})),p()(r).forEach((function(e){_.isNull(r[e])&&delete r[e]}));var s=_.cloneDeep(t);s.computationStrategy={type:"geocoding",source_columns:i,parameters:{sources:e,defaults:r,version:"v1"}},c.remove(),a(),n(s)}}else c.remove(),a(),n(t)})),l()(c).call(c,"#nbe-geocoding-cancel").on("click",(function(){confirm($.t("screens.ds.grid_sidebar.add_column.nbe_geocoding_configuration.cancel_configuration_prompt"))&&c.remove()})),$(".controlPane.addColumn").parent(".panes").scrollTop(0),$(".controlPane.addColumn").append(c)}!function(e){var t=function(t){var a,n=!_.isUndefined((t||{}).parentId),r=i()(a=_.chain(blist.datatypes)).call(a,(function(t,a){if((!(t.deprecatedInWave1||t.deprecatedInWave2)&&!t.createable&&t.nbeModifiable||t.createable&&!t.deprecatedInNbe)&&!n)return{text:e.t("core.data_types."+t.name),value:a,priority:t.priority,group:t.group}})).compact().sortBy((function(e){return e.priority})).value();return m.ZP.value("prohibit_use_of_row_set")||!n&&_.isFunction(blist.dataset.hasDatasetLinkColumn)&&blist.dataset.hasDatasetLinkColumn()&&r.push({value:"link",text:e.t("core.data_types.link")}),r};e.Control.extend("pane_addColumn",{isAvailable:function(){return this._view.valid&&(!this._view.temporary||this._view.minorChange)&&"blist"==this._view.type},getTitle:function(){return e.t("screens.ds.grid_sidebar.add_column.title")},getSubtitle:function(){return e.t("screens.ds.grid_sidebar.add_column.subtitle")},getDisabledSubtitle:function(){return this._view.valid?e.t("screens.ds.grid_sidebar.add_column.validation.view_column"):e.t("screens.ds.grid_sidebar.base.validation.invalid_view")},_getSections:function(){var a=[{text:e.t("screens.ds.grid_sidebar.column_common.type.type"),type:"select",required:!0,prompt:e.t("screens.ds.grid_sidebar.column_common.type.type_prompt"),name:"dataTypeName",options:blist.dataset.newBackend?t():t}];m.ZP.value("prohibit_use_of_row_set")||(a.push({text:e.t("screens.ds.grid_sidebar.column_common.type.key"),type:"columnSelect",name:"format.linkedKey",required:!0,onlyIf:{field:"dataTypeName",value:"link"},columns:{type:"dataset_link",hidden:!1}}),a.push({text:e.t("screens.ds.grid_sidebar.column_common.type.source"),type:"select",name:"format.linkedSource",required:!0,onlyIf:{field:"dataTypeName",value:"link"},linkedField:"format.linkedKey",options:function(e,t,a,n){var i=this._view;return _.isFunction(i.getLinkedColumnOptions)?i.getLinkedColumnOptions.call(i,e,t,a,n):[]}}));var n=[{title:e.t("screens.ds.grid_sidebar.column_common.basic.title"),fields:[{text:e.t("screens.ds.grid_sidebar.column_common.basic.name"),type:"text",required:!0,name:"name",prompt:e.t("screens.ds.grid_sidebar.column_common.basic.name_prompt")},{text:e.t("screens.ds.grid_sidebar.column_common.basic.description"),type:"textarea",name:"description",prompt:e.t("screens.ds.grid_sidebar.column_common.basic.description_prompt")}]},{title:e.t("screens.ds.grid_sidebar.column_common.type.title"),fields:a},{title:e.t("screens.ds.grid_sidebar.add_column.multiple_choice.title"),onlyIf:{field:"dataTypeName",value:"drop_down_list"},fields:[{type:"repeater",addText:e.t("screens.ds.grid_sidebar.add_column.multiple_choice.add_option_button"),name:"dropDownList.values",minimum:1,field:{type:"text",text:e.t("screens.ds.grid_sidebar.add_column.multiple_choice.option"),name:"description"}}]},{title:e.t("screens.ds.grid_sidebar.add_column.convert_latlong.title"),onlyIf:{field:"dataTypeName",value:"location"},type:"selectable",name:"latLongSection",fields:[{text:e.t("screens.ds.grid_sidebar.add_column.convert_latlong.latitude"),type:"columnSelect",name:"convert.latitudeColumn",required:!0,notequalto:"convertNumber",columns:{type:"number",hidden:!1,defaultNames:["latitude","lat","y"]}},{text:e.t("screens.ds.grid_sidebar.add_column.convert_latlong.longitude"),type:"columnSelect",name:"convert.longitudeColumn",required:!0,notequalto:"convertNumber",columns:{type:"number",hidden:!1,defaultNames:["longitude","long","x"]}}]},{title:e.t("screens.ds.grid_sidebar.add_column.convert_address.title"),onlyIf:{field:"dataTypeName",value:"location"},type:"selectable",name:"addressSection",fields:[{text:e.t("screens.ds.grid_sidebar.add_column.convert_address.street"),type:"radioGroup",name:"convertStreetGroup",defaultValue:"streetNone",options:[{value:e.t("core.forms.none"),name:"streetNone",type:"static"},{type:"columnSelect",name:"convert.addressColumn",notequalto:"convertText",columns:{type:"text",hidden:!1,defaultNames:["street address","street","address"]}}]},{text:e.t("screens.ds.grid_sidebar.add_column.convert_address.city"),type:"radioGroup",name:"convertCityGroup",defaultValue:"cityNone",options:[{value:e.t("core.forms.none"),type:"static",name:"cityNone"},{type:"columnSelect",name:"convert.cityColumn",notequalto:"convertText",columns:{type:"text",hidden:!1,defaultNames:["city"]}},{type:"text",name:"convert.cityValue",prompt:e.t("screens.ds.grid_sidebar.add_column.convert_address.city_prompt")}]},{text:e.t("screens.ds.grid_sidebar.add_column.convert_address.state"),type:"radioGroup",name:"convertStateGroup",defaultValue:"stateNone",options:[{value:e.t("core.forms.none"),type:"static",name:"stateNone"},{type:"columnSelect",name:"convert.stateColumn",notequalto:"convertText",columns:{type:"text",hidden:!1,defaultNames:["state"]}},{type:"text",name:"convert.stateValue",prompt:e.t("screens.ds.grid_sidebar.add_column.convert_address.state_prompt")}]},{text:e.t("screens.ds.grid_sidebar.add_column.convert_address.zip_code"),type:"radioGroup",name:"convertZipGroup",defaultValue:"zipNone",options:[{value:e.t("core.forms.none"),type:"static",name:"zipNone"},{type:"columnSelect",name:"convert.zipColumn",notequalto:"convertText convertNumber",columns:{type:["text","number"],hidden:!1,defaultNames:["zip code","postal code","zip"]}},{type:"text",name:"convert.zipValue",prompt:e.t("screens.ds.grid_sidebar.add_column.convert_address.zip_code_prompt")}]}]}];return m.ZP.value("prohibit_use_of_row_set")||n.push({title:e.t("screens.ds.grid_sidebar.column_common.linked_dataset.title"),onlyIf:{field:"dataTypeName",value:"dataset_link"},fields:[{text:e.t("screens.ds.grid_sidebar.column_common.linked_dataset.dataset"),type:"text",name:"format.linkedDataset",data:{"4x4uid":"unverified"},prompt:""},{text:e.t("screens.ds.grid_sidebar.column_common.linked_dataset.key"),type:"select",name:"format.keyColumn",linkedField:"format.linkedDataset",defaultValue:"_selected",options:Dataset.getLinkedDatasetOptionsDefault},{text:e.t("screens.ds.grid_sidebar.column_common.linked_dataset.label"),type:"select",name:"format.labelColumn",linkedField:"format.linkedDataset",options:Dataset.getLinkedDatasetOptionsDefault}]}),n},_getFinishButtons:function(){return[e.controlPane.buttons.create,e.controlPane.buttons.cancel]},_finish:function(t,i,r){var s=this;if(s._super.apply(this,arguments)){var o=s._getFormValues();if("location"!=o.dataTypeName||e.isBlank(o.convert))if(e.isBlank((t||{}).parentId)){var l=function(e){s._view.addColumn(e,(function(e){a(s,e,r)}),(function(e){s._genericErrorHandler(e)}))};Column.isNbePointColumn(blist.dataset,o)?(s._finishProcessing(),f(blist.dataset.columns,o,(function(){s._startProcessing()}),l)):l(o)}else{var c=s._view.columnForID(t.parentId);c.addChildColumn(o,(function(e){a(s,e,r)}),(function(e){s._genericErrorHandler(e)}))}else n(s,o,r)}}},{name:"addColumn"},"controlPane");var a=function(t,a,n){t._finishProcessing(),t._showMessage(e.t("screens.ds.grid_sidebar.add_column.success")),t._hide(),_.isFunction(n)&&n()},n=function(t,n,i){t._view.addColumn(null,(function(r){e.isBlank(n.description)?a(t,r,i):(r.description=n.description,r.save((function(e){a(t,e,i)}),(function(e){t._genericErrorHandler(e)}))),t._view.reload(!0)}),(function(e){t._genericErrorHandler(e)}),e.extend({method:"addressify",deleteOriginalColumns:!1,location:n.name},n.convert))};!e.isBlank(blist.sidebarHidden.edit)&&blist.sidebarHidden.edit.addColumn||e.gridSidebar.registerConfig("edit.addColumn","pane_addColumn",4)}(jQuery)},19743:function(){!function(e){e.Control.extend("pane_addRow",{isAvailable:function(){return this._view.valid&&(!this._view.temporary||this._view.minorChange)&&"blist"==this._view.type},getTitle:function(){return e.t("screens.ds.grid_sidebar.add_row.title")},getSubtitle:function(){return e.t("screens.ds.grid_sidebar.add_row.subtitle")},getDisabledSubtitle:function(){return""},_getSections:function(){return[]},_getFinishButtons:function(){return[]},_finish:function(){}},{name:"addRow"},"controlPane"),!e.isBlank(blist.sidebarHidden.edit)&&blist.sidebarHidden.edit.addRow||e.gridSidebar.registerConfig("edit.addRow","pane_addRow",1)}(jQuery)},65316:function(e,t,a){var n=a(49138);!function(e){e.Control.extend("pane_api",{getTitle:function(){return e.t("screens.ds.grid_sidebar.api.title")},getSubtitle:function(){return e.t("screens.ds.grid_sidebar.api.subtitle",{view_type:this._view.displayName})},render:function(){var t=this;t._super(null,null,(function(a){var i,r;a&&(n(i=t.$dom()).call(i,"input").on("click",(function(){var t=e(this);t.trigger("focus"),t.trigger("select")})),ZeroClipboard.config({swfPath:"/ZeroClipboard.swf"}),new ZeroClipboard(n(r=t.$dom()).call(r,"button")[0]))}))},_getSections:function(){return[{customContent:{template:"apiContentWrapper",directive:{"p@class+":"pClass"},data:{pClass:"sectionContent"}}}]}},{name:"api"},"controlPane"),!e.isBlank(blist.sidebarHidden.exportSection)&&blist.sidebarHidden.exportSection.api||e.gridSidebar.registerConfig("export.api","pane_api",10)}(jQuery)},10681:function(){!function(e){e.Control.extend("pane_appendReplace",{getTitle:function(){return blist.dataset.isImmutable()?e.t("screens.ds.grid_sidebar.append_replace.title.immutable"):e.t("screens.ds.grid_sidebar.append_replace.title.mutable")},getSubtitle:function(){return blist.dataset.isImmutable()?e.t("screens.ds.grid_sidebar.append_replace.subtitle.immutable"):e.t("screens.ds.grid_sidebar.append_replace.subtitle.mutable")},_getSections:function(){return[{customContent:{template:"appendReplace",data:{},directive:{}}}]}},{name:"appendReplace",noReset:!0},"controlPane"),!e.isBlank(blist.sidebarHidden.edit)&&blist.sidebarHidden.edit.appendReplace||e.gridSidebar.registerConfig("edit.appendReplace","pane_appendReplace",5)}(jQuery)},46782:function(e,t,a){var n=a(45916),i=a(49138),r=a(17933),s=a(4081),o=a(96110),l=a(95599),c=a(21456),d=a(35188),u=a(66282),p=a(27255),m=a(65075),f=a(10401),h=a(17089);a(89041),a(42e3),a(29954),a(79167),a(426),a(98933),a(67360),a(94173),function(e){e.validator.addMethod("data-notEqualTo",(function(t,a,n){if(this.optional(a))return!0;var i=!1,r=e(a);return!r.is(":visible")||(e(n+":visible").each((function(a,n){var s=e(n);if(r.index(s)<0&&s.val()==t)return i=!0,!1})),!i)}),e.t("screens.ds.grid_sidebar.base.validation.different_value")),e.validator.addMethod("data-onlyIfInput",(function(e,t){return!!this.optional(t)||_.isNull(t.className.match(/\bsectionDisabled-/))}),e.t("screens.ds.grid_sidebar.base.validation.invalid_value")),e.validator.addMethod("data-custom-4x4uid",(function(t,a){var n=t;if(e.isBlank(n)||n==e(a).attr("title")||n.match(blist.util.patterns.UID))return!0;var i=n.match(/(\/[a-zA-Z0-9_\-]+){1,2}\/(\w{4}-\w{4})/);return!e.isBlank(i)&&(e(a).val(i[2]),!0)}),e.t("screens.ds.grid_sidebar.base.validation.uid_required")),e.validator.addMethod("data-custom-fieldName",(function(e){return e==Column.sanitizeName(e)}),e.t("screens.ds.grid_sidebar.base.validation.identifier_format")),e.validator.addMethod("data-requiredTypes",(function(t,a,n){return!!this.optional(a)||e.isBlank(n)}),(function(t){e.t("screens.ds.grid_sidebar.base.validation.file_format",{formats:t})})),e.validator.addMethod("data-validateMin",(function(e,t,a){return e=parseInt(e),!_.isNaN(e)&&e>=parseFloat(a)}),(function(t,a){return _.isNaN(parseInt(t))?e.t("screens.ds.grid_sidebar.base.validation.numeric"):e.t("screens.ds.grid_sidebar.base.validation.at_least",{value:e(a).attr("data-validateMin")})})),e.validator.addMethod("data-validateMax",(function(e,t,a){return e=parseInt(e),!_.isNaN(e)&&e<=parseFloat(a)}),(function(t,a){return _.isNaN(parseInt(t))?e.t("screens.ds.grid_sidebar.base.validation.numeric"):e.t("screens.ds.grid_sidebar.base.validation.no_greater",{value:e(a).attr("data-validateMax")})})),e.controlPane={buttons:{create:{text:e.t("screens.ds.grid_sidebar.base.buttons.create"),value:!0,isDefault:!0,requiresLogin:!0},update:{text:e.t("screens.ds.grid_sidebar.base.buttons.update"),value:!0,isDefault:!0,requiresLogin:!0},apply:{text:e.t("screens.ds.grid_sidebar.base.buttons.apply"),value:!0,isDefault:!0},done:{text:e.t("screens.ds.grid_sidebar.base.buttons.done"),value:!1,isDefault:!0},cancel:{text:e.t("screens.ds.grid_sidebar.base.buttons.cancel"),value:!1,isCancel:!0}}},e.Control.extend("controlPane",{_init:function(){var t=this;t._super.apply(t,arguments),t.$dom().loadingSpinner({overlay:!0}),t.$dom().append(e.tag([{tagName:"div",class:"disabledOverlay"},{tagName:"p",class:"disabledMessage"}])),t._selectOptions={},t._customCallbacks={},t._customSections={},t._columnSelects=[],t._fieldOnlyIfs={},t._fieldDisabled={},t._changeHandlers={},t._isDirty=!0,t._visible=!1,t._isReady=!0,t.setView(t.settings.view),t.$dom().attr("id","controlPane_"+t.settings.name+"_"+_.uniqueId()).addClass("controlPane "+t.settings.name),t.settings.noReset&&t.$dom().addClass("noReset")},$content:function(){return e.isBlank(this._$content)&&(this._$content=e.tag({tagName:"form",class:["commonForm",{value:"minimal",onlyIf:this.settings.minimalDisplay}]}),this.$dom().append(this._$content)),this._$content},setView:function(t){var a=this;e.isBlank(a._view)||a._view.unbind(null,null,a),a._view=t,e.isBlank(t)||a._view.bind("columns_changed",(function(){I(a)}),a)},isAvailable:function(){return!0},getTitle:function(){return""},getSubtitle:function(){return""},getDisabledSubtitle:function(){return""},shown:function(){this._visible=!0},hidden:function(){this._visible=!1},render:function(t,a,n){n=n||function(){};var o=this,l=o.$content();if(!o._isReady)return!e.isBlank(o._cachedRender)&&e.isBlank(t)||(o._cachedRender={data:t,isTempData:a}),o._startProcessing(),void n(!1);if(o._finishProcessing(),!e.isBlank(t)&&!_.isEqual(t,o._getCurrentData())||o._isDirty)if(i(l).call(l,".line.custom").each((function(){F(o,e(this))})),i(l).call(l,"[data-customContent]").each((function(){N(o,e(this))})),l.empty(),o.isAvailable()){e.isBlank(t)?t=o._getCurrentData():a||(this._data=t),e.isBlank(t)||(t=o._dataPreProcess(t)),this._curData=t;var c={title:o.getTitle(),subtitle:o.getSubtitle(),sections:o._getSections(),paneId:o.$dom().attr("id"),data:t||{}};!o._isReadOnly()&&o.settings.showFinishButtons?c.finishButtons=o._getFinishButtons():c.readOnlyMessage=o._getReadOnlyMessage();var d=function(){var a,d,u,p={},m={".subtitle":"subtitle",".subtitleBlock@class+":function(t){return e.isBlank(t.context.subtitle)?"hide":""},".readOnlyMessage":"readOnlyMessage",".readOnlyBlock@class+":function(t){return e.isBlank(t.context.readOnlyMessage)?"hide":""},".formSection":{"section<-sections":{"@class+":function(t){var a;return u=_.uniqueId(),_.compact(r(a=[t.item.type,t.item.name,t.item.initShow?"initShow":"",t.item.validateCollapsed?"validateCollapsed":"",e.isBlank(t.item.onlyIf)&&"hidden"!=t.item.type?"":"hide",e.isBlank(t.item.customContent)?"":"custom"]).call(a,e.arrayify(t.item.customClasses))).join(" ")},"@data-onlyIf":function(t){if(!e.isBlank(t.item.onlyIf)){var a=_.uniqueId();return p[a]=e.arrayify(t.item.onlyIf),a}return""},"@data-customContent":function(t){if(!e.isBlank(t.item.customContent)){var a=_.uniqueId();return o._customSections[a]=t.item.customContent,a}return""},"@name":function(e){return(e.item.name||"")+"_"+u},".formHeader+":"section.title",".formHeader@for":function(e){return(e.item.name||"")+"_"+u},".formHeader@class+":function(t){return e.isBlank(t.item.title)?"hide":""},".sectionSelect@id":function(e){return(e.item.name||"")+"_"+u},".sectionSelect@name":function(e){return(e.item.name||"")+"_"+u},".sectionContent+":function(t){return s(_).call(_,t.item.fields||[],(function(a,n){return D(o,{context:e.extend({},t.context,{sectionName:t.item.name,sectionOptions:{showIfData:t.item.showIfData}}),item:a,items:t.item.fields,pos:n})})).join("")}}},".finishButtons > li":{"button<-finishButtons":{".+":function(t){var a={text:t.item.text,className:[],customAttrs:{"data-value":t.item.value,"data-loginMsg":t.item.loginMessage}};return t.item.isDefault?(a.className.push("arrowButton"),a.iconClass="submit"):t.item.isCancel&&(a.iconClass="cancel"),t.item.requiresLogin&&a.className.push("requiresLogin"),e.button(a,!0)}}}};l.append(e.renderTemplate(o.getTemplateName(),c,m)),l.toggleClass("readOnly",o._isReadOnly()),i(l).call(l,"label.required").length>0&&i(l).call(l,"div.required").removeClass("hide");var f=i(a=o.$dom()).call(a,".formSection"),h=i(d=o.$dom()).call(d,"input, select, textarea");_.each(p,(function(e,t){E(o,e,t,f,h)})),i(l).call(l,".formSection.selectable").each((function(){var t=e(this),a=!1;i(t).call(t,"[data-dataValue]").each((function(){var t=e(this),n="checkbox"==t.attr("type"),i=t.hasClass("colorInput");a=a||!i&&!n||i&&"["+t.attr("data-dataValue")+"]"!=t.attr("data-defaultValue")||n&&t.attr("data-dataValue")!=t.attr("data-defaultValue")})),a=a||t.hasClass("initShow"),t.toggleClass("collapsed",!a),i(t).call(t,".sectionSelect").value(a)})),o._isReadOnly()||i(l).call(l,".formSection.selectable .sectionSelect").on("click",(function(){var t=e(this);t.closest(".formSection").toggleClass("collapsed",!t.is(":checked"))})),P(o,l),l.off(".paneAddValue",".button.addValue"),l.on("click.paneAddValue",".button.addValue",(function(t){t.stopImmediatePropagation(),t.preventDefault(),O(o,e(this))})),i(l).call(l,".finishButtons a").on("click",(function(a){a.preventDefault();var n=e(this);if(!n.is(".disabled")){o._startProcessing();var i;o._finish(t,n.attr("data-value"),i)}})),_.each(o._customSections,(function(a,n){var r=i(l).call(l,'[data-customContent="'+n+'"]'),s=i(r).call(r,".sectionContent");e.isBlank(a.template)||s.addClass(a.template).append(e.renderTemplate(a.template,e.extend({},t,a.data),a.directive)),_.isFunction(a.callback)&&a.callback.call(o,s,t)})),o._validator=l.on("submit",(function(t){e.isBlank(e(this).attr("action"))&&t.preventDefault()})).validate({ignore:":hidden",errorElement:"span",errorPlacement:function(e,t){e.appendTo(t.closest(".line"))},invalidHandler:function(){}}),l.data("form-validator",o._validator),o._isDirty=!1,o._visible=!0,n(!0)},u=function e(t){return"columnSelect"==t.type?t.columns.useQueryBase:"repeater"==t.type?e(t.field):"group"==t.type&&_.some(t.options,e)};_.some(c.sections,(function(e){return _.some(e.fields,u)}))?o._view.getQueryBase(d):d()}else n(!1);else n(!1)},getTemplateName:function(){return"sidebarPane"},reset:function(e){var t=this;e&&t.$dom().is(".noReset")||(t._isDirty=!0,t._visible&&t.render())},validatePane:function(){var e,t,a,n,r,s,l,c=this,d=o(e=i(t=c.$dom()).call(t,".formSection")).call(e,":visible"),u=o(d).call(d,".sectionDisabled");i(a=i(n=c.$dom()).call(n,".finishButtons").toggleClass("hide",d.length==u.length)).call(a,".submit").toggleClass("disabled",o(r=o(s=i(l=c.$dom()).call(l,"input, select, textarea")).call(s,".required:visible:not(:disabled)")).call(r,":blank, :checkbox:unchecked").length>0||u.length>0)},_startProcessing:function(){this.$dom().loadingSpinner().showHide(!0)},_finishProcessing:function(){this.$dom().loadingSpinner().showHide(!1)},_hide:function(){this.$dom().trigger("hide"),this.reset()},_getCurrentData:function(){return this._data||this.settings.data},_dataPreProcess:function(e){return e},_isReadOnly:function(){return!1},_getReadOnlyMessage:function(){return null},_getSections:function(){return[]},_getFinishButtons:function(){return[]},_finish:function(e,t){var a=this;return t?a.validateForm():(a._finishProcessing(),a._hide(),!1)},validateForm:function(){var t,a,n,r,s=this;return i(t=s.$dom()).call(t,".formSection.disabled:visible").addClass("error"),g(s),i(a=s.$dom()).call(a,"form").valid()?(v(s),i(n=s.$dom()).call(n,".mainError").text(""),!0):(s._finishProcessing(),v(s),i(r=s.$dom()).call(r,".mainError").text(e.t("screens.ds.grid_sidebar.base.validation.invalid_values")),!1)},_isValid:function(t){var a=t;if(t.hasClass("customWrapper")){var n=this._customCallbacks[t.attr("data-customId")];return e.isBlank(n)||(n=n.validate),!_.isFunction(n)||n.call(this,t)}return t.hasClass("colorInput")&&(a=t.siblings("a.colorControl")),a.is(":visible")&&t.valid()},_getInputValue:function(t,n){var r=this,s=t.parents();if(t.isInputType("radio")&&s.hasClass("radioBlock")){var u,p={};return t.closest(".radioLine").siblings(".radioLine").quickEach((function(){i(this).call(this,"label :input").quickEach((function(){r._getInputValue(this,p)}))})),p=a(p),n=e.extend(n,p),i(u=t.closest(".radioLine")).call(u,"label :input").quickEach((function(){r._getInputValue(this,n)})),n}var m=y(r,t),f=t.attr("name");if(_.isUndefined(f))return n;var h,g,v=n=n||{};if(s.hasClass("repeater")){for(var w,C=o(s).call(s,".line.repeater"),x=C.length-1;x>=0;x--){var k,$=C.eq(x).children(".button.addValue").attr("name");if(x!=C.length-1)$=l(k=$.split("-")).call(k,0,-1).join("-");h=b($,[],v,g);var S=(0==x?t:C.eq(x-1).children(".button.addValue")).attr("name").split("-");g=S[S.length-1],e.isBlank(h)||(v=h[g]||{})}f=l(w=f.split("-")).call(w,0,-1).join("-");var T=t.closest(".line[data-savedData]");T.length>0&&e.extend(v,JSON.parse(T.attr("data-savedData")||"{}"))}if(!e.isBlank(m)&&"select"==t.tagName()&&s.hasClass("columnSelect")&&c(_).call(_,["tableColumnId","id"],t.attr("data-columnIdField"))&&_.isEmpty(r._view.queryString)&&(m=parseInt(m)),b(f,m,v,g),"select"==t.tagName()){var D=i(t).call(t,"option:selected"),F=D.attr("data-customKeys");e.isBlank(F)||_.each(F.split(","),(function(e){b(e,D.attr("data-custom-"+e),v,g)}))}if(!e.isBlank(h)&&!_.isEmpty(v)){var N=d(_).call(_,v);1==N.length&&e.isBlank(N[0])&&(v=v[""]),h[g]=v}return n},_getFormValues:function(t){var a,n,r,s,l=this,c={};g(l);var d=i(a=i(n=l.$dom()).call(n,".formSection.validateCollapsed")).call(a,".sectionContent:hidden");d.show();var u=o(r=i(s=l.$dom()).call(s,"form :input, form .colorControl, form .customWrapper")).call(r,":visible:not(:disabled, .prompt, .sectionSelect, .radioLine label *, .customWrapper *)");return d.hide(),u.each((function(){var a=e(this),n=a.parents();if(!a.isInputType("radio")||!n.hasClass("radioLine")||a.is(":checked")){var r;if(a.isInputType("radio")&&n.hasClass("radioBlock"))if((a=i(r=a.closest(".radioLine")).call(r,"label :input")).length<1)return;if(!t&&n.hasClass("group")){var s,o=!1;if(i(s=a.closest(".inputBlock")).call(s,"[data-isrequired]:visible:not(:disabled)").each((function(){var t=y(l,e(this));o=o||e.isBlank(t)||!1===t})),o)return}l._getInputValue(a,c)}})),v(l),e.deepCompact(c)},_showMessage:function(e){this.$dom().socrataAlert({message:e,overlay:!0})},_genericErrorHandler:function(e){var t;this._finishProcessing(),i(t=this.$dom()).call(t,".mainError").text(JSON.parse(e.responseText).message)},_markReady:function(){var t=this;t._isReady=!0;var a=t._cachedRender;e.isBlank(a)||(delete t._cachedRender,t.render(a.data,a.isTempData))}},{name:"unset",noReset:!1,renderTypeManager:null,showFinishButtons:!0,view:null});var t=function(t){e.isBlank(e.uniform)||e.isBlank(e.uniform.update)||e.uniform.update(t)},a=function t(a){if(_.isArray(a))return s(_).call(_,a,t);if(!e.isPlainObject(a))return null;var n={};_.each(a,(function(e,a){n[a]=t(e)}))},g=function(t){var a;i(a=t.$dom()).call(a,".radioBlock > .radioLine").each((function(){var t=e(this);i(t).call(t,"input[type=radio]").is(":checked")||t.addClass("hideValidation")}))},v=function(e){var t;i(t=e.$dom()).call(t,".radioLine.hideValidation").removeClass("hideValidation")},b=function(t,a,n,i){var r,s=t.split(":");if(t=s[s.length-1],_.isNull(t)||_.isUndefined(t))return null;for(s=t.split(".");s.length>1;)n[s[0]]=n[s[0]]||("flags"!=s[0]&&e.isBlank(s[1].match(/^\d+$/))?{}:[]),n=n[s[0]],s.shift();return _.isArray(n)?e.isBlank(s[0].match(/^\d+$/))?a&&(n.push(s[0]),r=s[0]):e.isBlank(i)?n.push(a):n[i]=a:(e.isBlank(n[s[0]])?n[s[0]]=a:_.isArray(a)&&_.isArray(n[s[0]])&&(n[s[0]]=e.extend(!0,_.compact(n[s[0]]),_.compact(a))),r=n[s[0]]),r},y=function(t,a){if(a.hasClass("prompt"))return null;a.hasClass("colorControl")&&(a=a.siblings(":input"));var n=JSON.parse(a.attr("data-origSavedValue")||"null");if(e.isBlank(n)&&(n=a.isInputType("checkbox")?a.is(":checked"):a.value()),a.isInputType("checkbox")){var i=a.attr("data-trueValue"),r=a.attr("data-falseValue");e.isBlank(i)||!0!==n?e.isBlank(r)||!1!==n||(n=r):n=i}else if(a.isInputType("radio"))n=a.attr("data-dataValue");else if(a.hasClass("sliderInput")){var s=parseFloat(a.attr("data-scale"));n=0==s?0:n/s}else if(a.hasClass("select"))"true"==n&&(n=!0),"false"==n&&(n=!1);else if(a.hasClass("customWrapper")){var o=t._customCallbacks[a.attr("data-customId")];e.isBlank(o)||(o=o.value),_.isFunction(o)&&(n=o.call(t,a))}else"input"==a.tagName()&&a.parents().hasClass("fileChooser")?n=a.closest(".fileChooser").data("ajaxupload"):a.hasClass("radioSectionSelector")&&(n=a.attr("value"));return n},w=function(e,t){var a="_selected"===t&&!0===e.selected||(e.value||"").toLowerCase()===(t||"").toLowerCase(),n={tagName:"option",value:e.value,selected:a,contents:e.text,disabled:e.disabled},i=[];return _.each(e.data||{},(function(e,t){n["data-custom-"+t]=e,i.push(t)})),i.length>0&&(n["data-customKeys"]=i.join(",")),n},C=function(t,a,n,r,s){var o=(a=a||{}).useQueryBase?(t._view||{})._queryBase:t._view;if(e.isBlank(o))return[];n=n||"id";var l,d=o.columnsForType((a||{}).type,(a||{}).hidden),u=_.reject(o.visibleColumns,(function(e){return c(_).call(_,d,e)}));e.isBlank(r)&&_.isArray((a||{}).defaultNames)&&(_.some(a.defaultNames,(function(t){return l=i(_).call(_,d,(function(e){return t.toLowerCase()==e.name.toLowerCase()})),!e.isBlank(l)})),e.isBlank(l)||(r=l[n]));var p=[];_.each(d,(function(i){var s,o=i.id,l=i.tableColumnId,c=i.fieldName;s=r==c||r==l||r==o,"chart_create"!==t.settings.name&&(s=s||1==d.length&&!a.noDefault&&e.isBlank(r)),p.push({tagName:"option",value:i[n],selected:s,contents:e.htmlEscape(i.name)})}));var m=[];_.each(u,(function(t){m.push({tagName:"option",value:t[n],contents:e.htmlEscape(t.name),disabled:"disabled"})})),_.isEmpty(m)&&m.push({tagName:"option",contents:e.t("screens.ds.grid_sidebar.base.column_select.none"),disabled:"disabled"}),_.isEmpty(p)&&p.push({tagName:"option",contents:e.t("screens.ds.grid_sidebar.base.column_select.none"),disabled:"disabled"});var f=e.t("screens.ds.grid_sidebar.base.column_select.none_selected");return e.subKeyDefined(s,"item.origName")&&"displayFormat.titleFlyout"==s.item.origName&&(f=e.t("screens.ds.grid_sidebar.base.column_select.auto")),[{tagName:"option",value:"",contents:f},{tagName:"optgroup",contents:p,label:e.t("screens.ds.grid_sidebar.base.column_select.selectable")},{tagName:"optgroup",contents:m,label:e.t("screens.ds.grid_sidebar.base.column_select.nonselectable")}]},x=function(t,a,n){var i,s=t._isReadOnly()||(_.isFunction(a.disabled)?a.disabled.call(t,n.data):a.disabled),o={id:a.name+"_"+(a.uniqueId||_.uniqueId()),name:a.name,title:a.prompt,disabled:s,"data-isDisabled":s,class:r(i=["inputItem",{value:"required",onlyIf:a.required&&!n.inRepeater},{value:"textPrompt",onlyIf:!e.isBlank(a.prompt)&&c(_).call(_,["text","textarea"],a.type)},a.notequalto]).call(i,a.extraClass),"data-origName":a.origName,"data-isRequired":{value:!0,onlyIf:a.required},"data-notequalto":{value:"."+(a.notequalto||"").split(" ").join(", ."),onlyIf:!e.isBlank(a.notequalto)},"data-validateMin":{value:a.validateMin,onlyIf:!e.isBlank(a.validateMin)},"data-validateMax":{value:a.validateMax,onlyIf:!e.isBlank(a.validateMax)},"data-defaultValue":e.htmlEscape(u(a.defaultValue||"")),"data-dataValue":{value:e.htmlEscape(u(a.dataValue||"")),onlyIf:!e.isBlank(a.dataValue)&&(a.dataValue!==a.defaultValue||n.sectionOptions.showIfData)},"data-origSavedValue":e.htmlEscape(u(a.dataValue||""))};if(e.isPlainObject(a.onlyIf)){var l=_.uniqueId();t._fieldOnlyIfs[l]=a.onlyIf,o["data-onlyIf"]=l}if(e.isPlainObject(a.disabled)){var d=_.uniqueId();t._fieldDisabled[d]=a.disabled,o["data-disabled"]=d}if(_.isFunction(a.change)){var p="handler_"+_.uniqueId();t._changeHandlers[p]=a.change,o["data-change"]=p}return _.each(a.data||{},(function(e,t){o["data-custom-"+t]=e})),o},k=function(t,a,n){var i=null;return _.some(_.reject(_.flatten(e.makeArray(a)),(function(e){return _.isNull(e)||_.isUndefined(e)})),(function(a){for(var r=(a||"").split("."),s=t;r.length>0&&!e.isBlank(s);){var o=r.shift();if(e.isBlank(o)||(s=s[o]),_.isArray(s)&&r.length>0)if(e.isBlank(r[0].match(/^\d+$/)))s=c(_).call(_,s,r.shift());else{var l=parseInt(r.shift());e.isBlank(n)||(l=n),s=s[l]}}return 0==r.length&&!e.isBlank(s)&&(i=s,!0)})),i},$=function(t,a,n){for(var i=[],s=e.arrayify(n);s.length>0;){var o=s.shift();if("group"!=o.type){if(o.required){if(o.onlyIf){var l=!1,c=k(a,o.onlyIf.field);if(_.isFunction(o.onlyIf.func)&&(l=l||o.onlyIf.func.call(t,c)),e.isBlank(o.onlyIf.value)||(l=l||o.onlyIf.value!=c),o.onlyIf.negate&&(l=!l),l)continue}if("custom"==o.type&&!e.isBlank(o.editorCallbacks)&&_.isFunction(o.editorCallbacks.required)){var d={};if(_.each(e.arrayify(o.linkedField),(function(e){d[e]=k(a,e)})),1==_.size(d)&&(d=p(_).call(_,d)[0]),!o.editorCallbacks.required.call(t,d))continue}i.push(_.compact(_.flatten([o.name,o.otherNames])))}}else s=r(s).call(s,o.options)}return i},S=function(t,a,n){return _.every($(t,a,n),(function(t){return!e.isBlank(k(a,t))}))},T={checkbox:function(t,a,n,i,r){var s=i;if(e.isBlank(s)&&(s=r),_.last(a).contents=e.extend(x(t,n.item,n.context),{tagName:"input",type:"checkbox","data-trueValue":n.item.trueValue,"data-falseValue":n.item.falseValue,checked:!e.isBlank(n.item.trueValue)&&s===n.item.trueValue||c(_).call(_,[!0,"true",1,"1","yes","checked"],s)}),!0===n.item.inputFirst){var o=a.pop(),l=a.pop();a.push(o),a.push(l)}},color:function(t,a,n,i){var r=e.extend({},n.item,{defaultValue:e.arrayify(n.item.defaultValue||[]),extraClass:"colorInput"}),s=e.sanitizeColor(i)||r.defaultValue[n.context.repeaterIndex]||r.defaultValue[0],o=_.last(a);o.contents=[],o.contents.push({tagName:"a",href:"#Color",title:e.t("screens.ds.grid_sidebar.base.color_select.prompt"),name:n.item.name,class:["colorControl",{value:"advanced",onlyIf:n.item.advanced}],contents:e.t("screens.ds.grid_sidebar.base.color_select.prompt"),style:{"background-color":s}}),!0===n.item.showLabel&&o.contents.push({tagName:"span",class:"colorControlLabel"}),o.contents.push(e.extend(x(t,r,n.context),{tagName:"input",type:"hidden",value:s}))},columnSelect:function(t,a,n,i,r){var s=n.item.useFieldName?"fieldName":n.item.isTableColumn?"tableColumnId":"id",o=_.last(a),l=C(t,n.item.columns,s,i||r,n);o.contents=e.extend(x(t,e.extend({},n.item,{extraClass:"columnSelectControl"}),n.context),{tagName:"select",contents:l,"data-columnIdField":s,"data-columnOptions":e.htmlEscape(u(n.item.columns||""))})},custom:function(t,a,n,i,r){var s=_.uniqueId();_.last(a).contents=e.extend(x(t,e.extend({},n.item,{extraClass:"customWrapper"}),n.context),{tagName:"div","data-customId":s,"data-linkedField":e.arrayify(n.item.linkedField).join(",")}),_.last(a).contents["data-defaultValue"]=e.htmlEscape(u(r||"")),t._customCallbacks[s]=n.item.editorCallbacks},file:function(t,a,n){_.last(a).contents={tagName:"div",class:["uploader","uniform","fileChooser"],"data-fileTypes":e.htmlEscape(u(e.makeArray(n.item.fileTypes))),"data-action":n.item.fileAction,contents:[{tagName:"span",class:"filename",contents:e.extend(x(t,n.item,n.context),{tagName:"input",type:"text",readonly:!0})},{tagName:"span",class:"action",contents:"Choose"}]}},group:function(t,a,n){!0!==n.item.includeLabel&&m(a).call(a,0,a.length);var i=s(_).call(_,n.item.options,(function(a,i){return D(t,{context:e.extend({},n.context,{noTag:!0}),item:a,items:n.item.options,pos:i})}));a.push({tagName:"div",class:["inputBlock",n.item.extraClass],contents:i})},note:function(t,a,n){var i=_.isFunction(n.item.value)?n.item.value.call(t,_.isEmpty(n.context.data)?null:n.context.data):n.item.value;e.isBlank(i)||n.item.isInput?m(a).call(a,0,a.length):_.last(a).contents=e.extend(x(t,n.item,n.context),{tagName:"span",contents:i})},radioGroup:function(t,a,n,i,r){var o,c,d="-templateId";f(o=n.item.name).call(o,d)?n.item.name=[l(c=n.item.name).call(c,0,-d.length),_.uniqueId(),d].join(""):n.item.name+="_"+_.uniqueId();var p,m,h=x(t,n.item,n.context),g=s(_).call(_,n.item.options,(function(a,s){var o,l=h.id+"-"+s;o=n.item.sectionSelector?D(t,{context:e.extend({},n.context,{noTag:!0,inputOnly:!0}),item:e.extend({},a,{type:"static",isInput:!0,extraClass:"radioSectionSelector",name:n.item.origName,items:n.item.options,pos:s})}):D(t,{context:e.extend({},n.context,{noTag:!0,inputOnly:!0}),item:a,items:n.item.options,pos:s});var c,d=_.every(o,(function(t){return _.some(e.makeArray(t.contents),(function(e){return e.disabled}))})),f=e.extend({},h,{id:l,tagName:"input",type:"radio",disabled:d,"data-defaultValue":e.htmlEscape(u(r==a.name))});(i||r)==a.name&&(p=f),(c=function(t){return n.item.sectionSelector?a.value==i:e.isPlainObject(t)?(t["data-dataValue"]||{}).onlyIf||c(t.contents):!!_.isArray(t)&&_.some(t,(function(e){return c(e)}))})(o)&&(m=f);var g={tagName:"label",for:l,contents:o};return{tagName:"div",class:["radioLine",a.type,a.lineClass||""],contents:[f,g]}}));e.isBlank(m)?e.isBlank(p)||(p.checked=!0):m.checked=!0,a.push({tagName:"div",class:"radioBlock"+(void 0===n.item.extraClass?"":" "+n.item.extraClass),contents:g})},radioSelect:function(t,a,i,r,o){var l=r;e.isBlank(l)&&(l=o);var c=x(t,i.item,i.context),d=s(_).call(_,i.item.options,(function(t){var a,i;"object"==n(t)?(a=t.value,i=t.label):a=i=t;var r=c.id+"-"+a;return{tagName:"div",class:"radioLine",contents:[e.extend({},c,{tagName:"input",type:"radio",id:r,"data-dataValue":a,checked:t===l}),{tagName:"label",for:r,contents:i}]}}));_.last(a).contents={tagName:"div",class:"radioSelectBlock",contents:d}},repeater:function(t,a,n,i){var r=t._isReadOnly();e.isBlank(n.item.text)&&m(a).call(a,0,a.length);var s={tagName:"a",href:"#remove",title:e.t("screens.ds.grid_sidebar.base.buttons.remove"),class:"removeLink delete",contents:{tagName:"span",class:"icon"}},l=0;if(e.isBlank(n.item.field.name)){var c=$(t,n.context.data,n.item.field);c.length>0&&_.each(_.first(c),(function(t){var a=t.match(/^(.+)\.\d+(\..+)?$/);if(!e.isBlank(a)){var i=k(n.context.data,a[1]);_.isArray(i)&&(l=i.length)}}))}i=o(_).call(_,i||[],(function(e){return S(t,e,n.item.field)}));var d=e.makeArray(n.item.defaultValue),p=i.length||l||d.length;!r&&p<1&&(p=_.isNumber(n.item.initialRepeatCount)?n.item.initialRepeatCount:1);for(var f=0;f<p;f++){var h=i[f]||(e.isBlank(n.item.field.name)?null:n.context.data),g=S(t,h,n.item.field),v=D(t,{item:e.extend({},n.item.field,{defaultValue:d[f]}),context:e.extend({},n.context,{repeaterIndex:f,noTag:!0,inRepeater:f>=n.item.minimum,inRepeaterContext:!e.isBlank(n.item.field.name),data:g?h:null})});if(!e.isBlank(n.item.savedField)){var b=k(h,n.item.savedField);if(!e.isBlank(b)){var y={};y[n.item.savedField]=b,v["data-savedData"]=e.htmlEscape(u(y))}}f>=n.item.minimum&&!r&&v.contents.unshift(s),a.push(v)}if(!r){var w=D(t,{item:e.extend({},n.item.field,{lineClass:"repeaterAdded"}),context:e.extend({},n.context,{repeaterIndex:"templateId",noTag:!0,inRepeater:!0,data:null})});w.contents.unshift(s),w=e.htmlEscape(e.tag(w,!0)),a.push(e.button({text:n.item.addText||"Add Value",customAttrs:e.extend(x(t,n.item,n.context),{"data-template":w,"data-count":f,"data-dataValue":null,"data-minimum":n.item.minimum,"data-maximum":n.item.maximum,title:n.item.addText||"Add Value"}),className:"addValue",iconClass:"add"},!0))}},select:function(t,a,n,i,r){var s={},o=[];_.isNull(n.item.prompt)||o.push({tagName:"option",value:"",class:"prompt",contents:n.item.prompt||e.t("screens.ds.grid_sidebar.base.generic_select.prompt")}),_.isBoolean(i)&&(i=i.toString());var l={tagName:"select",contents:o};if(_.isArray(n.item.options)){var c=!1;if(_.each(n.item.options,(function(e){var t=w(e,i||r);e.group?(s[e.group]=s[e.group]||{tagName:"optgroup",label:e.group,contents:[]},s[e.group].contents.push(t)):o.push(t),n.item.onlySelectFirst&&c&&t.selected?t.selected=!1:t.selected&&(c=!0)})),!_.isEmpty(s))for(var d in s)l.contents.push(s[d])}else if(_.isFunction(n.item.options)){var u=_.uniqueId();t._selectOptions[u]=n.item.options,l["data-selectOption"]=u}e.isBlank(n.item.linkedField)||(l["data-linkedField"]=e.arrayify(n.item.linkedField).join(","));var p=x(t,e.extend({},n.item,{dataValue:i}),n.context);_.last(a).contents=e.extend(p,l)},slider:function(t,a,n,i,r){var s=n.item.minimum||0,o=n.item.maximum||100,l=1;_.isString(i)&&(i=parseFloat(i)),_.isNaN(i)&&(i=null),o<=1&&(s*=l=100,o*=l,r*=l,e.isBlank(i)||(i*=l)),_.isNumber(i)||_.isNumber(r)||(r=s);var c=_.last(a);c.contents=[],c.contents.push(e.extend(x(t,e.extend({},n.item,{defaultValue:r,dataValue:i,extraClass:"sliderInput"}),n.context),{tagName:"input",type:"text",value:_.isNumber(i)?i:r,"data-scale":l,readonly:!0})),c.contents.push({tagName:"span",class:"sliderControl","data-min":s,"data-max":o})},static:function(t,a,n){var i=_.isFunction(n.item.value)?n.item.value.call(t,_.isEmpty(n.context.data)?null:n.context.data):n.item.value,r=_.last(a);if(e.isBlank(i))m(a).call(a,0,a.length);else if(n.item.isInput){var s=(n.item.extraClass||"").search("radioSectionSelector")>=0?n.item.text:i;r.contents=[],r.contents.push({tagName:"span",contents:s}),r.contents.push(e.extend(x(t,n.item,n.context),{tagName:"input",type:"hidden",value:i}))}else r.contents=e.extend(x(t,n.item,n.context),{tagName:"span",contents:i})},text:function(t,a,n,i,r){var s=_.last(a);s.class.push("textWrapper");var o=x(t,n.item,n.context);t._isReadOnly()&&(delete o.disabled,o.readonly="readonly"),(o.disabled||o.readonly)&&delete o.title,null!=n.item.minimum&&(o["data-min"]=n.item.minimum),null!=n.item.maximum&&(o["data-max"]=n.item.maximum),s.contents=e.extend(o,{tagName:"input",type:"text",value:e.htmlEscape(i||r)})},textarea:function(t,a,n,i,r){var s=_.last(a);s.class.push("textWrapper");var o=x(t,n.item,n.context);t._isReadOnly()&&(delete o.disabled,o.readonly="readonly"),(o.disabled||o.readonly)&&delete o.title,s.contents=e.extend(o,{tagName:"textarea",contents:e.htmlEscape(i||r)})}},D=function(t,a){if(!1===a.item.onlyIf)return null;a.item=e.extend({},a.item,{origName:a.item.name,name:a.context.paneId+(e.isBlank(a.context.sectionName)?"":"_"+a.context.sectionName)+":"+(a.item.name||"")+(e.isBlank(a.context.repeaterIndex)?"":"-"+a.context.repeaterIndex)});var n=[];if(!a.context.inputOnly){a.item.uniqueId=_.uniqueId();var i=a.item.required&&!a.context.inRepeater;n.push({tagName:"label",for:a.item.name+"_"+a.item.uniqueId,title:a.item.text,class:[{value:"required",onlyIf:i},{value:"requiredBlank",onlyIf:i&&e.isBlank(a.item.text)}],contents:a.item.text})}var r,o=a.item.defaultValue;a.context.inRepeater&&!_.isUndefined(a.item.repeaterValue)&&(o=a.item.repeaterValue);var l=_.reject(_.flatten([a.item.origName,a.item.otherNames]),(function(e){return _.isNull(e)||_.isUndefined(e)}));l.length>0&&(r=k(a.context.data,l,a.context.inRepeaterContext?a.context.repeaterIndex:null),e.isBlank(r)||(a.item=e.extend({},a.item,{dataValue:r})));var c={tagName:"span",class:["inputWrapper"]};if(n.push(c),T[a.item.type](t,n,a,r,o),_.isUndefined(c.contents)&&(n=_.without(n,c)),n.length<1)return null;if(a.context.inputOnly)return a.context.noTag?n:s(_).call(_,n,(function(t){return e.tag(t,!0)})).join("");var d={tagName:"div",class:["line","clearfix",a.item.type,a.item.lineClass,{value:"inputFirst",onlyIf:a.item.inputFirst}],contents:n};return a.context.noTag?d:e.tag(d,!0)},F=function(t,a){i(a).call(a,"[data-linkedField]").each((function(){var t=e(this),a=t.data("linkedGroup");e.isBlank(a)||a.off(".linkedField-"+t.attr("data-linkedField"))})),i(a).call(a,".customWrapper").each((function(){var a=e(this),n=t._customCallbacks[a.attr("data-customId")];e.isBlank(n)||(n=n.cleanup),_.isFunction(n)&&n.call(t,a)})),i(a).call(a,"select.columnSelectControl").each((function(){t._columnSelects=_.without(t._columnSelects,this)}))},N=function(t,a){var n=t._customSections[a.attr("data-customContent")];e.isBlank(n)||(n=n.cleanupCallback),_.isFunction(n)&&n.call(t,i(a).call(a,".sectionContent"))},I=function(a,n){_.each(n||a._columnSelects,(function(n){var r=e(n),s=C(a,JSON.parse(r.attr("data-columnOptions")||'""'),r.attr("data-columnIdField"),r.val());i(r).call(r,"option").remove(),i(r).call(r,"optGroup").remove(),_.each(s,(function(t){r.append(e.tag(t))})),t(r)}))},B=function(a,n){var s=n.attr("data-customId"),l=a._customCallbacks[s];e.isBlank(l)||(l=l.create);var c=a._fieldOnlyIfs[n.attr("data-onlyIf")],d=a._fieldDisabled[n.attr("data-disabled")],u=a._selectOptions[n.attr("data-selectOption")];if(_.isFunction(u)||_.isFunction(l)||e.isPlainObject(c)||e.isPlainObject(d)){var m=e(),f=e.makeArray((c||{}).field||null);f=r(f).call(f,e.makeArray((d||{}).field||null)),e.isBlank(n.attr("data-linkedField"))||(f=r(f).call(f,n.attr("data-linkedField").split(","))),_.each(f,(function(e){var t,a='[data-origname="'+e+'"]:first',r=n.closest(".line.group, .formSection"),s=i(r).call(r,a).not(n);s.length<1&&(s=i(t=n.closest("form")).call(t,a));m=m.add(s).not(n)})),n.data("linkedGroup",m);var h=m.closest(".repeater"),g=function(){n.trigger("resetToDefault")};m.hasClass("addValue")?h.on("change",".inputItem",g).on("click",".removeLink",(function(){_.defer(g)})):m.on("change.linkedField-"+s,g).on("blur.linkedField-"+s,g),n.on("resetToDefault",(function(){!function(r,s){e.isBlank(r)&&(r=JSON.parse(n.attr("data-defaultValue")||'""'));var f={};m.each((function(){var t=e(this),n=o(t).call(t,":checkbox").length>0;if(t.hasClass("addValue")){var r=i(h).call(h,".line:not(.hide) .inputItem"),s=[];_.each(r,(function(t){s.push(y(a,e(t)))})),f[t.attr("data-origName")]=s}else f[t.attr("data-origName")]=n?o(t).call(t,":checked").length>0:e(this).val()})),1==_.size(f)&&(f=!1!==(f=p(_).call(_,f)[0])&&(f||""));var g=n.data("linkedFieldValues");if(s||!_.isEqual(g,f)){n.data("linkedFieldValues",f);var v=n.closest(".line");if(e.isPlainObject(c)){var b=!0;_.isFunction(c.func)&&(b=b&&c.func.call(a,f)),e.isBlank(c.value)||(b=b&&c.value==(f[c.field]||f)),c.negate&&(b=!b),v[!1!==b?"show":"hide"]()}if(e.isPlainObject(d)){var C=!0;_.isFunction(d.func)&&(C=C&&d.func.call(a,f)),e.isBlank(d.value)||(C=C&&d.value==(f[d.field]||f)),i(v).call(v,"input").attr("disabled",C)}if(_.isFunction(u)){var x=u.call(a,f,a._curData,n,r);i(n).call(n,"option").remove(),n.attr("disabled",e.isBlank(x)||"disabled"==x||!!n.attr("data-isDisabled")),n.closest(".line").toggleClass("hide","hidden"==x),_.isArray(x)||(x=null),_.each(x||[],(function(t){n.append(e.tag(w(t,r)))})),n.trigger("change")}else _.isFunction(l)&&(F(a,v),n.empty(),v[!1!==l.call(a,n,f,r)?"show":"hide"]());_.defer((function(){t(n)}))}}(JSON.parse(n.attr("data-dataValue")||'""'),!0)})).trigger("resetToDefault")}},A=function(t,a,n){var r=function(e){n.call(t,a,e)},s=function(e){_.defer((function(){r(e)}))};if(a.hasClass("customWrapper")&&(i(a).call(a,"input,select").each((function(){var t=e(this);t.on("change",r),e.browser.msie&&_.include(["checkbox","radio"],t.attr("type"))&&a.on("click",r)})),a.on("color_change",".columnColorControl",s),a.on("change",r)),a.hasClass("sliderInput"))a.siblings(".sliderControl").on("slide",s);else if(a.hasClass("colorInput"))a.siblings(".colorControl").on("color_change",s);else if(a.is("input[type=text],textarea,select,input[type=file]"))a.on("change",r);else if(a.is("input[type=checkbox],input[type=radio]")&&(a.on("change",r),e.browser.msie)){var o;if(a.hasClass("option-icons"))i(o=a.parents(".radioLine:first")).call(o,"label").on("click",(function(){a.trigger("click")}));a.on("click",r)}},P=function(a,n){i(n).call(n,".textPrompt").example((function(){return e(this).attr("title")})),i(n).call(n,"select.columnSelectControl").each((function(){a._columnSelects.push(this)})),i(n).call(n,"[data-change]").each((function(){A(a,e(this),a._changeHandlers[e(this).attr("data-change")])})),i(n).call(n,".inputItem").each((function(){A(a,e(this),(function(e){e.attr("data-origSavedValue",null)}))})),_.isFunction(a._changeHandler)&&i(n).call(n,".inputItem").each((function(){A(a,e(this),a._changeHandler)})),i(n).call(n,".sliderControl").each((function(){var t=e(this);t.slider({disabled:t.siblings("input")[0].disabled,min:parseInt(t.attr("data-min")),max:parseInt(t.attr("data-max")),value:parseInt(t.siblings(":input").val())})})).on("slide",(function(t,a){e(this).siblings(":input").val(a.value)})),i(n).call(n,".colorControl").each((function(){var t=e(this);if(t.siblings("input")[0].disabled)t.on("click",(function(e){e.preventDefault()}));else if(t.hasClass("advanced")){var a=t.siblings(":input").val()||"#ffffff";h(a).call(a,"#")||(a="#"+a),t.ColorPicker({color:a,onChange:function(e,a){t.css("background-color","#"+a).siblings(".colorControlLabel").text("#"+a).siblings(":input").val("#"+a)},onHide:function(){t.trigger("color_change")}}),t.css("background-color",a).siblings(".colorControlLabel").text(a)}else t.on("color_change",(function(t,a){e(this).css("background-color",a).siblings(":input").val(a).siblings(".colorControlLabel").text(a)})).on("mousedown",(function(){var t=e(this);t.data("colorpicker-color",t.siblings(":input").val())})).one("mousedown",(function(){t.colorPicker()}))})),i(n).call(n,".fileChooser").each((function(){var t=e(this),a=i(t).call(t,".filename input"),n=JSON.parse(t.attr("data-fileTypes")||"[]"),r=s(_).call(_,n,(function(e){return e.toLowerCase()}));t.data("ajaxupload",new AjaxUpload(t,{action:t.attr("data-fileAction"),autoSubmit:!1,name:a.attr("id")+"_ajaxupload",responseType:"json",onChange:function(t,i){a.val(t),r.length>0&&(e.isBlank(i)||!c(_).call(_,r,i.toLowerCase()))?a.attr("data-requiredTypes",e.arrayToSentence(n,"or",",",!0)):a.attr("data-requiredTypes",""),_.defer((function(){a.trigger("change")}))}}))})),i(n).call(n,".line.repeater").each((function(){L(a,e(this))})),n.on("click",".removeLink",(function(t){t.preventDefault();var n=e(this),r=n.closest(".line.repeater"),s=n.closest(".line");s.is(".repeaterAdded")?(F(a,s),s.remove()):s.addClass("hide");var o=i(r).call(r,".addValue"),l=o.data("count");o.attr("data-count",l-1),L(a,r)})),i(n).call(n,"[data-linkedField], [data-onlyIf], [data-disabled]").each((function(){B(a,e(this))})),i(n).call(n,"[data-selectOption]:not([data-linkedField])").each((function(){var n=e(this),r=a._selectOptions[n.attr("data-selectOption")];if(_.isFunction(r)){var s=JSON.parse(n.attr("data-dataValue")||n.attr("data-defaultValue")||'""'),o=r.call(a,a._curData);i(n).call(n,"option").remove(),n.attr("disabled",e.isBlank(o)||"disabled"==o||!!n.attr("data-isDisabled")),n.closest(".line").toggleClass("hide","hidden"==o),_.isArray(o)||(o=null),_.each(o||[],(function(t){n.append(e.tag(w(t,s)))})),n.trigger("change"),t(n)}})),n.on("change blur","input, select, textarea",(function(){_.defer((function(){a.validatePane()}))}));n.on("click","label input, label select, label textarea, label a",(function(e){e.preventDefault()})).on("mouseup change focus","label input, label select, label textarea, label a",(function(){var t,n=e(this).parents("label").attr("for");e.isBlank(n)||i(t=a.$dom()).call(t,"#"+e.safeId(n)).trigger("click")})),e.isBlank(e.uniform)||_.defer((function(){i(n).call(n,"select:not(.noUniform)").uniform(),i(n).call(n,":checkbox:not(.noUniform)").uniform(),i(n).call(n,":radio:not(.noUniform)").uniform(),i(n).call(n,":file:not(.noUniform)").uniform()}))},E=function(t,a,n,r,s){var l=o(r).call(r,'[data-onlyIf="'+n+'"]'),c=function(){_.defer((function(){var n,r=!1,s=!1,o=!1,c="",d="";l.removeClass("error"),_.each(a,(function(a){var i=!1;e.isBlank(a.$field)?_.isFunction(a.func)&&(i=!a.func.call(t,t._curData)):(i=a.inRadioGroup?!a.$field.is(":checked"):a.$field.val()!=a.value,e.isBlank(n)&&(n=a.$field)),a.negate&&(i=!i),!1!==a.warn&&(a.disable?(s=s||i,i&&!e.isBlank(a.disabledMessage)&&(c+=_.isFunction(a.disabledMessage)?a.disabledMessage.call(t):a.disabledMessage)):a.warn&&i?(o=o||i,e.isBlank(a.warningMessage)||(d+=_.isFunction(a.warningMessage)?a.warningMessage.call(t):a.warningMessage)):r=r||i)})),e.isBlank(n)||n.toggleClass("sectionDisabled sectionDisabled-"+l.attr("name"),!l.hasClass("selectable")&&!r&&s),l.toggleClass("hide",r),l.toggleClass("disabled",s),l.toggleClass("warned",o),s?i(l).call(l,".sectionDisabledMessage").html(c):o&&i(l).call(l,".sectionWarningMessage").html(d)}))};_.each(a,(function(a){var n=!e.isBlank(a.field),r=_.isFunction(a.func);if(!n&&!r)throw new Error("Only field-value or func objects supported for section onlyIfs");if(n){if(a.$field=o(s).call(s,'[name="'+t.$dom().attr("id")+":"+a.field+'"]'),a.$field.length>1){var l,d;if(a.$field.each((function(){this.value==a.value&&(d=e(this))})),!a.$field.hasClass("radioSectionSelector"))return;var u=i(l=d.closest(".radioLine")).call(l,'input[type="radio"]');if(!u)return;a.$field=u,a.inRadioGroup=!0}a.$field.on("change",c).on("keypress",c).on("click",c).attr("data-onlyIfInput",!0),a.inRadioGroup&&a.$field.closest(".radioGroup").on("click",c)}else r&&!e.isBlank(t._view)&&t._view.bind("columns_changed",c,t)})),c()},L=function(t,a){var n=a.children(".line:not(.hide)").length,i=a.children(".button.addValue"),r=parseInt(i.attr("data-minimum"));n<(_.isNumber(r)?r:1)&&_.defer((function(){O(t,i)}));var s=i.attr("data-maximum");e.isBlank(s)||i.toggleClass("hide",n>=parseInt(s))},O=function(t,a){var n=a.closest(".line.repeater"),r=e(a.attr("data-template"));i(r).call(r,".required").removeClass("required");var s=parseInt(a.attr("data-count"));a.attr("data-count",s+1);var o="-templateId";i(r).call(r,'[name$="-templateId"], [id$="-templateId"], [for$="-templateId"]').each((function(){var t=e(this);_.each(["name","id","for"],(function(a){var n=t.attr(a);!e.isBlank(n)&&f(n).call(n,o)&&t.attr(a,l(n).call(n,0,-o.length)+"-"+s)}))})),i(r).call(r,".colorControl").each((function(){var t=e(this),a=t.siblings(":input"),n=JSON.parse(a.attr("data-defaultValue")||'""');if(!(n.length<2)){var i=n[s%n.length];t.css("background-color",i),a.val(i)}})),P(t,r),a.before(r),L(t,n)}}(jQuery)},99774:function(e,t,a){var n=a(21456),i=a(95599),r=a(17933),s=a(49138),o=a(65075),l=a(4081);a(89041),a(2980),a(29954),function(e){var t,a=blist.namespace.fetch("blist.configs.chart"),c=(blist.configuration.newChartsEnabled||"nextgen"==e.urlParam(window.location.href,"charts"))&&"old"!=e.urlParam(window.location.href,"charts");t=c?blist.defaultColors:["#042656","#19538b","#6a9feb","#bed6f7","#495969","#bbc3c9"];var d=["column","stackedcolumn","bar","stackedbar","pie","donut","line","area","timeline","bubble","treemap"],u={text:e.t("screens.ds.grid_sidebar.chart.legend.position"),type:"select",prompt:e.t("screens.ds.grid_sidebar.chart.legend.position_prompt"),defaultValue:"bottom",name:"displayFormat.legend",options:[{text:e.t("screens.ds.grid_sidebar.chart.legend.positions.bottom"),value:"bottom"},{text:e.t("screens.ds.grid_sidebar.chart.legend.positions.top"),value:"top"},{text:e.t("screens.ds.grid_sidebar.chart.legend.positions.right"),value:"right"},{text:e.t("screens.ds.grid_sidebar.chart.legend.positions.left"),value:"left"},{text:e.t("screens.ds.grid_sidebar.chart.legend.positions.none"),value:"none"}]};if(c){var p=u;u={onlyIf:!1}}var m={type:"color",name:"color",defaultValue:t,lineClass:"colorCollapse"},f={text:e.t("screens.ds.grid_sidebar.chart.show_lines"),name:"displayFormat.lineSize",type:"checkbox",trueValue:"2",falseValue:"0",defaultValue:"2"},h={text:e.t("screens.ds.grid_sidebar.chart.show_points"),name:"displayFormat.pointSize",type:"checkbox",trueValue:"3",falseValue:"0",defaultValue:"3"},g={text:e.t("screens.ds.grid_sidebar.chart.min_angle_html"),name:"displayFormat.pieJoinAngle",type:"slider",minimum:0,maximum:15,defaultValue:1,lineClass:"hasIcon minAngle"},v={text:e.t("screens.ds.grid_sidebar.chart.smooth_line"),name:"displayFormat.smoothLine",type:"checkbox",defaultValue:!1},b=function(){return{onlyIf:{func:function(){return!1}}}};c&&(b=function(t,a){var i=n(_).call(_,["line","area","stackedbar","stackedcolumn","bar","column"],t.value),r=n(_).call(_,["line","area","stackedbar","stackedcolumn","bar","column"],t.value),s=n(_).call(_,["pie","donut"],t.value),o=!_.isUndefined(a.view.metadata.conditionalFormatting),l=!n(_).call(_,["timeline"],t.value),c=[e.extend({},p,{text:e.t("screens.ds.grid_sidebar.chart.legend.display")})];return s&&c.push({text:e.t("screens.ds.grid_sidebar.chart.legend.values"),type:"checkbox",inputFirst:!0,name:"displayFormat.legendDetails.showValues",defaultValue:!0,lineClass:"advLegendCheck"}),i&&c.push({text:e.t("screens.ds.grid_sidebar.chart.legend.series"),type:"checkbox",inputFirst:!0,name:"displayFormat.legendDetails.showSeries",defaultValue:!0,lineClass:"advLegendCheck"}),o&&c.push({text:e.t("screens.ds.grid_sidebar.chart.legend.conditional_formats"),type:"checkbox",inputFirst:!0,name:"displayFormat.legendDetails.showConditional",defaultValue:!1,lineClass:"advLegendCheck"}),r&&c.push({text:e.t("screens.ds.grid_sidebar.chart.legend.annotations"),type:"checkbox",inputFirst:!0,name:"displayFormat.legendDetails.showValueMarkers",defaultValue:!0,lineClass:"advLegendCheck"}),l&&c.push({type:"repeater",minimum:0,initialRepeatCount:0,addText:e.t("screens.ds.grid_sidebar.chart.legend.add_text_button"),name:"displayFormat.legendDetails.customEntries",prompt:e.t("screens.ds.grid_sidebar.chart.axes.x_axis_title_prompt"),field:{type:"group",options:[{type:"color",name:"color",defaultValue:"#fff",lineClass:"hide"},{text:e.t("screens.ds.grid_sidebar.chart.legend.add_text"),type:"text",name:"label",required:!0}]}}),A(t,a,e.t("screens.ds.grid_sidebar.chart.legend.title_short"),c)});var y=function(t){return{text:e.t("screens.ds.grid_sidebar.chart.point_size"),name:"displayFormat.pointSize",type:"columnSelect",useFieldName:!0,lineClass:"hasIcon pointSize",columns:{type:["number","money","percent"],hidden:t.isEdit}}},w=function(t){return{text:e.t("screens.ds.grid_sidebar.chart.point_color"),name:"displayFormat.pointColor",type:"columnSelect",useFieldName:!0,lineClass:"hasIcon pointColor",columns:{type:["number","money","percent"],hidden:t.isEdit}}},C={text:e.t("screens.ds.grid_sidebar.chart.base_color"),name:"displayFormat.color",type:"color",defaultValue:"#042656"},x={text:e.t("screens.ds.grid_sidebar.chart.data_labels"),name:"displayFormat.dataLabels",type:"checkbox"},k={type:"note",value:e.t("screens.ds.grid_sidebar.chart.treemap_color_html")},$=function(t,a){return A(t,a,e.t("screens.ds.grid_sidebar.chart.marker.title"),[{type:"repeater",name:"displayFormat.valueMarker",addText:e.t("screens.ds.grid_sidebar.chart.marker.add_button"),minimum:0,initialRepeatCount:0,lineClass:"hasIcon valueMarker",field:{type:"group",options:[{type:"group",options:[{type:"color",name:"color",lineClass:"colorCollapse",defaultValue:"#000000"},{text:e.t("screens.ds.grid_sidebar.chart.marker.value"),type:"text",name:"atValue"}]},{text:e.t("screens.ds.grid_sidebar.chart.marker.caption"),type:"text",name:"caption"}]}}])},S={type:"checkbox",name:"displayFormat.showPercentages",text:e.t("screens.ds.grid_sidebar.chart.show_percent"),inputFirst:!0,lineClass:"indentedFormSection"},T={type:"checkbox",name:"displayFormat.showActualValues",text:e.t("screens.ds.grid_sidebar.chart.show_values"),inputFirst:!0,lineClass:"indentedFormSection"},D={text:e.t("screens.ds.grid_sidebar.chart.labelInBar"),type:"checkbox",name:"displayFormat.xAxis.labelInBar",lineClass:"hasIcon labelInBar",inputFirst:!0},F={text:e.t("screens.ds.grid_sidebar.chart.valueInBar"),type:"checkbox",name:"displayFormat.xAxis.valueInBar",lineClass:"hasIcon valueInBar",inputFirst:!0};c||(D={onlyIf:!1},F={onlyIf:!1});var N=function(t){for(var a,n=t.text.toLowerCase(),r=[],s=i(a=t.requiredColumns).call(a);s.length>0;){var o=s.shift(),l=s.length;s=_.without(s,o),r.push({count:l-s.length+1,types:o})}var c=[];return _.each(r,(function(t){var a,i=t.count;t==r[0]?(a="",c.push({tagName:"span",class:"title",contents:e.t("screens.ds.grid_sidebar.chart.validation.chart_requires",{chart_type:n.capitalize()})+e.t("screens.ds.grid_sidebar.chart.validation.chart_requires2",{and:a,count:i})})):(a="and",c.push({tagName:"span",class:"title",contents:e.t("screens.ds.grid_sidebar.chart.validation.chart_requires2",{and:a,count:i})})),_.each(t.types,(function(t){var a;c.push({tagName:"div",class:blist.datatypes[t].name+" flyoutIcon",contents:[{tagName:"span",class:"blist-th-icon"},{tagName:"span",contents:e.t("screens.ds.grid_sidebar.base.datatypes."+(a=blist.datatypes[t].title,"Date & Time (with timezone)"===a?"date_time_timezone":a.replace(/\(.*\)/,"").replace(" & ","_").replace(" ","_").toLowerCase()).toLowerCase()).capitalize()}]})}))})),e.tag(c,!0)},I=function(t,a){return!e.isBlank(a.view)&&Dataset.chart.hasRequiredColumns(a.view.realColumns,t.requiredColumns,a.isEdit)},B=function(e,t,a){return{title:a,customClasses:"sectionHeading"}},A=function(e,t,a,n,i){return{title:a,type:"selectable",customClasses:"sectionSubheading",fields:n,validateCollapsed:!0,initShow:i||!1}},P=function(t,a,n,i,r){return A(t,a,e.t("screens.ds.grid_sidebar.chart.data_selection.chart_definition.title"),[{text:r,name:"displayFormat.fixedColumns.0",lineClass:"hasIcon "+t.value+"LabelSelection",type:"columnSelect",required:!0,useFieldName:!0,notequalto:"valueCol",columns:{type:n,hidden:a.isEdit}},{type:"repeater",minimum:1,addText:e.t("screens.ds.grid_sidebar.chart.data_columns.new_data_column_button"),name:"displayFormat.valueColumns",lineClass:"hasIcon "+t.value+"ValueSelection",field:{required:!0,type:"columnSelect",text:e.t("screens.ds.grid_sidebar.chart.data_selection.chart_definition.value_title"),notequalto:"valueCol",useFieldName:!0,name:"fieldName",otherNames:"tableColumnId",columns:{type:i,hidden:a.isEdit}}}],!0)},E=function(t,a,n){var i,s=c&&_.some(a.view.realColumns,(function(t){return e.deepGet(t,"cachedContents","non_null")>1e4})),o=A(t,a,e.t("screens.ds.grid_sidebar.chart.data_selection.advanced_data_selection.title"),[{type:"group",extraClass:"subsection dsg",options:[{type:"note",value:e.t("screens.ds.grid_sidebar.chart.series_group.title")},{type:"note",value:e.t("screens.ds.grid_sidebar.chart.series_group.row_limit_warning"),onlyIf:s,lineClass:"flash notice"},{type:"repeater",minimum:1,addText:e.t("screens.ds.grid_sidebar.chart.series_group.new_column_button"),lineClass:"dataSeriesGrouping",name:"displayFormat.seriesColumns",field:{text:e.t("screens.ds.grid_sidebar.chart.series_group.group_by"),type:"columnSelect",notequalto:"valueCol",useFieldName:!0,name:"fieldName",otherNames:"tableColumnId",columns:{type:n,hidden:a.isEdit}}},{type:"checkbox",text:e.t("screens.ds.grid_sidebar.chart.series_group.alphabetize"),name:"displayFormat.sortSeries",inputFirst:!0,lineClass:"indentedFormSection"},{type:"checkbox",text:e.t("screens.ds.grid_sidebar.chart.series_group.hideLoadingMsg"),name:"displayFormat.hideDsgMsg",inputFirst:!0,lineClass:"indentedFormSection"}]}]);"line"!=t.value&&"area"!=t.value&&"timeline"!=t.value&&(o.fields=r(i=o.fields).call(i,[{type:"group",extraClass:"subsection errorBars",options:[{type:"note",value:e.t("screens.ds.grid_sidebar.chart.error_bars.title")},{text:e.t("screens.ds.grid_sidebar.chart.error_bars.color"),name:"displayFormat.errorBarColor",type:"color",defaultValue:"#ff0000",lineClass:"hasIcon errorBar"},{text:e.t("screens.ds.grid_sidebar.chart.error_bars.data_low"),name:"displayFormat.plot.errorBarLow",type:"columnSelect",useFieldName:!0,notequalto:"errorBar",columns:{type:Dataset.chart.numericTypes,hidden:a.isEdit}},{text:e.t("screens.ds.grid_sidebar.chart.error_bars.data_high"),name:"displayFormat.plot.errorBarHigh",type:"columnSelect",useFieldName:!0,notequalto:"errorBar",columns:{type:Dataset.chart.numericTypes,hidden:a.isEdit}}]}]));return o},L=function(a,i){var r=A(a,i,e.t("screens.ds.grid_sidebar.chart.colors"),[]);return"bubble"==a.value?r.fields.push(C):r.fields.push({type:"repeater",text:e.t("screens.ds.grid_sidebar.chart.colors"),field:e.extend({},m,{name:""}),name:"displayFormat.colors",minimum:1,initialRepeatCount:5,lineClass:"colorArray"}),n(_).call(_,["bubble","donut","treemap","pie"],a.value)||(r.fields[0].onlyIf={field:"displayFormat.seriesColumns",func:function(e){return _.compact(e).length>0}},r.fields.push({text:e.t("screens.ds.grid_sidebar.chart.color_options.column_colors"),type:"custom",linkedField:["displayFormat.valueColumns"],name:"displayFormat.valueColumns",lineClass:"colors",editorCallbacks:{create:function(a,n){var r={};n=_.reject(n,(function(e){return!(!r[e]&&null!=e)||(r[e]=!0,!1)}));var o={tagName:"div",contents:[]};return _.each(n,(function(a,n){var r=e.deepGetStringField(i,"view.displayFormat.valueColumns."+n+".color");r=(r=e.sanitizeColor(r))||t[n]||function(a){var n=24*Math.floor(a/t.length);return e.rotateHex(t[a%t.length],n)}(n);var s=i.view.columnForIdentifier(a),l=s?e.htmlEscape(s.name):"",c={tagName:"div",class:"colorGroup",contents:[]};c.contents.push({tagName:"div",class:"columnColorControl","data-colorpicker-color":r},{tagName:"div",contents:l}),o.contents.push(c)})),a.append(e.tag(o)),s(a).call(a,".columnColorControl").each((function(t,a){var n=e(a);n.css("background-color",n.attr("data-colorpicker-color")),n.on("color_change",(function(t,a){var n=e(this);n.css("background-color",a),n.attr("data-colorpicker-color",a)})).one("mousedown",(function(){n.colorPicker()}))})),!0},value:function(t){return r=[],s(t).call(t,".columnColorControl").each((function(t,a){r.push({color:e(a).data("colorpicker-color")})})),r}}})),r.fields.push({type:"note",value:e.t("screens.ds.grid_sidebar.chart.cdlfmtg_color_override_html"),lineClass:"conditionalFormattingWarning notice flash"}),r},O=function(t,a,n){return A(t,a,e.t("screens.ds.grid_sidebar.chart.labels_and_values"),n)},j=function(t,a){return A(t,a,e.t("screens.ds.grid_sidebar.chart.flyout.title"),[{text:e.t("screens.ds.grid_sidebar.chart.flyout.title_column"),name:"displayFormat.titleFlyout",otherNames:"tableColumnId",onlyIf:{field:"displayFormat.pointSize",value:"0",negate:!0},type:"columnSelect",useFieldName:!0,columns:{hidden:a.isEdit}},{type:"repeater",name:"displayFormat.descriptionColumns",lineClass:"hasIcon flyout",onlyIf:{field:"displayFormat.pointSize",value:"0",negate:!0},field:{type:"group",options:[{text:e.t("screens.ds.grid_sidebar.chart.flyout.value"),name:"fieldName",otherNames:"tableColumnId",type:"columnSelect",useFieldName:!0,columns:{hidden:a.isEdit}}]},minimum:1,addText:e.t("screens.ds.grid_sidebar.chart.flyout.new_values_button")}])},q=function(t,a){var n,i=A(t,a,e.t("screens.ds.grid_sidebar.chart.axes.title"),[{text:e.t("screens.ds.grid_sidebar.chart.axes.x_axis_title"),name:"displayFormat.titleX",type:"text",prompt:e.t("screens.ds.grid_sidebar.chart.axes.x_axis_title_prompt")},{text:e.t("screens.ds.grid_sidebar.chart.axes.y_axis_title"),name:"displayFormat.titleY",type:"text",prompt:e.t("screens.ds.grid_sidebar.chart.axes.y_axis_title_prompt")},{text:e.t("screens.ds.grid_sidebar.chart.y_axis_formatting.axis_min"),type:"radioGroup",defaultValue:"yAxisMinAuto",name:"yAxisMin",options:[{type:"static",name:"yAxisMinAuto",value:e.t("screens.ds.grid_sidebar.chart.y_axis_formatting.auto")},{type:"text",name:"displayFormat.yAxis.min",prompt:e.t("screens.ds.grid_sidebar.chart.y_axis_formatting.axis_prompt"),extraClass:"number"}]},{text:e.t("screens.ds.grid_sidebar.chart.y_axis_formatting.axis_max"),type:"radioGroup",defaultValue:"yAxisMaxAuto",name:"yAxisMax",options:[{type:"static",name:"yAxisMaxAuto",value:e.t("screens.ds.grid_sidebar.chart.y_axis_formatting.auto")},{type:"text",name:"displayFormat.yAxis.max",prompt:e.t("screens.ds.grid_sidebar.chart.y_axis_formatting.axis_prompt"),extraClass:"number"}]},c?{text:e.t("screens.ds.grid_sidebar.chart.y_axis_formatting.decimals"),type:"radioGroup",name:"yAxisDecimalPlaces",defaultValue:"yAxisDecimalPlacesAuto",options:[{type:"static",value:"Auto",name:"yAxisDecimalPlacesAuto"},{type:"slider",minimum:0,maximum:10,defaultValue:0,name:"displayFormat.yAxis.formatter.decimalPlaces"}]}:{text:e.t("screens.ds.grid_sidebar.chart.y_axis_formatting.precision"),type:"text",spinner:!0,minimum:0,maximum:10,defaultValue:2,name:"displayFormat.yAxis.formatter.decimalPlaces"},{text:e.t("screens.ds.grid_sidebar.chart.y_axis_formatting.abbreviate"),type:"checkbox",defaultValue:!0,name:"displayFormat.yAxis.formatter.abbreviate"}]);"timeline"==t.value&&o(n=i.fields).call(n,0,1);return i},V=function(e){var t=e.view;return _.compact(l(_).call(_,t.displayFormat.valueColumns,(function(e){return(e=t.columnForIdentifier(e.fieldName||e.tableColumnId))&&!_.isUndefined(e.fieldName)?{ascending:!1,columnFieldName:e.fieldName}:null})))},M=function(t){return c&&e.subKeyDefined(t.view,"displayFormat.valueColumns")&&!_.isEmpty(t.view.displayFormat.valueColumns)&&!function(t){if(e.subKeyDefined(t.view,"metadata.jsonQuery.order")){var a=V(t);return _.isEqual(a,t.view.metadata.jsonQuery.order)}return!1}(t)},R=function(t){var a=!1;return{type:"custom",lineClass:"autoSortButton",editorCallbacks:{create:function(n){var i=this,r=e.t("screens.ds.grid_sidebar.chart.auto_update_sort_button"),s=e("<a href='#' class='button applyDefaultPieSort'>"+r+"</a>");n.append(s);var o=!1,l=function(){o||(o=!0,M(t)!=a&&i.reset(),o=!1)};return blist.dataset.bind("query_change",l),blist.dataset.bind("displayformat_change",l),s.on("click",(function(){var a=e.extend(!0,{},t.view.metadata);a.jsonQuery.order=V(t),t.view.update({metadata:a},!1,!0)})),a=M(t)}}}},z=function(t,a){return{type:"note",onlyIf:{func:function(){return M(t)}},lineClass:"autoSortInfo flash notice",value:e.t("screens.ds.grid_sidebar.chart.auto_update_sort_info_"+a)}};a.configChartSelector=function(t){var a=e.extend(!0,{},Dataset.chart.types);for(var n in a)a[n].text=e.t("core.chart_types_short."+a[n].value);for(var i={},r=0;r<d.length;r++){i[d[r]]=a[d[r]];var s=i[d[r]];I(s,t)||(s.lineClass="unavailable",s.disabled="disabled"),s.prompt=e.htmlEscape(N(s))}return[{title:e.t("screens.ds.grid_sidebar.visualize.choose_type"),type:"selectable",initShow:!0,validateCollapsed:!0,customClasses:"sectionSubheading chartTypeSelection",fields:[{text:e.t("screens.ds.grid_sidebar.chart.setup.type"),name:"displayFormat.chartType",type:"radioGroup",required:!0,extraClass:"option-icons",sectionSelector:!0,defaultValue:"",prompt:e.t("screens.ds.grid_sidebar.chart.setup.type_prompt"),options:i}]}]},a.newConfigForType=function(t,a){a=e.extend({isEdit:!1,useOnlyIf:!1},a);var n=Dataset.chart.types[t],i=B(0,0,e.t("screens.ds.grid_sidebar.chart.headings.data_selection")),r=B(0,0,e.t("screens.ds.grid_sidebar.chart.headings.data_presentation")),s=B(0,0,e.t("screens.ds.grid_sidebar.chart.headings.chart_details")),l=[];switch(t){case"area":l.push(i,P(n,a,Dataset.chart.textualTypes,Dataset.chart.numericTypes,e.t("screens.ds.grid_sidebar.chart.data_selection.chart_definition.label_title")),E(n,a,Dataset.chart.textualTypes),r,L(n,a),O(n,a,[f,h]),$(n,a),s,b(n,a),j(n,a),q(n,a));break;case"stackedbar":case"bar":case"stackedcolumn":case"column":l.push(i,P(n,a,Dataset.chart.textAndDateTypes,Dataset.chart.numericTypes,e.t("screens.ds.grid_sidebar.chart.data_selection.chart_definition.label_title")),E(n,a,Dataset.chart.textualTypes),r,L(n,a),O(n,a,[D,F]),$(n,a),s,b(n,a),j(n,a),q(n,a));break;case"bubble":l.push(i,function(t,a){return A(t,a,e.t("screens.ds.grid_sidebar.chart.data_columns.title"),[{text:e.t("screens.ds.grid_sidebar.chart.data_selection.chart_definition.label_title"),name:"displayFormat.fixedColumns.0",lineClass:"hasIcon bubbleLabelSelection",type:"columnSelect",required:!1,useFieldName:!0,notequalto:"valueCol",columns:{type:Dataset.chart.textualTypes,hidden:a.isEdit}},{text:e.t("screens.ds.grid_sidebar.chart.data_selection.chart_definition.value_title"),required:!0,type:"columnSelect",useFieldName:!0,notequalto:"valueCol",lineClass:"hasIcon bubbleValueSelection",name:"displayFormat.valueColumns.0.fieldName",otherNames:"displayFormat.valueColumns.0.tableColumnId",columns:{type:Dataset.chart.numericTypes,hidden:a.isEdit}},y(a),w(a)],!0)}(n,a),E(n,a,Dataset.chart.textualTypes),r,L(n,a),$(n,a),s,j(n,a),q(n,a));break;case"donut":l.push(i,function(t){var a=P(Dataset.chart.types.donut,t,Dataset.chart.textualTypes,Dataset.chart.numericTypes,e.t("screens.ds.grid_sidebar.chart.data_selection.chart_definition.label_title"));return a.fields.push(z(t,"donut")),a.fields.push(R(t)),a}(a),r,L(n,a),O(n,a,[S,T,g]),s,b(n,a),j(n,a));break;case"line":l.push(i,function(t){var a=P(Dataset.chart.types.line,t,Dataset.chart.textualTypes,Dataset.chart.numericTypes,e.t("screens.ds.grid_sidebar.chart.data_selection.chart_definition.label_title"));return a.fields[0].required=!1,a}(a),E(n,a,Dataset.chart.textualTypes),r,L(n,a),O(n,a,[f,h,x,v]),$(n,a),s,b(n,a),j(n,a),q(n,a));break;case"pie":l.push(i,function(t){var a,n=P(Dataset.chart.types.pie,t,Dataset.chart.textualTypes,Dataset.chart.numericTypes,e.t("screens.ds.grid_sidebar.chart.data_selection.chart_definition.label_title"));return o(a=n.fields).call(a,1,2),n.fields.push({text:e.t("screens.ds.grid_sidebar.chart.data_selection.chart_definition.value_title"),name:"displayFormat.valueColumns.0.fieldName",otherNames:"displayFormat.valueColumns.0.tableColumnId",lineClass:"hasIcon pieValueSelection",notequalto:"valueCol",type:"columnSelect",required:!0,useFieldName:!0,columns:{type:Dataset.chart.numericTypes,hidden:t.isEdit}}),n.fields.push(z(t,"pie")),n.fields.push(R(t)),n}(a),r,L(n,a),O(n,a,[S,T,g]),s,b(n,a),j(n,a));break;case"timeline":l.push(i,function(t){return P(Dataset.chart.types.timeline,t,Dataset.chart.dateTypes,Dataset.chart.numericTypes,e.t("screens.ds.grid_sidebar.chart.data_selection.chart_definition.label_title"))}(a),E(n,a,Dataset.chart.textualTypes),r,L(n,a),$(n,a),s,b(n,a),j(n,a),q(n,a));break;case"treemap":var c=L(n,a);c.fields.push(k),l.push(i,A(n,a,e.t("screens.ds.grid_sidebar.chart.configuration"),[{text:e.t("screens.ds.grid_sidebar.chart.data_selection.chart_definition.label_title"),name:"displayFormat.fixedColumns.0",notequalto:"valueCol",type:"columnSelect",required:!0,useFieldName:!0,lineClass:"hasIcon treemapLabelSelection",columns:{type:Dataset.chart.textualTypes,hidden:a.isEdit}},{text:e.t("screens.ds.grid_sidebar.chart.data_selection.chart_definition.value_title"),name:"displayFormat.valueColumns.0.fieldName",otherNames:"displayFormat.valueColumns.0.tableColumnId",lineClass:"hasIcon treemapValueSelection",notequalto:"valueCol",type:"columnSelect",required:!0,useFieldName:!0,columns:{type:Dataset.chart.numericTypes,hidden:a.isEdit}}],!0),r,c,s,j(n,a))}return l}}(jQuery)},92027:function(e,t,a){"use strict";a(89041),a(426),a(42e3),a(79167);var n=a(49138),i=a.n(n),r=a(96110),s=a.n(r),o=a(17933),l=a.n(o),c=a(21456),d=a.n(c),u=a(4081),p=a.n(u),m=a(65311),f=a.n(m),h=a(901),g=a(70316),v=a(39445),b=["column","stackedcolumn","bar","stackedbar","pie","donut","line","area","timeline","bubble","treemap"],y=!1,w=!h.ZP.value("force_use_of_modifying_lens_id_in_all_derived_views")&&h.ZP.value("enable_classic_chart_creation"),C=h.ZP.value("enable_standalone_visualization_creation"),x="screens.ds.grid_sidebar";f().Control.extend("pane_chart_create",{_init:function(){var e=this;e._super.apply(e,arguments),e._view.bind("clear_temporary",(function(){e.reset()}),e),e.$dom().on("click",".showConditionalFormatting",(function(e){e.preventDefault(),f().subKeyDefined(blist,"datasetPage.sidebar")&&blist.datasetPage.sidebar.show("filter.conditionalFormatting")})),e.$dom().on("click",".clearConditionalFormatting",(function(t){t.preventDefault();var a=f().extend(!0,{},e._view.metadata);delete a.conditionalFormatting,e._view.update({metadata:a})}))},render:function(){var e=this;e._super(null,null,(function(t){if(t){var a,n,r,o,l,c,d,u,p,m;if(i()(a=e.$dom()).call(a,".chartTypeSelection .radioLine").each((function(e,t){f()(t).addClass(b[e])})),i()(n=e.$dom()).call(n,".chartTypeSelection .formHeader").append(f().tag({tagName:"div",class:["currentSelection"],contents:[{tagName:"span",class:["selectionName"]},{tagName:"span",class:["selectionIcon"]}]})),i()(r=e.$dom()).call(r,".line.hasIcon").after(f().tag({tagName:"div",class:["lineIcon"]})),e._renderVisualizationCanvasButton(),i()(o=e.$dom()).call(o,".hasIcon.repeater .addValue").on("hover",(function(){var e;s()(e=f()(this).parent().siblings()).call(e,".lineIcon").addClass("hover")}),(function(){var e;s()(e=f()(this).parent().siblings()).call(e,".lineIcon").removeClass("hover")})),!e._view.metadata.conditionalFormatting)i()(m=e.$dom()).call(m,".conditionalFormattingWarning").hide();i()(l=e.$dom()).call(l,".mainError+.required").hide(),i()(c=e.$dom()).call(c,".unavailable").each((function(){var e=f()(this),t=f().htmlUnescape(i()(e).call(e,"label input").attr("title"));e.socrataTip({content:t})}));var h=function(t){var a,n,r=t.split(" ")[1];"unavailable"!=r&&i()(a=i()(n=e.$dom()).call(n,".formSection.chartTypeSelection, .paneContent").removeClass((function(e,t){var a=t.match(/\S*-selected/);return f().isBlank(a)?"":a.join(" ")})).addClass(t+"-selected")).call(a,".currentSelection .selectionName").text(Dataset.chart.types[r].text)};blist.dataset.displayFormat.chartType&&h("radioLine "+blist.dataset.displayFormat.chartType),i()(d=e.$dom()).call(d,".chartTypeSelection .radioLine").on("click",(function(e){h(f()(e.currentTarget).attr("class"))})),i()(u=e.$dom()).call(u,".repeater").on("click",".removeLink",(function(t){e._changeHandler(f()(t.currentTarget))})),i()(p=e.$dom()).call(p,".formSection.selectable .sectionSelect").on("click",(function(e){var t=f()(e.currentTarget).closest(".formSection");t.hasClass("collapsed")?i()(t).call(t,".sectionContent").show().slideUp({duration:100,easing:"linear"}):i()(t).call(t,".sectionContent").hide().slideDown({duration:100,easing:"linear"})}))}}))},_getSections:function(){var e=this,t={view:e._view,isEdit:k(e)&&!e._view.isGrouped(),useOnlyIf:!0},a=blist.configs.chart.configChartSelector(t),n=e._view.displayFormat.chartType;return n&&(a=l()(a).call(a,blist.configs.chart.newConfigForType(n,{view:e._view,isEdit:k(e)&&!e._view.isGrouped(),useOnlyIf:!0}))),a},getTitle:function(){return h.ZP.value("enable_classic_map_creation")?w?g.ZP.t("chart.title",{scope:x}):g.ZP.t("chart.new_viz_title",{scope:x}):g.ZP.t("chart.chart_or_map",{scope:x})},_getCurrentData:function(){return this._super()||this._view},isAvailable:function(){return(this._view.valid||k(this))&&(d()(_).call(_,this._view.metadata.availableDisplayTypes,"chart")||this._view.shouldShowViewCreationOptions())},getDisabledSubtitle:function(){return this._view.valid||k(this)?g.ZP.t("chart.validation.viz_limit",{scope:x}):g.ZP.t("base.validation.invalid_view",{scope:x})},validateForm:function(){var e=this._super();return this._updateErrorVisibility(),e},_renderVisualizationCanvasButton:function(){var e=this,t=blist.dataset;"tabular"===t.viewType&&"table"===t.displayType&&t.getNewBackendMetadata().then((function(){var a,n,r;if(!i()(a=e.$dom()).call(a,".visualization-canvas-bootstrap").length){var s=(0,v.Z)(),o=s===blist.defaultLocale?"":"/".concat(s),c=t.id!==t._obeId&&t.id!==t._nbeId?t.id:t._nbeId,d=l()(n="".concat(o,"/d/")).call(n,c,"/visualization");if("unpublished"!==t.publicationStage){var u=i()(r=e.$dom()).call(r,".chartTypeSelection > label.formHeader"),p=f().tag({tagName:"a",href:d,class:"visualization-canvas-button",contents:g.ZP.t("visualization_canvas.button",{scope:x}),target:"_blank"});C&&u.before(f()("<div>").addClass("visualization-canvas-bootstrap").append(p)),y||(w&&p.after(f().tag({tagName:"a",href:"#continue-to-classic",class:"visualization-canvas-ignore-link",contents:g.ZP.t("visualization_canvas.link_to_classic",{scope:x})}).on("click",(function(){var e,t=f()(this);return i()(e=t.closest(".formSection")).call(e,".hide").removeClass("hide").css({display:""}),t.remove(),y=!0,!1}))),u.nextAll().addBack().addClass("hide").attr({style:"display: none !important"}))}}})).fail(_.noop)},_updateErrorVisibility:function(e){e=e||this._view.displayFormat.valueColumns;var t=_.isEmpty(e)||_.some(e,_.isEmpty);this.$dom().toggleClass("inlineErrorsHidden",t||!1)},_changeHandler:function(e){var t=this;_.defer((function(){var a,n,r,s=t.$dom().closest(".panes").scrollTop(),o=f().subKeyDefined(t._view,"displayFormat.chartType")?t._view.displayFormat.chartType:void 0,l=_.isEmpty(o),c=t._getFormValues();if("displayFormat.chartType"==e.data("origname")){var u=c.displayFormat.chartType,m=!l&&o==u;!t.validateForm()&&m||(_.isFunction(Dataset.chart.types[u].translateFormat)&&(c.displayFormat=Dataset.chart.types[u].translateFormat(t._view,c.displayFormat)),t._view.update(f().extend(!0,{},c,{metadata:t._view.metadata})),t._updateErrorVisibility()),t.reset(),c=t._getFormValues()}if(!t.validateForm())return t._updateErrorVisibility(c.displayFormat.valueColumns),void t.$dom().closest(".panes").scrollTop(s);i()(a=t.$dom()).call(a,"[class*='ValueSelection'] .line").each((function(e,t){var a=f()(t);f().isBlank(i()(a).call(a,".columnSelectControl").val())&&a.remove()}));var h=i()(n=t.$dom()).call(n,".colorArray"),g=i()(r=t.$dom()).call(r,".colors");"none"==h.css("display")&&g?g.show():g.hide();var v=f().extend(!0,{metadata:{renderTypeConfig:{visible:{chart:!0}}}},c,{metadata:t._view.metadata});_.each(v.displayFormat.fixedColumns||[],(function(e){var a=t._view.columnForIdentifier(e);_.some(a.renderType.aggregates,(function(e){return"sum"==e.value}))&&(a.format.aggregate="sum")}));var b=d()(_).call(_,["pie","donut"],v.displayFormat.chartType),y=!l&&o==v.displayFormat.chartType;if((l||y)&&b&&!f().subKeyDefined(t,"_view.metadata.jsonQuery.order")&&(v.metadata=f().extend(!0,v.metadata,t._view.metadata),v.metadata.jsonQuery.order=t._getPieDefaultOrderBy(v.displayFormat.valueColumns)),"bar"!=v.displayFormat.chartType&&"column"!=v.displayFormat.chartType||1!=v.displayFormat.stacking||(v.displayFormat.chartType="stacked"+v.displayFormat.chartType),t._view.update(v),t._updateErrorVisibility(),k(t)){var w=p()(_).call(_,t._view.realColumns,"id");w.length>0&&t._view.setVisibleColumns(w,null,!0)}t.$dom().closest(".panes").scrollTop(s),t._finishProcessing()}))},_getPieDefaultOrderBy:function(e){var t=this;return p()(_).call(_,e,(function(e){return{ascending:!1,columnFieldName:t._view.columnForIdentifier(e.fieldName||e.tableColumnId).fieldName}}))}},{name:"chart_create"},"controlPane");var k=function(e){return d()(_).call(_,e._view.metadata.availableDisplayTypes,"chart")};blist.sidebarHidden.visualize.chartCreate||f().gridSidebar.registerConfig("visualize.chart_create","pane_chart_create",0)},70297:function(e,t,a){var n=a(49138),i=a(4081);!function(e){var t=!1;e.Control.extend("pane_columnOrder",{_init:function(){var e=this;e._super.apply(e,arguments),e._view.bind("columns_changed",(function(){t||e.reset()}),e)},getTitle:function(){return e.t("screens.ds.grid_sidebar.column_order.title")},getSubtitle:function(){return e.t("screens.ds.grid_sidebar.column_order.subtitle")},isAvailable:function(){return this._view.valid&&(!this._view.temporary||this._view.minorChange)&&!_.isEmpty(this._view.visibleColumns)},getDisabledSubtitle:function(){return e.t("screens.ds.grid_sidebar.column_order.validation.valid_columns")},_getSections:function(){return[{title:e.t("screens.ds.grid_sidebar.column_order.columns.title"),customContent:{template:"columnOrderBlock",directive:{"li.columnItem":{"column<-":{".@data-columnId":"column.id",".name":"column.name!",".@class+":"column.renderTypeName"}}},data:this._view.visibleColumns}}]},shown:function(){var e;this._super(),n(e=this.$dom()).call(e,"ul.columnsList").awesomereorder()},_getFinishButtons:function(){return[e.controlPane.buttons.apply,e.controlPane.buttons.cancel]},_finish:function(e,a,r){var s,o=this;if(o._super.apply(o,arguments)){var l=n(s=o.$dom()).call(s,".columnsList"),c=i(_).call(_,_.sortBy(o._view.visibleColumns,(function(e){return l.children("[data-columnId="+e.id+"]").index()})),"id");t=!0,o._view.setVisibleColumns(c,(function(){o._finishProcessing(),o._hide(),t=!1,_.isFunction(r)&&r()}))}}},{name:"columnOrder"},"controlPane"),!e.isBlank(blist.sidebarHidden.manage)&&blist.sidebarHidden.manage.updateColumn||e.gridSidebar.registerConfig("manage.columnOrder","pane_columnOrder",3)}(jQuery)},75719:function(e,t,a){"use strict";a(29954),a(89041),a(426),a(60148),a(79167);var n=a(17933),i=a.n(n),r=a(4081),s=a.n(r),o=a(21456),l=a.n(o),c=a(27255),d=a.n(c),u=a(901);!function(e){var t=function(e){return"blist"==e._view.type},a=function(a){return!(t(this)||"grouped"==this._view.type)&&e.isBlank(a.format.grouping_aggregate)&&e.isBlank(a.format.drill_down)},n=function(a,n){if(e.isBlank(n)||!a._view.hasRight(blist.rights.view.UPDATE_COLUMN))return!1;var i=n.dataType.convertableTypes,r=!!n.isLinked()||_.isArray(i)&&i.length>0;return t(a)&&e.isBlank(n.format.grouping_aggregate)&&r},r=function(t){var a;if(e.isBlank(t)||!n(this,t.origColumn))return"hidden";var r=t.origColumn,o=r.dataType,l=[{text:e.t("core.data_types."+r.renderTypeName),value:r.renderTypeName}];return i()(l).call(l,s()(a=_.chain(o.convertableTypes||[]).reject((function(e){var t=blist.datatypes[e];return t.deprecatedInNbe||t.deprecatedInWave1||t.deprecatedInWave2})).sortBy((function(e){return blist.datatypes[e].priority}))).call(a,(function(t){return{value:t,text:e.t("core.data_types."+t)}})).value())},o=function(t){return!e.isBlank(t)&&t.origColumn.isLinked()},c=function(t){if(e.isBlank(t)||n(this,t.origColumn))return"";var a=t.origColumn,i=e.t("core.data_types."+a.renderTypeName);return e.isBlank(a.format.grouping_aggregate)||(i+=" ("+e.capitalize(a.format.grouping_aggregate)+" on "+a.dataType.title+")"),i},p=function(t){return e.isBlank(t)?"hidden":t.origColumn.renderType.alignment||"hidden"},m=function(t){return e.isBlank(t)?"plain":t.origColumn.renderType.displayOptions||"plain"},f=function(t){return e.isBlank(t)||_.isEmpty(t.origColumn.renderType.aggregates)?"hidden":s()(_).call(_,t.origColumn.renderType.aggregates,(function(t){return e.extend({},t,{value:blist.datatypes.aggregateFromSoda2(t.value)})}))},h=function(t){if(e.isBlank(t))return"hidden";var a=t.origColumn,n=a.renderType,i=n.viewTypes;if(_.isFunction(i)&&(i=i(a)),l()(_).call(_,["date","calendar_date"],a.renderTypeName)){var r=new Date;i=s()(_).call(_,i,(function(e){return{text:r.format(n.formats[e.value]),value:e.value}}))}return i||"hidden"},g=function(t){return e.isBlank(t)?"hidden":t.origColumn.renderType.precisionStyle||"hidden"},v=e.t("screens.ds.grid_sidebar.column_properties.money.groups.common"),b=e.t("screens.ds.grid_sidebar.column_properties.money.groups.all"),y=s()(_).call(_,[{value:"USD",text:"United States, Dollars",group:v},{value:"EUR",text:"Euros",group:v},{value:"GBP",text:"British, Pounds",group:v},{value:"RUB",text:"Russia, Rubles",group:v},{value:"CAD",text:"Canada, Dollars",group:v},{value:"AFN",text:"Afghanistan, Afghanis"},{value:"ALL",text:"Albania, Leke"},{value:"ARS",text:"Argentina, Pesos"},{value:"AUD",text:"Australia, Dollars"},{value:"AZN",text:"Azerbaijan, New Manats"},{value:"BSD",text:"Bahamas, Dollars"},{value:"BBD",text:"Barbados, Dollars"},{value:"BYR",text:"Belarus, Rubles"},{value:"BZD",text:"Belize, Dollars"},{value:"BMD",text:"Bermuda, Dollars"},{value:"BOB",text:"Bolivia, Bolivianos"},{value:"BAM",text:"Bosnia and Herzegovina, Convertible Marka"},{value:"BWP",text:"Botswana, Pulas"},{value:"BRL",text:"Brazil, Real"},{value:"BGN",text:"Bulgaria, Leva"},{value:"KHR",text:"Cambodia, Riels"},{value:"CLP",text:"Chile, Pesos"},{value:"CNY",text:"China, Yuan Renminbi"},{value:"COP",text:"Colombia, Pesos"},{value:"CRC",text:"Costa Rica, Colones"},{value:"HRK",text:"Croatia, Kuna"},{value:"CZK",text:"Czech Republic, Koruny"},{value:"DKK",text:"Denmark, Kroner"},{value:"DOP",text:"Dominican Republic, Pesos"},{value:"EGP",text:"Egypt, Pounds"},{value:"EEK",text:"Estonia, Krooni"},{value:"FJD",text:"Fiji, Dollars"},{value:"GHC",text:"Ghana, Cedis"},{value:"GTQ",text:"Guatemala, Quetzales"},{value:"GYD",text:"Guyana, Dollars"},{value:"HKD",text:"Hong Kong, Dollars"},{value:"HNL",text:"Honduras, Lempiras"},{value:"HUF",text:"Hungary, Forint"},{value:"ISK",text:"Iceland, Kronur"},{value:"INR",text:"India, Rupees"},{value:"IDR",text:"Indonesia, Rupiahs"},{value:"IRR",text:"Iran, Rials"},{value:"ILS",text:"Israel, New Shekels"},{value:"JMD",text:"Jamaica, Dollars"},{value:"JPY",text:"Japanese Yen"},{value:"KZT",text:"Kazakhstan, Tenge"},{value:"KES",text:"Kenya, Shilling"},{value:"KRW",text:"Korea, Won"},{value:"KGS",text:"Kyrgyzstan, Soms"},{value:"LAK",text:"Laos, Kips"},{value:"LVL",text:"Latvia, Lati"},{value:"LBP",text:"Lebanon, Pounds"},{value:"LRD",text:"Liberia, Dollars"},{value:"LTL",text:"Lithuania, Litai"},{value:"MKD",text:"Macedonia, Denars"},{value:"MYR",text:"Malaysia, Ringgits"},{value:"MXN",text:"Mexico, Pesos"},{value:"MNT",text:"Mongolia, Tugriks"},{value:"MZN",text:"Mozambique, Meticais"},{value:"NAD",text:"Namibia, Dollars"},{value:"NPR",text:"Nepal, Nepal Rupees"},{value:"NZD",text:"New Zealand, Dollar"},{value:"NIO",text:"Nicaragua, Cordobas"},{value:"NGN",text:"Nigeria, Nairas"},{value:"NOK",text:"Norway, Krone"},{value:"OMR",text:"Oman, Rials"},{value:"PKR",text:"Pakistan, Rupees"},{value:"PYG",text:"Paraguay, Guarani"},{value:"PEN",text:"Peru, Nuevos Soles"},{value:"PHP",text:"Philippines, Pesos"},{value:"PLN",text:"Poland, Klotych"},{value:"QAR",text:"Qatar, Rials"},{value:"RON",text:"Romania, New Lei"},{value:"SAR",text:"Saudi Arabia, Riyals"},{value:"RSD",text:"Serbia, Dinars"},{value:"SGD",text:"Singapore, Dollars"},{value:"SOS",text:"Somalia, Shillings"},{value:"ZAR",text:"South Africa, Rand"},{value:"LKR",text:"Sri Lanka, Rupees"},{value:"SEK",text:"Sweden, Kronor"},{value:"CHF",text:"Swiss, Francs"},{value:"SYP",text:"Syria, Pounds"},{value:"TWD",text:"Taiwan, New Dollars"},{value:"THB",text:"Thailand, Baht"},{value:"TRY",text:"Turkey, New Lira"},{value:"UAH",text:"Ukraine, Hryvnia"},{value:"USD",text:"United States, Dollars"},{value:"UYU",text:"Uruguay, Pesos"},{value:"UZS",text:"Uzbekistan, Sums"},{value:"VEF",text:"Venezuela, Bolivares Fuertes"},{value:"VND",text:"Vietnam, Dong"},{value:"YER",text:"Yemen, Rials"}],(function(e){return{value:e.value,group:e.group||b,text:e.text+" ("+blist.datatypes.money.currencies[e.value]+")"}})),w=[];e.Control.extend("pane_columnProperties",{_init:function(){var t=this;t._super.apply(t,arguments),t._isReady=!1,e.Tache.Get({url:"/api/rdfTerms.json",data:{type:"property",class:(t._view.metadata||{}).rdfClass},success:function(e){_.each(e,(function(e){w.push({value:e.CName,text:e.namespace+": "+(e.displayName||e.name)})})),t._markReady()}})},getTitle:function(){return e.t("screens.ds.grid_sidebar.column_properties.title")},getSubtitle:function(){return e.t("screens.ds.grid_sidebar.column_properties.subtitle")},isAvailable:function(){return this._view.hasRight(blist.rights.view.UPDATE_COLUMN)&&(!this._view.temporary||this._view.minorChange)},getDisabledSubtitle:function(){return this._view.hasRight(blist.rights.view.UPDATE_COLUMN)?e.t("screens.ds.grid_sidebar.column_properties.validation.unsaved"):e.t("screens.ds.grid_sidebar.column_properties.validation.notallowed")},render:function(t,a){var n=this;this._super.apply(this,[t,a,function(e){e&&n.$content().on("click","a.createWorkingCopy",(function(e){e.preventDefault(),blist.datasetPage.sidebar.show("edit")}))}]),e.subKeyDefined(this,"_curData.origColumn")&&this.$dom().loadingSpinner().setModel(this._curData.origColumn)},_dataPreProcess:function(t){var a=t.cleanCopy();if(a.origColumn=t,e.isBlank(a.dropDownList)||(a.dropDownList={values:_.reject(d()(a.dropDownList)||[],(function(e){return e.deleted}))}),!e.isBlank(t.format)&&!e.isBlank(t.format.rdf)){a.format.rdf=[];var n=t.format.rdf.split(",");_.forEach(n,(function(e){_.some(w,(function(t){return t.value==e}))?a.format.rdf.push({stock:e}):a.format.rdf.push({custom:e})}))}return a},_isReadOnly:function(){return this._view.isSnapshot()},_getReadOnlyMessage:function(){return e.t("screens.ds.grid_sidebar.column_properties.validation.snapshot")},_getSections:function(){var t=this,n=[{title:e.t("screens.ds.grid_sidebar.column_common.basic.title"),fields:[{text:e.t("screens.ds.grid_sidebar.column_common.basic.name"),type:"text",required:!0,disabled:a,name:"name",prompt:e.t("screens.ds.grid_sidebar.column_common.basic.name_prompt")},{text:e.t("screens.ds.grid_sidebar.column_common.basic.description"),type:"textarea",disabled:a,name:"description",prompt:e.t("screens.ds.grid_sidebar.column_common.basic.description_prompt")}]},{title:e.t("screens.ds.grid_sidebar.column_common.type.title"),onlyIf:{func:function(e){return!o(e)&&!t._view.newBackend&&!t._view.isPublished()},warn:!0,warningMessage:function(){return t._view.isPublished()?e.t("screens.ds.grid_sidebar.column_common.type.working_copy_html"):""}},fields:[{text:e.t("screens.ds.grid_sidebar.column_common.type.type"),type:"select",required:!0,name:"dataTypeName",disabled:function(){return t._view.isPublished()},prompt:null,options:r},{text:e.t("screens.ds.grid_sidebar.column_common.type.type"),type:"static",disabled:function(){return t._view.isPublished()},value:c}]},{title:e.t("screens.ds.grid_sidebar.column_properties.formatting.title"),onlyIf:{func:function(t){if(e.isBlank(t))return!1;var a=t.origColumn.renderType;return!e.isBlank(a.alignment)||!e.isBlank(a.viewTypes)}},fields:[{text:e.t("screens.ds.grid_sidebar.column_properties.formatting.alignment"),type:"select",name:"format.align",prompt:null,options:p},{text:e.t("screens.ds.grid_sidebar.column_properties.formatting.view_style"),type:"select",name:"format.view",prompt:null,options:h}]},{title:e.t("screens.ds.grid_sidebar.column_properties.text_formatting.title"),onlyIf:{func:function(t){if(e.isBlank(t))return!1;var a=t.origColumn.renderType;return"text"===a.name&&(!e.isBlank(a.alignment)||!e.isBlank(a.viewTypes))}},fields:[{text:e.t("screens.ds.grid_sidebar.column_properties.text_formatting.display_style"),type:"select",name:"format.displayStyle",prompt:null,options:m}]},{title:e.t("screens.ds.grid_sidebar.column_properties.number.title"),onlyIf:{func:function(t){return!e.isBlank(t)&&l()(_).call(_,["number","percent"],t.origColumn.renderTypeName)}},fields:[{text:e.t("screens.ds.grid_sidebar.column_properties.number.precision"),type:"radioGroup",name:"precisionGroup",defaultValue:"format.precisionNone",options:[{type:"static",value:e.t("screens.ds.grid_sidebar.column_properties.number.no_precision"),name:"format.precisionNone"},{type:"slider",minimum:0,maximum:10,defaultValue:0,name:"format.precision"}]},{text:e.t("screens.ds.grid_sidebar.column_properties.number.display"),type:"select",name:"format.precisionStyle",prompt:null,options:g},{text:e.t("screens.ds.grid_sidebar.column_properties.money.currency"),type:"select",name:"format.currencyStyle",options:y,defaultValue:"USD",onlySelectFirst:!0,onlyIf:{field:"format.precisionStyle",value:"currency"},prompt:null},{text:e.t("screens.ds.grid_sidebar.column_properties.formatting.view_style"),type:"select",name:"format.view",prompt:null,options:blist.datatypes.percent.viewTypes,onlyIf:{field:"format.precisionStyle",value:"percentage"}},{text:e.t("screens.ds.grid_sidebar.column_properties.number.no_commas"),type:"checkbox",name:"format.noCommas"}]},{title:e.t("screens.ds.grid_sidebar.column_properties.number_advanced.title"),onlyIf:{func:function(t){return!e.isBlank(t)&&"number"==t.origColumn.renderTypeName}},fields:[{text:e.t("screens.ds.grid_sidebar.column_properties.number_advanced.format_mask"),type:"text",name:"format.mask"},{type:"note",value:e.t("screens.ds.grid_sidebar.column_properties.number_advanced.format_mask_prompt")},{type:"note",value:e.t("screens.ds.grid_sidebar.column_properties.number_advanced.format_mask_warning")}]},{title:e.t("screens.ds.grid_sidebar.column_properties.money.title"),onlyIf:{func:function(t){return!e.isBlank(t)&&"money"==t.origColumn.renderTypeName}},fields:[{text:e.t("screens.ds.grid_sidebar.column_properties.money.precision"),type:"radioGroup",name:"moneyPrecisionGroup",defaultValue:"format.precisionNone",options:[{type:"static",value:e.t("screens.ds.grid_sidebar.column_properties.money.no_precision"),name:"format.precisionNone"},{type:"slider",minimum:0,maximum:2,defaultValue:2,name:"format.precision"}]},{text:e.t("screens.ds.grid_sidebar.column_properties.money.currency"),type:"select",name:"format.currency",prompt:null,defaultValue:"dollar",options:y},{text:e.t("screens.ds.grid_sidebar.column_properties.money.abbreviated"),type:"checkbox",name:"format.humane"}]},{title:e.t("screens.ds.grid_sidebar.column_properties.localization.title"),type:"selectable",showIfData:!0,onlyIf:{func:function(t){return!e.isBlank(t)&&l()(_).call(_,["number","percent","money"],t.origColumn.renderTypeName)}},fields:[{text:e.t("screens.ds.grid_sidebar.column_properties.localization.decimal"),type:"text",name:"format.decimalSeparator",defaultValue:"."},{text:e.t("screens.ds.grid_sidebar.column_properties.localization.thousands"),type:"text",name:"format.groupSeparator",defaultValue:","}]},{title:e.t("screens.ds.grid_sidebar.column_properties.photo.title"),onlyIf:{func:function(t){return!e.isBlank(t)&&"photo"==t.origColumn.renderTypeName}},fields:[{text:e.t("screens.ds.grid_sidebar.column_properties.photo.size"),type:"select",name:"format.size",prompt:e.t("screens.ds.grid_sidebar.column_properties.photo.size_prompt"),options:[{value:"tiny",text:e.t("screens.ds.grid_sidebar.column_properties.photo.sizes.tiny")},{value:"thumb",text:e.t("screens.ds.grid_sidebar.column_properties.photo.sizes.thumb")},{value:"medium",text:e.t("screens.ds.grid_sidebar.column_properties.photo.sizes.medium")},{value:"featured",text:e.t("screens.ds.grid_sidebar.column_properties.photo.sizes.featured")},{value:"large",text:e.t("screens.ds.grid_sidebar.column_properties.photo.sizes.large")},{value:"",text:e.t("screens.ds.grid_sidebar.column_properties.photo.sizes.original")}],defaultValue:""}]},{title:e.t("screens.ds.grid_sidebar.column_properties.url.title"),onlyIf:{func:function(t){return!e.isBlank(t)&&"url"==t.origColumn.renderTypeName}},fields:[{text:e.t("screens.ds.grid_sidebar.column_properties.url.base_url"),type:"text",name:"format.baseUrl",prompt:e.t("screens.ds.grid_sidebar.column_properties.url.base_url_prompt"),extraClass:"url"}]},{title:e.t("screens.ds.grid_sidebar.column_properties.display_order.title"),type:"selectable",name:"displayOrder",showIfData:!0,onlyIf:{func:function(t){return!e.isBlank(t)&&"text"==t.origColumn.renderTypeName}},fields:[{type:"repeater",addText:e.t("screens.ds.grid_sidebar.column_properties.display_order.new_item_button"),defaultValue:e.subKeyDefined(t,"_curData.origColumn.cachedContents.top")?s()(_).call(_,t._curData.origColumn.cachedContents.top,"item"):null,name:"metadata.displayOrder",minimum:0,field:{type:"text",text:e.t("screens.ds.grid_sidebar.column_properties.display_order.option"),name:"orderItem"}}]},{title:e.t("screens.ds.grid_sidebar.column_properties.multiple_choice.title"),onlyIf:{func:function(t){return!e.isBlank(t)&&"drop_down_list"==t.origColumn.renderTypeName}},fields:[{type:"repeater",addText:e.t("screens.ds.grid_sidebar.column_properties.multiple_choice.new_option_button"),name:"dropDownList.values",minimum:1,savedField:"id",field:{type:"text",text:e.t("screens.ds.grid_sidebar.column_properties.multiple_choice.option"),name:"description"}}]},{title:e.t("screens.ds.grid_sidebar.column_common.linked_dataset.title"),onlyIf:{func:function(t){return!e.isBlank(t)&&"dataset_link"==t.origColumn.renderTypeName}},fields:[{text:e.t("screens.ds.grid_sidebar.column_common.linked_dataset.dataset"),type:"text",name:"format.linkedDataset",data:{"4x4uid":"unverified"},prompt:e.t("screens.ds.grid_sidebar.column_common.linked_dataset.dataset_prompt")},{text:e.t("screens.ds.grid_sidebar.column_common.linked_dataset.key"),type:"select",name:"format.keyColumn",linkedField:"format.linkedDataset",options:Dataset.getLinkedDatasetOptionsNoDefault},{text:e.t("screens.ds.grid_sidebar.column_common.linked_dataset.label"),type:"select",name:"format.labelColumn",linkedField:"format.linkedDataset",options:Dataset.getLinkedDatasetOptionsDefault}]},{title:e.t("screens.ds.grid_sidebar.column_properties.column_totals.title"),onlyIf:{func:function(t){return!e.isBlank(t)&&!e.isBlank(t.origColumn.renderType.aggregates)}},fields:[{text:e.t("screens.ds.grid_sidebar.column_properties.column_totals.total"),type:"select",name:"format.aggregate",prompt:e.t("screens.ds.grid_sidebar.column_properties.column_totals.total_prompt"),options:f}]},{title:e.t("screens.ds.grid_sidebar.column_properties.advanced.title"),type:"selectable",name:"advanced",onlyIf:{func:function(){return!t._view.isPublished()}},fields:[{text:e.t("screens.ds.grid_sidebar.column_properties.advanced.api_identifier"),type:"text",data:{fieldName:"unverified"},name:"fieldName"},{type:"repeater",addText:e.t("screens.ds.grid_sidebar.column_properties.advanced.new_rdf_button"),name:"format.rdf",minimum:0,field:{type:"radioGroup",text:e.t("screens.ds.grid_sidebar.column_properties.advanced.semantics"),name:"rdfGroup",options:[{type:"select",name:"stock",options:w},{type:"text",name:"custom",prompt:e.t("screens.ds.grid_sidebar.column_properties.advanced.url"),extraClass:"url"}]}}]}];return u.ZP.value("prohibit_use_of_row_set")||n.push({title:e.t("screens.ds.grid_sidebar.column_properties.link.title"),onlyIf:{func:o},fields:[{text:e.t("screens.ds.grid_sidebar.column_properties.link.key"),type:"columnSelect",name:"format.linkedKey",required:!0,columns:{type:"dataset_link",hidden:!1}},{text:e.t("screens.ds.grid_sidebar.column_properties.link.source"),type:"select",name:"format.linkedSource",required:!0,linkedField:"format.linkedKey",options:function(e,a,n,i){return t._view.getLinkedColumnOptions.call(t._view,e,a,n,i)}}]}),n},_getFinishButtons:function(){return[e.extend({},e.controlPane.buttons.update,{requiresLogin:!1}),e.controlPane.buttons.cancel]},_finish:function(t,a,n){var i=this;if(i._super.apply(i,arguments)){var r=i._getFormValues(),o=t.origColumn;if(e.isBlank(o.format)||(r.format=r.format||{},_.each(["drill_down","grouping_aggregate","group_function"],(function(e){r.format[e]=o.format[e]})),"."==r.format.decimalSeparator&&delete r.format.decimalSeparator,","==r.format.groupSeparator&&delete r.format.groupSeparator),!e.isBlank(r.format)&&!e.isBlank(r.format.rdf)){var l=s()(_).call(_,r.format.rdf,(function(t){return e.isBlank(t.stock)?t.custom:t.stock}));r.format.rdf=l.join(",")}if(u.ZP.value("prohibit_use_of_row_set"));else if(o.isLinked()){var c=r.format.linkedKey;if(_.isNumber(c)){var d=this._view.columnForID(c);null!=d&&(r.format.linkedKey=d.fieldName)}var p=r.format.linkedSource;r.dataTypeName=i._view.getLinkSourceDataType(null,p,c).value}var m=r.dataTypeName;delete r.dataTypeName;var f=!e.isBlank(m)&&m!=t.dataTypeName,h=function(){i._finishProcessing(),i._showMessage(e.t("screens.ds.grid_sidebar.column_properties.success")),_.defer((function(){i._hide()})),_.isFunction(n)&&n()};o.update(r),o.view.trigger("columns_changed"),u.ZP.value("prohibit_use_of_row_set")||o.view.invalidateMeta(),o.save((function(e){if(f){var t=e.lookup;e.convert(m,(function(a){h();var n={};n[t]=a.lookup,e.view.trigger("columns_changed",["lookupChange",n])}),(function(e){i._genericErrorHandler(e)}))}else h()}),(function(e){i._genericErrorHandler(e)}))||h()}}},{name:"columnProperties"},"controlPane"),blist.sidebarHidden.columnProperties||e.gridSidebar.registerConfig("columnProperties","pane_columnProperties")}(jQuery)},54040:function(){!function(e){e.Control.extend("pane_conditionalFormattingDisabled",{isAvailable:function(){return!0},getTitle:function(){return e.t("screens.ds.grid_sidebar.conditional_formatting_disabled.title")},getSubtitle:function(){return e.t("screens.ds.grid_sidebar.conditional_formatting_disabled.subtitle")},getDisabledSubtitle:function(){return""},_getSections:function(){return[]},_getFinishButtons:function(){return[]},_finish:function(){}},{name:"conditionalFormattingDisabled"},"controlPane"),e(document).ready((function(){_.get(window,"socrata.gridView.sidebarPaneVisibility.filter.conditionalFormattingDisabled",!1)&&e.gridSidebar.registerConfig("filter.conditionalFormattingDisabled","pane_conditionalFormattingDisabled",10)}))}(jQuery)},57540:function(e,t,a){var n=a(4081),i=a(49138),r=a(21456),s=a(27255);a(29954),function(e){var t=_.compact(n(_).call(_,blist.datatypes,(function(t,a){return!e.isBlank(t.filterConditions)||_.some(t.subColumns,(function(t){return!e.isBlank(t.filterConditions)}))?a:null}))),a=function(t){return!e.isBlank(t)&&!_.isEmpty(this._view.columnForIdentifier(t).renderType.subColumns)},o=function(t){if(e.isBlank(t))return null;var a=this._view.columnForIdentifier(t),i=n(_).call(_,a.renderType.subColumns||{},(function(e){return{value:e.name,text:e.title}}));return _.isEmpty(i)?null:i},l=function(t){if(e.isBlank(t.tableColumnId))return null;var a=this._view.columnForIdentifier(t.tableColumnId).renderType;return e.subKeyDefined(a,"subColumns."+t.subColumn)&&(a=a.subColumns[t.subColumn]),e.isBlank(a.filterConditions)?null:n(_).call(_,a.filterConditions.orderedList,(function(e){return{value:e,text:a.filterConditions.details[e].text}}))},c=function(t,a,n){if(e.isBlank(a.tableColumnId)||e.isBlank(a.operator))return!1;var r=this._view.columnForIdentifier(a.tableColumnId),s=r.renderType;if(e.subKeyDefined(s,"subColumns."+a.subColumn)&&(s=s.subColumns[a.subColumn]),!e.subKeyDefined(s,"filterConditions.details."+a.operator)||s.filterConditions.details[a.operator].editorCount<1)return!1;var o=s.filterConditions.details[a.operator],l={dropDownList:r.dropDownList,baseUrl:r.baseUrl()},c=s.filterConditions.details[a.operator].interfaceType;return _.times(o.editorCount,(function(a){a>0&&t.append(e.tag({tagName:"span",class:["joiner",s.name],contents:"&amp;"}));var i=e.tag({tagName:"div",class:["editorWrapper",s.name]});i.blistEditor({type:s,editorInterface:c,row:null,value:_.isArray(n)?n[a]:n,format:r.format,customProperties:l}),t.append(i)})),t.toggleClass("twoEditors",2==o.editorCount),e.isBlank(e.uniform)||i(t).call(t,"select, :checkbox, :radio, :file").uniform(),!0},d=function(t){if(_.isEmpty(t.tableColumnId)||_.isEmpty(t.operator))return!1;var a=this._view.columnForIdentifier(t.tableColumnId).renderType;return e.subKeyDefined(a,"subColumns."+t.subColumn)&&(a=a.subColumns[t.subColumn]),!(!e.subKeyDefined(a,"filterConditions.details."+t.operator)||a.filterConditions.details[t.operator].editorCount<1)},u=function(t){var a=i(t).call(t,".editorWrapper");if(a.length<1)return null;var n=[];return a.each((function(){var t=e(this),a=t.blistEditor().currentValue();_.isNull(a)&&"checkbox"==t.blistEditor().type.name&&(a="0"),e.isBlank(a)||n.push(a)})),n.length<a.length?null:(1==n.length&&(n=n[0]),n)},p=function(t){i(t).call(t,".editorWrapper").each((function(){var t=e(this);t.isControlClass("blistEditor")&&t.blistEditor().finishEdit()}))},m={text:e.t("screens.ds.grid_sidebar.conditional_formatting.format_html"),type:"radioGroup",name:"conditionIndicator",defaultValue:"color",options:[{type:"color",required:!0,name:"color",defaultValue:"#bbffbb"},{type:"custom",required:!0,disabled:function(){return!this._parentView&&!r(_).call(_,this._view.metadata.availableDisplayTypes,"map")},editorCallbacks:{create:function(t,a,n){if(n&&t.append('<img src="'+n+'" /> '),t.parents(".radioLine").children(":disabled").length>0)return t.append(e.t("screens.ds.grid_sidebar.conditional_formatting.validation.no_icons")),!0;t.append("(<a>"+e.t("screens.ds.grid_sidebar.conditional_formatting.change_icon")+'</a>)<input type="hidden" name="'+t.attr("name")+'" value="'+n+'" />');var r=this._view.id;return i(t).call(t,"a").data("ajaxupload",new AjaxUpload(t,{action:"/api/views/"+r+"/files.txt",autoSubmit:!0,responseType:"json",onComplete:function(e,a){var n,s="/api/views/"+r+"/files/"+a.file,o=i(t).call(t,"img");0==o.length?t.prepend('<img src="'+s+'" /> '):o.attr("src",s),i(t).call(t,"input").attr("value",s),i(n=t.parents(".radioLine")).call(n,"input:radio").prop("checked",!0).click()}})),!0},value:function(e){return i(e).call(e,"img").attr("src")}},name:"icon"}]},f=function(t){var a=t._parentView&&t._view.id==t._parentView.id?"self":t._view.id;if(e.subKeyDefined(t._parentView,"metadata.conditionalFormatting."+a)){var n=e.extend(!0,{},t._view.metadata);n.conditionalFormatting=_.union(t._parentView.metadata.conditionalFormatting[a],"self"==a?[]:n.conditionalFormatting||[]),t._view.update({metadata:n})}};e.Control.extend("pane_conditionalFormatting",{setView:function(t){var a=this,n=a._super,i=function(e){n.call(a,e),a._view.bind("clear_temporary",(function(){a.reset()}),a),a._view.bind("conditionalformatting_change",(function(){a.reset()}),a),f(a)};e.subKeyDefined(t,"displayFormat.viewDefinitions")?(e.isBlank(a._parentView)||a._parentView.unbind(null,null,a),a._parentView=t,a._parentView.bind("clear_temporary",(function(){a.reset()}),a),a._parentView.bind("displayformat_change",(function(){a.setView(a._parentView),a.reset()}),a),a._parentView.bind("conditionalformatting_change",(function(){a.reset()}),a),"self"==t.displayFormat.viewDefinitions[0].uid?i(t):Dataset.lookupFromViewId(t.displayFormat.viewDefinitions[0].uid,i)):i(t)},getTitle:function(){return e.t("screens.ds.grid_sidebar.conditional_formatting.title")},getSubtitle:function(){return e.t("screens.ds.grid_sidebar.conditional_formatting.subtitle")},isAvailable:function(){return this._view.visibleColumns.length>0&&this._view.valid},getDisabledSubtitle:function(){return this._view.valid?e.t("screens.ds.grid_sidebar.conditional_formatting.validation.no_columns"):e.t("screens.ds.grid_sidebar.base.validation.invalid_view")},_getCurrentData:function(){return this._super()||this._view},_dataPreProcess:function(t){var a=e.extend(!0,{},t.metadata);return e.isPlainObject(a.conditionalFormatting)&&(a.conditionalFormatting=_.union.apply(this,s(_).call(_,a.conditionalFormatting))),_.each(a.conditionalFormatting||[],(function(e){if(!0===e.condition)e.condition={operator:"always"};else if(!_.isArray(e.condition.children)){var t={children:[e.condition],operator:"and"};e.condition=t}})),{metadata:a}},render:function(){f(this),this._super.apply(this,arguments)},_getSections:function(){return[{title:e.t("screens.ds.grid_sidebar.conditional_formatting.conditions.title"),fields:[{type:"repeater",minimum:0,addText:e.t("screens.ds.grid_sidebar.conditional_formatting.conditions.new_rule_button"),name:"metadata.conditionalFormatting",field:{type:"group",extraClass:"conditionGroup",options:[{type:"text",text:e.t("screens.ds.grid_sidebar.conditional_formatting.conditions.description"),name:"description",prompt:e.t("screens.ds.grid_sidebar.conditional_formatting.conditions.description_prompt")},m,{type:"select",text:e.t("screens.ds.grid_sidebar.conditional_formatting.conditions.when_title"),prompt:null,options:[{text:e.t("screens.ds.grid_sidebar.conditional_formatting.conditions.when.all"),value:"and"},{text:e.t("screens.ds.grid_sidebar.conditional_formatting.conditions.when.any"),value:"or"},{text:e.t("screens.ds.grid_sidebar.conditional_formatting.conditions.when.always"),value:"always"}],name:"condition.operator"},{type:"repeater",minimum:0,addText:e.t("screens.ds.grid_sidebar.conditional_formatting.conditions.new_condition_button"),name:"condition.children",onlyIf:{field:"condition.operator",value:"always",negate:!0},field:{type:"group",options:[{type:"columnSelect",text:e.t("screens.ds.grid_sidebar.conditional_formatting.conditions.item.title"),required:!0,name:"tableColumnId",isTableColumn:!0,columns:{type:t,hidden:!1}},{type:"select",name:"subColumn",linkedField:"tableColumnId",prompt:e.t("screens.ds.grid_sidebar.conditional_formatting.conditions.item.subcolumn"),onlyIf:{field:"tableColumnId",func:a},options:o},{type:"select",name:"operator",required:!0,linkedField:["tableColumnId","subColumn"],prompt:e.t("screens.ds.grid_sidebar.conditional_formatting.conditions.item.operator"),options:l},{type:"custom",required:!0,name:"value",linkedField:["tableColumnId","subColumn","operator"],editorCallbacks:{create:c,required:d,value:u,cleanup:p}}]}}]}}]}]},_getFinishButtons:function(){return[{text:e.t("core.dialogs.apply"),isDefault:!0,value:!0},e.controlPane.buttons.cancel]},_finish:function(t,a,n){var i=this;if(i._super.apply(i,arguments)){var r=i._getFormValues(),s=e.extend(!0,{},i._view.metadata);if(s.conditionalFormatting=(r.metadata||{}).conditionalFormatting,_.each(s.conditionalFormatting||[],(function(e){"always"==e.condition.operator?e.condition=!0:e.condition.hasOwnProperty("children")&&e.condition.children.length<2&&(e.condition=e.condition.children[0])})),i._view.update({metadata:s}),i._parentView){var o=e.extend(!0,{},i._parentView.metadata);o.conditionalFormatting=o.conditionalFormatting||{},o.conditionalFormatting[i._view.id==i._parentView.id?"self":i._view.id]=(i._view.metadata||{}).conditionalFormatting,i._parentView.update({metadata:o})}i._finishProcessing(),_.isFunction(n)&&n()}}},{name:"conditionalFormatting"},"controlPane"),e(document).ready((function(){_.get(window,"socrata.gridView.sidebarPaneVisibility.filter.conditionalFormatting",!1)&&e.gridSidebar.registerConfig("filter.conditionalFormatting","pane_conditionalFormatting",10)}))}(jQuery)},26327:function(e,t,a){var n=a(96110),i=a(7721),r=a(4081),s=a(49138);a(89041),a(42e3),a(79167),a(29954),function(e){e.Control.extend("pane_downloadDataset",{getTitle:function(){return e.t("screens.ds.grid_sidebar.download.title")},getSubtitle:function(){return e.t("screens.ds.grid_sidebar.download.subtitle")},isAvailable:function(){return this._view.valid},getDisabledSubtitle:function(){return e.t("screens.ds.grid_sidebar.base.validation.invalid_view")},_getSections:function(){var t,a,o,l,c=this,d=this._view,u=d.newBackend&&d.isLayered();function p(e){return!(blist.feature_flags.hide_csv_for_excel_download&&e.match(/^CSV for Excel/))}var m=this._view.getDownloadSets(),f=n(t=i(a=r(m).call(m,(function(t){return e.templates.downloadsTable.downloadSets[t]}))).call(a)).call(t,p),h=u?["tabular","geospatial"]:["tabular"],g=n(o=i(l=r(h).call(h,(function(t){return e.templates.downloadsTable.downloadSets[t]}))).call(l)).call(o,p),v=GeoHelpers.isGeoDataset(this._view),b=v?"possibly_layered":"never_layered";return[{customContent:{template:"downloadsSectionContent",directive:e.templates.downloadsTable.directive[b],data:{downloadTypes:f,layerDownloadTypes:g,view:this._view},callback:function(t){v?d.getChildOptionsForType("table",(function(a){var n,i=function(n){s(t).call(t,".layerDownloadsContent .item a").each((function(){var t=e(this),i=s(_).call(_,a,(function(e){return e.id==n}));t.attr("href",i.downloadUrl(t.data("type")))}))};(i(a[0].id),a.length>1)&&s(n=s(t).call(t,".layerTableDownloads")).call(n,".layerChooser").append(r(_).call(_,a,(function(t){return e.tag({tagName:"option",contents:t.name,"data-uid":t.id},!0)})).join("")).change((function(){var t;i(s(t=e(this)).call(t,"option:selected").data("uid"))})).end().addClass("hasChoices")})):s(t).call(t,".downloadsList .item a").downloadToFormCatcher(d,c.$dom()),e.templates.downloadsTable.postRender(t)}}}]}},{name:"downloadDataset"},"controlPane"),!e.isBlank(blist.sidebarHidden.exportSection)&&blist.sidebarHidden.exportSection.download||e.gridSidebar.registerConfig("export.downloadDataset","pane_downloadDataset",1)}(jQuery)},16239:function(e,t,a){var n=a(49138),i=a(4081);!function(e){var t=!1;e.Control.extend("pane_editColumnOrder",{_init:function(){var e=this;e._super.apply(e,arguments),e._view.bind("columns_changed",(function(){t||e.reset()}),e)},getTitle:function(){return e.t("screens.ds.grid_sidebar.column_order.title")},getSubtitle:function(){return e.t("screens.ds.grid_sidebar.column_order.subtitle")},isAvailable:function(){return this._view.valid&&(!this._view.temporary||this._view.minorChange)&&!_.isEmpty(this._view.visibleColumns)},getDisabledSubtitle:function(){return e.t("screens.ds.grid_sidebar.column_order.validation.valid_columns")},_getSections:function(){return[{title:e.t("screens.ds.grid_sidebar.column_order.columns.title"),customContent:{template:"columnOrderBlock",directive:{"li.columnItem":{"column<-":{".@data-columnId":"column.id",".name":"column.name!",".@class+":"column.renderTypeName"}}},data:this._view.visibleColumns}}]},shown:function(){var e;this._super(),n(e=this.$dom()).call(e,"ul.columnsList").awesomereorder()},_getFinishButtons:function(){return[e.controlPane.buttons.apply,e.controlPane.buttons.cancel]},_finish:function(e,a,r){var s,o=this;if(o._super.apply(o,arguments)){var l=n(s=o.$dom()).call(s,".columnsList"),c=i(_).call(_,_.sortBy(o._view.visibleColumns,(function(e){return l.children("[data-columnId="+e.id+"]").index()})),"id");t=!0,o._view.setVisibleColumns(c,(function(){o._finishProcessing(),o._hide(),t=!1,_.isFunction(r)&&r()}))}}},{name:"editColumnOrder"},"controlPane"),!e.isBlank(blist.sidebarHidden.edit)&&blist.sidebarHidden.edit.updateColumn||e.gridSidebar.registerConfig("edit.columnOrder","pane_editColumnOrder",2)}(jQuery)},33865:function(){!function(e){e.Control.extend("pane_editColumn",{isAvailable:function(){return this._view.valid&&(!this._view.temporary||this._view.minorChange)},getTitle:function(){return e.t("screens.ds.grid_sidebar.edit_column.title")},getSubtitle:function(){return e.t("screens.ds.grid_sidebar.edit_column.subtitle")},getDisabledSubtitle:function(){return""},_getSections:function(){return[]},_getFinishButtons:function(){return[]},_finish:function(){}},{name:"editColumn"},"controlPane"),!e.isBlank(blist.sidebarHidden.edit)&&blist.sidebarHidden.edit.editColumn||e.gridSidebar.registerConfig("edit.editColumn","pane_editColumn",3)}(jQuery)},60112:function(){!function(e){e.Control.extend("pane_editRedirect",{getTitle:function(){return e.t("controls.common.sidebar.tabs.edit")},_getSections:function(){return[{customContent:{callback:function(e){e.append(blist.datasetControls.editPublishedMessage())}}}]}},{name:"edit"},"controlPane"),e.isBlank(blist.sidebarHidden.edit)||blist.sidebarHidden.edit.redirect||e.gridSidebar.registerConfig("edit","pane_editRedirect")}(jQuery)},57562:function(e,t,a){var n=a(49138);!function(e){e.Control.extend("pane_embedSdp",{getTitle:function(){return e.t("screens.ds.grid_sidebar.sdp.title")},getSubtitle:function(){return e.t("screens.ds.grid_sidebar.sdp.subtitle")},isAvailable:function(){return this._view.valid&&(!this._view.temporary||this._view.minorChange)},getDisabledSubtitle:function(){return!this._view.valid||this._view.temporary&&!this._view.minorChange?e.t("screens.ds.grid_sidebar.sdp.validation.valid_saved"):e.t("screens.ds.grid_sidebar.sdp.validation.public")},_getSections:function(){var t=this;return[{customContent:{template:"embedForm",directive:{},data:{},callback:function(a){n(a).call(a,".privateDatasetMessage").toggleClass("hide",t._view.isPublic()),a.embedForm({invalidCallback:function(){var e;n(e=a.closest(".paneContent")).call(e,".button[data-value=preview]").addClass("disabled")},validCallback:function(){var e;n(e=a.closest(".paneContent")).call(e,".button[data-value=preview]").removeClass("disabled")}});var i=n(a).call(a,"#form_code").text();n(a).call(a,"#form_code").text(e.htmlUnescape(i))}}}]},_getFinishButtons:function(){return[e.controlPane.buttons.done,{text:e.t("screens.ds.grid_sidebar.sdp.preview"),value:"preview",isDefault:!1}]},_finish:function(e,t,a){var i,r,s=this;if(s._super.apply(s,arguments)){s._finishProcessing();var o=n(i=s.$dom()).call(i,".embedForm.commonForm");if("preview"==t&&!n(r=s.$dom()).call(r,".button[data-value=preview]").hasClass("disabled")){var l=n(o).call(o,"#embed_width").val(),c=n(o).call(o,"#embed_height").val(),d=n(o).call(o,"#embed_template").val()||"";window.open(s._view.url+"/widget_preview?width="+l+"&height="+c+"&customization_id="+d,"Preview")}_.isFunction(a)&&a()}}},{name:"embedSdp",noReset:!0},"controlPane"),!e.isBlank(blist.sidebarHidden.embed)&&blist.sidebarHidden.embed.sdp||e.gridSidebar.registerConfig("embed.embedSdp","pane_embedSdp",1)}(jQuery)},90667:function(e,t,a){var n=a(49138),i=a(17933);!function(e){e.Control.extend("pane_feed",{getTitle:function(){return e.t("screens.ds.grid_sidebar.feed.title")},getSubtitle:function(){var t=e.t("screens.ds.grid_sidebar.feed.subtitle");return!0===window.blist.feature_flags.remove_views_from_discuss_pane&&(t=e.t("screens.ds.grid_sidebar.feed.route_to_more_views_subtitle")),t},_getSections:function(){return[{customContent:{template:"feedList",directive:{},data:{},callback:function(){var t,a=this;a._startProcessing();var r,s,o=[],l=a._view;function c(){var i;a._finishProcessing(),n(i=a.$dom()).call(i,".feedList .feed").feedList({comments:t,mainView:l,views:o,addCommentCallback:function(t){e(".controlPane.about .numberOfComments").text(t.numberOfComments),e.isBlank(blist.datasetPage)||blist.datasetPage.$feedTab.contentIndicator().setText(t.numberOfComments)}})}function d(e){l.getComments((function(a){t=a,e()}))}function u(t){l.getParentDataset((function(a){e.isBlank(a)||(o=i(o).call(o,a)),t()}))}!0===window.blist.feature_flags.remove_views_from_discuss_pane?(r=_.after(2,c),d(r),u(r)):(r=_.after(3,c),d(r),u(r),s=r,l.getRelatedViews((function(e){o=i(o).call(o,e),s()})))}}}]}},{name:"feed",noReset:!0},"controlPane"),!e.isBlank(blist.sidebarHidden.feed)&&blist.sidebarHidden.feed.discuss||e.gridSidebar.registerConfig("feed","pane_feed")}(jQuery)},50992:function(){!function(e){e.Control.extend("pane_filterDisabled",{isAvailable:function(){return!0},getTitle:function(){return e.t("screens.ds.grid_sidebar.filter_disabled.title")},getSubtitle:function(){return e.t("screens.ds.grid_sidebar.filter_disabled.subtitle")},getDisabledSubtitle:function(){return""},_getSections:function(){return[]},_getFinishButtons:function(){return[]},_finish:function(){}},{name:"filterDisabled"},"controlPane"),e(document).ready((function(){_.get(window,"socrata.gridView.sidebarPaneVisibility.filter.filterDisabled",!1)&&e.gridSidebar.registerConfig("filter.filterDisabled","pane_filterDisabled",1)}))}(jQuery)},4459:function(e,t,a){"use strict";var n=a(47858),i=a.n(n),r=a(96110),s=a.n(r),o=a(49138),l=a.n(o),c=a(21456),d=a.n(c),u=(a(44174),a(29954),a(65311)),p=a.n(u),m=a(901),f=a(70316),h="screens.ds.grid_sidebar";p().Control.extend("pane_formCreate",{isAvailable:function(){var e=this;return!_.isEmpty(e._view.visibleColumns)&&(e._view.valid||g(e))},_getCurrentData:function(){var e=this._super();if(!p().isBlank(e))return e;if(!g(this))return null;var t=this._view.cleanCopy();return t.flags=i()(t)||[],this._view.isPublic()&&i()(t).push("dataPublicAdd"),t},getTitle:function(){return f.ZP.t("form.title",{scope:h})},getSubtitle:function(){return f.ZP.t("form.subtitle",{scope:h})},getDisabledSubtitle:function(){return this._view.valid?f.ZP.t("form.validation.no_columns",{scope:h}):f.ZP.t("base.validation.invalid_view",{scope:h})},_getSections:function(){return[{title:f.ZP.t("form.information.title",{scope:h}),fields:[{type:"text",text:f.ZP.t("form.information.name",{scope:h}),name:"name",required:!0,prompt:f.ZP.t("form.information.name_prompt",{scope:h})},{type:"text",text:f.ZP.t("form.information.success",{scope:h}),name:"displayFormat.successRedirect",extraClass:"url",prompt:f.ZP.t("form.information.success_prompt",{scope:h})},{type:"checkbox",text:f.ZP.t("form.information.public",{scope:h}),name:"flags.dataPublicAdd",defaultValue:!0}]}]},_getFinishButtons:function(){return[g(this)?p().controlPane.buttons.update:p().controlPane.buttons.create,p().controlPane.buttons.cancel]},_finish:function(e,t,a){var n=this;if(n._super.apply(this,arguments)){var r=p().extend(!0,{displayFormat:null,displayType:"form",metadata:{}},n._getFormValues(),{metadata:n._view.metadata});r.metadata.renderTypeConfig.visible={form:!0};var o,c=v(r);if(c)r.flags=s()(o=i()(r)).call(o,(function(e){return"dataPublicAdd"!==e}));var d=g(n);if(r.metadata.availableDisplayTypes=["form"],n._view.update(r),d){var u=function(){n._view.save((function(e){if(n._finishProcessing(),!p().isBlank(n.settings.renderTypeManager)){var t,i=l()(t=n.settings.renderTypeManager.$domForType("form")).call(t,"form.formView"),r=e.displayFormat.successRedirect;p().isBlank(r)&&(r=i.attr("data-defaultSuccessRedirect"));var s=i.attr("action");s=p().urlParam(s,"successRedirect",escape(r)),i.attr("action",s)}p()(".currentViewName").text(e.name),n._showMessage("Your form has been updated"),n._hide(),_.isFunction(a)&&a()}))};u()}else{var m,f=_.after(2,(function(){n._finishProcessing(),_.isFunction(a)&&a(),m.redirectTo()}));n._view.getParentDataset((function(e){e.publicationAppendEnabled?f():(e.update({publicationAppendEnabled:!0}),e.save(f,(function(e){n._genericErrorHandler(e)}),{publicationAppendEnabled:!0}))})),n._view.saveNew((function(e){m=e,c&&window.sessionStorage.setItem("dataPublicAdd",m.id),f()}),(function(e){n._genericErrorHandler(e)}))}}}},{name:"formCreate"},"controlPane");var g=function(e){return"form"==e._view.type},v=function(e){return d()(_).call(_,i()(e)||[],"dataPublicAdd")||_.some(e.grants||[],(function(e){return"contributor"==e.type&&d()(_).call(_,i()(e)||[],"public")}))};!m.ZP.value("enable_form_creation")||!p().isBlank(blist.sidebarHidden.embed)&&blist.sidebarHidden.embed.formCreate||p().gridSidebar.registerConfig("embed.formCreate","pane_formCreate",5,"form")},30890:function(e,t,a){"use strict";a(29954);var n=a(4081),i=a.n(n),r=a(21456),s=a.n(r),o=a(49138),l=a.n(o),c=a(65075),d=a.n(c),u=a(95599),p=a.n(u);a(73505);!function(e){var t=blist.namespace.fetch("blist.configs.map"),a=i()(_).call(_,i()(_).call(_,i()(Dataset).backgroundLayers,"key"),(function(e){return{text:e,value:e}})),n=[{text:e.t("screens.ds.grid_sidebar.map.regions.countries"),value:"countries"},{text:e.t("screens.ds.grid_sidebar.map.regions.state"),value:"state"},{text:e.t("screens.ds.grid_sidebar.map.regions.canada_provinces"),value:"canada_provinces"},{text:e.t("screens.ds.grid_sidebar.map.regions.counties"),value:"counties"}],r=function(){return[{text:e.t("screens.ds.grid_sidebar.map.plots.point"),value:"point"},{text:e.t("screens.ds.grid_sidebar.map.plots.heatmap"),value:"heatmap"},{text:e.t("screens.ds.grid_sidebar.map.plots.rastermap"),value:"rastermap"}]},o=function(t){return e.isBlank(t)||_.isString(t)&&"counties"!=t||!s()(_).call(_,t,"counties")?null:[{value:"ak",text:"Alaska"},{value:"al",text:"Alabama"},{value:"ar",text:"Arkansas"},{value:"az",text:"Arizona"},{value:"ca",text:"California"},{value:"co",text:"Colorado"},{value:"ct",text:"Connecticut"},{value:"de",text:"Delaware"},{value:"fl",text:"Florida"},{value:"ga",text:"Georgia"},{value:"hi",text:"Hawaii"},{value:"ia",text:"Iowa"},{value:"id",text:"Idaho"},{value:"il",text:"Illinois"},{value:"in",text:"Indiana"},{value:"ks",text:"Kansas"},{value:"ky",text:"Kentucky"},{value:"la",text:"Louisiana"},{value:"ma",text:"Massachusetts"},{value:"md",text:"Maryland"},{value:"me",text:"Maine"},{value:"mi",text:"Michigan"},{value:"mn",text:"Minnesota"},{value:"mo",text:"Missouri"},{value:"ms",text:"Mississippi"},{value:"mt",text:"Montana"},{value:"nc",text:"North Carolina"},{value:"nd",text:"North Dakota"},{value:"ne",text:"Nebraska"},{value:"nh",text:"New Hampshire"},{value:"nj",text:"New Jersey"},{value:"nm",text:"New Mexico"},{value:"nv",text:"Nevada"},{value:"ny",text:"New York"},{value:"oh",text:"Ohio"},{value:"ok",text:"Oklahoma"},{value:"or",text:"Oregon"},{value:"pa",text:"Pennsylvania"},{value:"ri",text:"Rhode Island"},{value:"sc",text:"South Carolina"},{value:"sd",text:"South Dakota"},{value:"tn",text:"Tennessee"},{value:"tx",text:"Texas"},{value:"ut",text:"Utah"},{value:"va",text:"Virginia"},{value:"vt",text:"Vermont"},{value:"wa",text:"Washington"},{value:"wi",text:"Wisconsin"},{value:"wv",text:"West Virginia"},{value:"wy",text:"Wyoming"}]},c=function(t){return!e.isBlank(t.view)&&t.view.displayFormat.heatmap&&"custom"==t.view.displayFormat.heatmap.type},u=function(t){return e('<span class="error">'+t+"</span>").css({marginLeft:0,paddingLeft:0})},m=function(t,a,n){var i=this;blist.common.selectedDataset=function(a){i._expectingCancel=!1,e("#selectDataset").jqmHide(),i._$selectedField.data("uid",a.id);Dataset.lookupFromViewId(a.id,(function(t){var a=c(t);i._$selectedField.makeStatic(t.name,!a),a&&f.call(i,t,i._$selectedField),e(".mapCreate .finishButtons .submit").removeClass("disabled")}),(function(){var a=e.t("screens.ds.grid_sidebar.map.validation.location_column_invalid_dataset"),n=u(a);t.append(n),e(".mapCreate .finishButtons .submit").addClass("disabled")}))};var r,o=function(a){a&&a.preventDefault(),i._$selectedField=t,e("#selectDataset").jqmShow(),i._expectingCancel=!0},c=function(e){return GeoHelpers.isArcGISOrGeoDataset(e)||_.some(e.realColumns,(function(e){return s()(_).call(_,["location","point"],e.renderTypeName)}))};if(t.makeStatic=function(a,n,i){if(t.empty(),t.data("dsName",a),t.append("<span>"+e.htmlEscape(a)+(i?"":' (<span class="edit">'+e.t("screens.ds.grid_sidebar.map.layers.edit")+"</span>)")+"</span>"),l()(t).call(t,"span.edit").on("click",o).css({cursor:"pointer",color:"#0000ff"}),n){var r=e.t("screens.ds.grid_sidebar.map.validation.location_column"),s=u(r);t.append(s)}},e.isBlank(n))o(),i._selectingEmpty=!0;else{t.data("uid",n);var d=function(e){var a=c(e);t.makeStatic(e.name,!a,i._view.id==e.id),a&&f.call(i,e,t)};"self"==n?d(i._view):Dataset.lookupFromViewId(n,d)}t.data("hookedCleanupEvent")||(l()(r=t.parents(".line.group")).call(r,".removeLink").on("click",(function(){f.call(i,null,t)})),t.data("hookedCleanupEvent",!0),e(document).on(blist.events.MODAL_HIDDEN,(function(){var e;i._expectingCancel&&(i._$selectedField.makeStatic(i._$selectedField.data("dsName")),i._expectingCancel=!1,i._selectingEmpty&&(l()(e=i._$selectedField.parents(".line.group")).call(e,".removeLink").trigger("click"),delete i._selectingEmpty))})));return!0},f=function(t,a){var n,i=this,r=a.parents(".repeater").children(".line.group").index(a.parents(".line.group"));if(!t){var s,o;if(i.childPanes.length<=r)return;return d()(s=i.childPanes).call(s,r,1)[0].$dom().remove(),void _.each(p()(o=i.childPanes).call(o,r),(function(e,t){e.setIndex(r+t)}))}var c=function(e){var t,n,s=l()(t=i.$dom()).call(t,".dataLayerContainer");0==s.length&&(a.parents(".formSection").after('<div class="dataLayerContainer" />'),s=l()(n=i.$dom()).call(n,".dataLayerContainer"));s.children().length<=r?s.append(e.$dom()):l()(s).call(s,"> div:eq("+r+")").before(e.$dom())},u=i.childPanes[r];if(u)i._childrenDirty&&0==u.$dom().parents(".controlPane").length&&c(u),u.setView(t),u.reset();else{var m=e.extend(!0,{},i._view.displayFormat);e.subKeyDefined(m,"viewDefinitions.0.uid")||e.deepSet(m,e.extend(!0,{},t.displayFormat),"viewDefinitions",r),c(u=i.childPanes[r]=e("<div />").pane_mapDataLayerCreate({data:{displayFormat:m},parent:i,view:t,index:r})),u.render()}l()(n=u.$dom()).call(n,"div.required").remove()};t.config=function(t){var n=[];return(t=e.extend({isEdit:!1,useOtherSidebars:!1},t)).canvas||n.push({title:e.t("screens.ds.grid_sidebar.map.layers.title"),fields:[{type:"repeater",name:"displayFormat.viewDefinitions",addText:e.t("screens.ds.grid_sidebar.map.layers.new_data_button"),field:{type:"group",options:[{text:e.t("screens.ds.grid_sidebar.map.layers.dataset"),type:"custom",name:"uid",required:!0,defaultValue:"self",repeaterValue:"",editorCallbacks:{create:m,value:function(e){return e.data("uid")}}}]},minimum:1}]}),n.push({title:e.t("screens.ds.grid_sidebar.map.base_layers.title"),fields:[{type:"note",value:e.t("screens.ds.grid_sidebar.map.base_layers.subtitle")},{type:"repeater",name:"displayFormat.bkgdLayers",addText:e.t("screens.ds.grid_sidebar.map.base_layers.new_base_map_button"),minimum:0,field:{type:"group",options:[{text:e.t("screens.ds.grid_sidebar.map.base_layers.layer"),type:"select",name:"layerKey",required:!0,prompt:e.t("screens.ds.grid_sidebar.map.base_layers.layer_prompt"),options:a,defaultValue:"World Street Map (ESRI)"},{text:e.t("screens.ds.grid_sidebar.map.base_layers.alias"),type:"text",name:"alias"},{text:e.t("screens.ds.grid_sidebar.map.base_layers.opacity"),type:"slider",name:"opacity",defaultValue:1,minimum:0,maximum:1}]}}]},{title:e.t("screens.ds.grid_sidebar.map.advanced.title"),fields:[{type:"note",value:e.t("screens.ds.grid_sidebar.map.advanced.subtitle")},{text:e.t("screens.ds.grid_sidebar.map.advanced.exclusive"),name:"displayFormat.exclusiveLayers",type:"checkbox"},{text:e.t("screens.ds.grid_sidebar.map.advanced.hide_geolocator"),name:"displayFormat.disableGeolocator",type:"checkbox"}]},{title:e.t("screens.ds.grid_sidebar.map.legend.title"),type:"selectable",fields:[{text:e.t("screens.ds.grid_sidebar.map.legend.position"),type:"select",prompt:e.t("screens.ds.grid_sidebar.map.legend.position_prompt"),defaultValue:"bottom",name:"displayFormat.legendDetails.position",options:[{text:e.t("screens.ds.grid_sidebar.map.legend.positions.top_right"),value:"topRight"},{text:e.t("screens.ds.grid_sidebar.map.legend.positions.bottom_left"),value:"bottomLeft"},{text:e.t("screens.ds.grid_sidebar.map.legend.positions.none"),value:"none"}]},{text:e.t("screens.ds.grid_sidebar.map.legend.conditional_formats"),type:"checkbox",inputFirst:!0,name:"displayFormat.legendDetails.showConditional",defaultValue:!0,lineClass:"advLegendCheck"},{type:"repeater",minimum:0,initialRepeatCount:0,addText:e.t("screens.ds.grid_sidebar.map.legend.custom_entry"),name:"displayFormat.legendDetails.customEntries",field:{type:"group",options:[{type:"color",name:"color",defaultValue:blist.defaultColors,lineClass:"colorCollapse"},{text:e.t("screens.ds.grid_sidebar.map.legend.entry_label"),type:"text",name:"label",required:!0}]}}]}),n},t.dataLayer={},t.dataLayer.socrataBase=function(t){var a=t.prefix||"displayFormat.",i={field:a+"plotStyle",value:"heatmap"};return[{text:e.t("screens.ds.grid_sidebar.map.data_layer.alias"),type:"text",name:a+"alias",prompt:e.t("screens.ds.grid_sidebar.map.data_layer.alias_prompt")},{text:e.t("screens.ds.grid_sidebar.map.data_layer.plot_style"),type:"select",name:a+"plotStyle",options:r,required:!0,prompt:e.t("screens.ds.grid_sidebar.map.data_layer.plot_style")},{text:e.t("screens.ds.grid_sidebar.map.data_layer.location"),name:a+"plot.locationId",type:"columnSelect",isTableColumn:!0,required:!0,columns:{type:["location","point"],hidden:t.isEdit}},{text:e.t("screens.ds.grid_sidebar.map.data_layer.region"),name:a+"heatmap.type",type:"select",onlyIf:i,required:!c(t),prompt:e.t("screens.ds.grid_sidebar.map.data_layer.region_level_prompt"),options:n},{text:"",name:a+"heatmap.region",type:"select",onlyIf:i,required:!0,prompt:e.t("screens.ds.grid_sidebar.map.data_layer.region_prompt"),linkedField:a+"heatmap.type",options:o}]},t.dataLayer.socrata=function(t){var a=t.prefix||"displayFormat.",n={field:a+"plotStyle",value:"point"},i={field:a+"plotStyle",value:"rastermap",negate:!0},r={field:a+"plotStyle",value:"heatmap"};return[{text:e.t("screens.ds.grid_sidebar.map.data_layer.base_color"),name:a+"color",type:"color",onlyIf:n,defaultValue:"#0000ff"},{text:e.t("screens.ds.grid_sidebar.map.data_layer.highlight_color"),name:a+"highlightColor",type:"color",onlyIf:n,defaultValue:"#ddeaf0"},{type:"note",value:e.t("screens.ds.grid_sidebar.map.data_layer.point"),onlyIf:n},{text:e.t("screens.ds.grid_sidebar.map.data_layer.point_size"),name:a+"plot.sizeValueId",onlyIf:n,type:"columnSelect",isTableColumn:!0,columns:{type:["number","money","percent"],noDefault:!0,hidden:t.isEdit}},{text:e.t("screens.ds.grid_sidebar.map.data_layer.point_color"),name:a+"plot.colorValueId",onlyIf:n,type:"columnSelect",isTableColumn:!0,columns:{type:["number","money","percent"],noDefault:!0,hidden:t.isEdit}},{text:e.t("screens.ds.grid_sidebar.map.data_layer.icon"),name:a+"plot.iconId",onlyIf:n,type:"columnSelect",isTableColumn:!0,columns:{type:["photo","url"],noDefault:!0,hidden:t.isEdit}},{type:"color",text:e.t("screens.ds.grid_sidebar.map.data_layer.color_low"),defaultValue:["#c9c9c9"],onlyIf:r,name:a+"heatmap.colors.low"},{type:"color",defaultValue:["#00ff00"],text:e.t("screens.ds.grid_sidebar.map.data_layer.color_high"),onlyIf:r,name:a+"heatmap.colors.high"},{text:e.t("screens.ds.grid_sidebar.map.data_layer.quantity"),name:a+"plot.quantityId",onlyIf:r,type:"columnSelect",isTableColumn:!0,columns:{type:["number","money","percent"],noDefault:!0,hidden:t.isEdit}},{type:"note",value:e.t("screens.ds.grid_sidebar.map.data_layer.flyout.title"),onlyIf:i},{text:e.t("screens.ds.grid_sidebar.map.data_layer.flyout.title_column"),name:a+"plot.titleId",onlyIf:i,type:"columnSelect",isTableColumn:!0,columns:{type:["text","location","html","url","drop_down_list","dataset_link","email","percent","stars","flag","phone","money","data","calendar_date","number"],hidden:t.isEdit,defaultNames:["title"]}},{type:"repeater",name:a+"plot.descriptionColumns",onlyIf:i,field:{text:e.t("screens.ds.grid_sidebar.map.data_layer.flyout.details"),name:"tableColumnId",type:"columnSelect",isTableColumn:!0,columns:{hidden:t.isEdit}},minimum:1,addText:e.t("screens.ds.grid_sidebar.map.data_layer.flyout.new_details_button")},{text:e.t("screens.ds.grid_sidebar.map.data_layer.flyout.labels"),type:"checkbox",name:a+"flyoutsNoLabel",onlyIf:i},{text:e.t("screens.ds.grid_sidebar.map.data_layer.flyout.opacity"),type:"slider",name:a+"opacity",defaultValue:1,minimum:0,maximum:1}]},t.dataLayer.mondara=function(t){var a=t.prefix||"displayFormat.";return[{text:e.t("screens.ds.grid_sidebar.map.data_layer.alias"),type:"text",name:a+"alias",prompt:e.t("screens.ds.grid_sidebar.map.data_layer.alias_prompt")},{text:e.t("screens.ds.grid_sidebar.map.data_layer.opacity"),type:"slider",name:a+"opacity",defaultValue:1,minimum:0,maximum:1},{type:"note",value:e.t("screens.ds.grid_sidebar.map.data_layer.mondara_note")}]},t.dataLayer.esri=function(t){var a=t.prefix;return[{text:e.t("screens.ds.grid_sidebar.map.data_layer.alias"),type:"text",name:a+"alias",prompt:e.t("screens.ds.grid_sidebar.map.data_layer.alias_prompt")},{text:e.t("screens.ds.grid_sidebar.map.data_layer.flyout.title_column"),name:a+"plot.titleId",type:"columnSelect",isTableColumn:!0,columns:{type:["text","location","html","url","drop_down_list","dataset_link","email","percent","stars","flag","phone","money","data","calendar_date","number"],hidden:t.isEdit,defaultNames:["title"]}},{type:"repeater",name:a+"plot.descriptionColumns",field:{text:e.t("screens.ds.grid_sidebar.map.data_layer.flyout.details"),name:"tableColumnId",type:"columnSelect",isTableColumn:!0,columns:{hidden:t.isEdit}},minimum:1,addText:e.t("screens.ds.grid_sidebar.map.data_layer.flyout.new_details_button")},{text:e.t("screens.ds.grid_sidebar.map.data_layer.flyout.labels"),type:"checkbox",name:a+"flyoutsNoLabel"},{text:e.t("screens.ds.grid_sidebar.map.data_layer.flyout.opacity"),type:"slider",name:a+"opacity",defaultValue:1,minimum:0,maximum:1}]}}(jQuery)},26741:function(e,t,a){var n=a(4081),i=a(21456);a(29954),function(e){e.Control.extend("pane_mapCreate",{_init:function(){var t=this;t._super.apply(t,arguments),"map"!=t._view.type||e.subKeyDefined(t._view,"displayFormat.viewDefinitions")||n(Dataset).convertToVersion2(t._view),e.subKeyDefined(t._view,"displayFormat.bkgdLayers")&&(t._view.displayFormat.bkgdLayers=n(_).call(_,t._view.displayFormat.bkgdLayers,(function(e){return e.layerKey||(e.layerKey=e.layerName,delete e.layerName),e})));var a=function(){t.childPanes=[],t.reset()};t._view.bind("clear_temporary",a,t),t._view.bind("displayformat_change",a,t),t.$dom().on("click",".showConditionalFormatting",(function(t){t.preventDefault(),e.subKeyDefined(blist,"datasetPage.sidebar")&&blist.datasetPage.sidebar.show("visualize.conditionalFormatting")})),t.$dom().on("click",".clearConditionalFormatting",(function(a){a.preventDefault();var n=e.extend(!0,{},t._view.metadata);delete n.conditionalFormatting,t._view.update({metadata:n})})),t.$dom().on("click",".sectionDisabledMessage a",(function(a){if(a.preventDefault(),e.subKeyDefined(blist,"datasetPage.sidebar")){var n={dataTypeName:"location",convert:{}},i=!1;switch(e.hashHref(e(this).attr("href"))){case"convertLatLong":n.convert.latitudeColumn=!0;break;case"convertLoc":n.convert.addressColumn=!0;break;case"showLoc":i=!0}t._view.once("columns_changed",(function(){sectionOnlyIf.func.call(t)&&_.defer((function(){t.show()}))})),i||blist.datasetPage.sidebar.show("edit.addColumn",n)}})),t.childPanes=[]},getTitle:function(){return e.t("screens.ds.grid_sidebar.map.title")},getSubtitle:function(){return e.t("screens.ds.grid_sidebar.map.subtitle")},_getCurrentData:function(){return this._super()||this._view},_dataPreProcess:function(e){var t=e.cleanCopy();return t.displayFormat.layers||(t.displayFormat.layers=[{type:"tile",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]),t},isAvailable:function(){return(this._view.valid||t(this))&&(i(_).call(_,this._view.metadata.availableDisplayTypes,"map")||this._view.shouldShowViewCreationOptions())},getDisabledSubtitle:function(){return this._view.valid||t(this)?e.t("screens.ds.grid_sidebar.map.validation.viz_limit"):e.t("screens.ds.grid_sidebar.base.validation.invalid_view")},_getSections:function(){return n(blist.configs).config({view:this._view,isEdit:t(this),useOtherSidebars:!0})},render:function(){this._super(),this._childrenDirty=!0},_getFinishButtons:function(){return[e.controlPane.buttons.apply,e.controlPane.buttons.cancel]},_finish:function(a,i,r){var s=this;if(s._super.apply(s,arguments)){var o=e.extend(!0,{metadata:{renderTypeConfig:{visible:{map:!0}}}},s._getFormValues(),{metadata:s._view.metadata});_.each(s.childPanes,(function(t){var a=t._index;o.displayFormat.viewDefinitions[a]=e.extend(!0,{},t._finish()),e.subKeyDefined(t,"_view.displayFormat.heatmap.type")&&"custom"==t._view.displayFormat.heatmap.type&&(o.displayFormat.viewDefinitions[a].heatmap.type="custom",o.displayFormat.viewDefinitions[a].heatmap.cache_url=t._view.displayFormat.heatmap.cache_url)})),_.each(["viewport","compositeMembers","overrideWithLayerSet"],(function(e){_.isUndefined(s._view.displayFormat.viewport)||(o.displayFormat[e]=s._view.displayFormat[e])})),s._view.update(o);var l=!1;if(!s._view.isDefault()&&t(s)){var c=n(_).call(_,s._view.realColumns,"id");c.length>0&&(s._view.setVisibleColumns(c,r,!0),l=!0)}s._finishProcessing(),s.reset(),!l&&_.isFunction(r)&&r()}}},{name:"mapCreate"},"controlPane");var t=function(e){return i(_).call(_,e._view.metadata.availableDisplayTypes,"map")};!e.isBlank(blist.sidebarHidden.visualize)&&blist.sidebarHidden.visualize.mapCreate||e.gridSidebar.registerConfig("visualize.mapCreate","pane_mapCreate",3,"map"),e.Control.extend("pane_mapDataLayerCreate",{_init:function(){var e=this;e._super.apply(e,arguments),e._view.bind("clear_temporary",(function(){e.reset()}),e),e._view.bind("displayformat_change",(function(){e.reset()}),e),e._index=e.settings.index,e._uid=e.settings.parent._view.id==e._view.id?"self":e._view.id,e._origDF=e._getCurrentData().displayFormat.viewDefinitions[e._index]},_getSections:function(){var t=[],a=e.htmlEscape(this._view.name)+("self"!=this._uid?"<br />("+this._uid+")":"");return"socrata"==this._dataType?(t.push({title:e.t("screens.ds.grid_sidebar.map.layers.config",{name:a}),fields:n(blist.configs).dataLayer.socrataBase({prefix:"displayFormat.viewDefinitions."+this._index+".",view:this._view})}),t.push({title:e.t("screens.ds.grid_sidebar.map.layers.advanced",{name:a}),name:this._view.id+"_details",type:"selectable",fields:n(blist.configs).dataLayer.socrata({prefix:"displayFormat.viewDefinitions."+this._index+".",view:this._view})})):t.push({title:e.t("screens.ds.grid_sidebar.map.layers.config",{name:a}),fields:n(blist.configs).dataLayer[this._dataType]({prefix:"displayFormat.viewDefinitions."+this._index+".",view:this._view})}),t},setView:function(t){var a=this,n=a._view;a._super(t),a._getCurrentData().displayFormat.viewDefinitions||(a._getCurrentData().displayFormat.viewDefinitions=[]),n&&n.id==t.id?a._getCurrentData().displayFormat.viewDefinitions[a._index]=a._origDF:a._getCurrentData().displayFormat.viewDefinitions[a._index]={},e.subKeyDefined(a._view.metadata,"custom_fields.Basic.Source")?a._dataType="esri":e.subKeyDefined(a._view.metadata,"geo")?a._dataType="mondara":a._dataType="socrata",a._uid=a.settings.parent._view.id==a._view.id?"self":a._view.id},setIndex:function(e){this._index=e},_finish:function(){var t=this,a=t._getFormValues();return a=e.subKeyDefined(a,"displayFormat.viewDefinitions.0")?a.displayFormat.viewDefinitions[0]:null,t.settings.data.displayFormat.viewDefinitions[t._index]=t._origDF=e.extend(!0,{uid:t._uid},a)}},{name:"mapDataLayerCreate"},"controlPane")}(jQuery)},14813:function(){!function(e){e.Control.extend("pane_odata",{getTitle:function(){return e.t("screens.ds.grid_sidebar.odata.title")},getSubtitle:function(){return e.t("screens.ds.grid_sidebar.odata.subtitle",{view_type:this._view.displayName})},_getSections:function(){return[{customContent:{template:"odataContentWrapper",directive:{".odataIntroWrapper@class+":"pClass"},data:{pClass:"sectionContent"}}}]}},{name:"odata"},"controlPane"),!e.isBlank(blist.sidebarHidden.exportSection)&&blist.sidebarHidden.exportSection.odata||e.gridSidebar.registerConfig("export.odata","pane_odata",9)}(jQuery)},88213:function(e,t,a){var n=a(49138);!function(e){e.Control.extend("pane_printDataset",{getTitle:function(){return e.t("screens.ds.grid_sidebar.print.title")},getSubtitle:function(){return e.t("screens.ds.grid_sidebar.print.subtitle")},isAvailable:function(){return this._view.isGrid()&&this._view.valid},getDisabledSubtitle:function(){return this._view.valid?e.t("screens.ds.grid_sidebar.print.validation.non_tabular"):e.t("screens.ds.grid_sidebar.base.validation.invalid_view")},_getSections:function(){var e=this;return[{customContent:{template:"printForm",directive:{},data:{},callback:function(t){blist.namespace.fetch("blist.common"),t.closest("form").data("dataset",e._view).attr("target","_blank").submit(blist.common.formInliner).attr("method","post").attr("action","/views/INLINE/rows.pdf")}}}]},_getFinishButtons:function(){return[{text:e.t("screens.ds.grid_sidebar.print.print_button"),value:"print",isDefault:!0},e.controlPane.buttons.cancel]},_finish:function(e,t,a){var i;"print"===t&&n(i=this.$dom()).call(i,".printForm").closest("form").submit();this._finishProcessing(),this._hide(),_.isFunction(a)&&a()}},{name:"printDataset",noReset:!0},"controlPane"),!e.isBlank(blist.sidebarHidden.exportSection)&&blist.sidebarHidden.exportSection.print||e.gridSidebar.registerConfig("export.printDataset","pane_printDataset",5)}(jQuery)},11064:function(){!function(e){e.Control.extend("pane_queryEditorDisabled",{isAvailable:function(){return!0},getTitle:function(){return e.t("screens.ds.grid_sidebar.query_editor_disabled.title")},getSubtitle:function(){return e.t("screens.ds.grid_sidebar.query_editor_disabled.subtitle")},getDisabledSubtitle:function(){return""},_getSections:function(){return[]},_getFinishButtons:function(){return[]},_finish:function(){}},{name:"queryEditorDisabled"},"controlPane"),e(document).ready((function(){_.get(window,"socrata.gridView.sidebarPaneVisibility.filter.soqlQueryEditorDisabled",!1)&&e.gridSidebar.registerConfig("filter.queryEditorDisabled","pane_queryEditorDisabled",1)}))}(jQuery)},79497:function(){!function(e){e.Control.extend("pane_queryEditor",{isAvailable:function(){return!0},getTitle:function(){return e.t("screens.ds.grid_sidebar.query_editor.title")},getSubtitle:function(){return""},getDisabledSubtitle:function(){return""},_getSections:function(){return[]},_getFinishButtons:function(){return[]},_finish:function(){}},{name:"queryEditor"},"controlPane"),e(document).ready((function(){_.get(window,"socrata.gridView.sidebarPaneVisibility.filter.soqlQueryEditor",!1)&&e.gridSidebar.registerConfig("filter.queryEditor","pane_queryEditor",1,"filter")}))}(jQuery)},14983:function(){!function(e){e.Control.extend("pane_sortRollUpDisabled",{isAvailable:function(){return!0},getTitle:function(){return e.t("screens.ds.grid_sidebar.sort_roll_up_disabled.title")},getSubtitle:function(){return e.t("screens.ds.grid_sidebar.sort_roll_up_disabled.subtitle")},getDisabledSubtitle:function(){return""},_getSections:function(){return[]},_getFinishButtons:function(){return[]},_finish:function(){}},{name:"sortRollUpDisabled"},"controlPane"),e(document).ready((function(){_.get(window,"socrata.gridView.sidebarPaneVisibility.filter.sortRollUpDisabled",!1)&&e.gridSidebar.registerConfig("filter.sortRollUpDisabled","pane_sortRollUpDisabled",3)}))}(jQuery)},10080:function(e,t,a){var n=a(4081),i=a(96110),r=a(17933),s=a(21456),o=a(47858),l=a(49138);a(60148),a(44174),function(e){var t=!1,a=_.compact(n(_).call(_,blist.datatypes,(function(e,t){return e.sortable?t:null}))),c=_.compact(n(_).call(_,blist.datatypes,(function(t,a){return e.isBlank(t.rollUpAggregates)?null:a}))),d=function(t){return e.isBlank(t)?null:this._view.columnForIdentifier(t).dataType.rollUpAggregates},u=function(t){return e.isBlank(t)?"hidden":this._view.columnForIdentifier(t).dataType.groupFunctions||"hidden"};e.Control.extend("pane_sortRollUp",{getTitle:function(){return e.t("screens.ds.grid_sidebar.sort_rollup.title")},getSubtitle:function(){return t?e.t("screens.ds.grid_sidebar.sort_rollup.subtitle"):e.t("screens.ds.grid_sidebar.sort_rollup.based_on_private_view")},isAvailable:function(){return!!_.isUndefined(_.get(this,"_view.queryString"))&&(p(this)?this._view.realColumns.length>0:this._view.visibleColumns.length>0&&this._view.valid)},getDisabledSubtitle:function(){return _.isUndefined(_.get(this,"_view.queryString"))?this._view.valid||p(this)?e.t("screens.ds.grid_sidebar.sort_rollup.validation.no_eligible_columns"):e.t("screens.ds.grid_sidebar.base.validation.invalid_view"):e.t("controls.filter.main.view_is_soql_based_view")},_getCurrentData:function(){return this._super()||this._view.cleanCopy()},_filteredGroupableTypesForSoda2:function(e){return i(_).call(_,c,(function(t){return!e.newBackend||"date"!=t}))},_getSections:function(){if(!t)return[];var n=[];return n.push({name:"filterGroup",type:"selectable",title:e.t("screens.ds.grid_sidebar.sort_rollup.rollup.title"),fields:[{type:"repeater",name:"metadata.jsonQuery.group",minimum:0,addText:e.t("screens.ds.grid_sidebar.sort_rollup.rollup.add_group_button"),field:{type:"group",options:[{type:"columnSelect",name:"columnFieldName",notequalto:"groupColumn",useFieldName:!0,text:e.t("screens.ds.grid_sidebar.sort_rollup.rollup.group_by"),columns:{type:this._filteredGroupableTypesForSoda2(this._view),noDefault:!0,hidden:p(this)||this._view.isGrouped()}},{type:"select",name:"groupFunction",text:e.t("screens.ds.grid_sidebar.sort_rollup.rollup.group_function_label"),prompt:e.t("screens.ds.grid_sidebar.sort_rollup.rollup.group_function_prompt"),options:u,linkedField:"columnFieldName"}]}},{type:"repeater",minimum:0,name:"metadata.jsonQuery.select",addText:e.t("screens.ds.grid_sidebar.sort_rollup.rollup.add_rollup_button"),field:{type:"group",options:[{type:"columnSelect",name:"columnFieldName",required:!0,useFieldName:!0,text:e.t("screens.ds.grid_sidebar.sort_rollup.rollup.roll_up"),notequalto:"rollUpColumn",columns:{type:this._filteredGroupableTypesForSoda2(this._view),noDefault:!0,hidden:p(this)||this._view.isGrouped()}},{type:"select",required:!0,name:"aggregate",text:e.t("screens.ds.grid_sidebar.sort_rollup.rollup.function"),prompt:e.t("screens.ds.grid_sidebar.sort_rollup.rollup.roll_up_function"),linkedField:"columnFieldName",options:d}]}}]}),n.push({name:"filterSort",type:"selectable",title:e.t("screens.ds.grid_sidebar.sort_rollup.sort.title"),fields:[{type:"repeater",name:"metadata.jsonQuery.order",minimum:0,addText:e.t("screens.ds.grid_sidebar.sort_rollup.sort.add_column_button"),field:{type:"group",options:[{type:"columnSelect",name:"columnFieldName",required:!0,notequalto:"sortColumn",useFieldName:!0,text:e.t("screens.ds.grid_sidebar.sort_rollup.sort.column"),columns:{type:a}},{type:"select",name:"ascending",prompt:null,text:e.t("screens.ds.grid_sidebar.sort_rollup.sort.direction"),options:[{text:e.t("screens.ds.grid_sidebar.sort_rollup.sort.directions.ascending"),value:"true"},{text:e.t("screens.ds.grid_sidebar.sort_rollup.sort.directions.descending"),value:"false"}]}]}}]}),n},shown:function(){var e=this;e._super(),e._registeredChange||(e._view.bind("query_change",(function(){e.reset()}),e),e._registeredChange=!0)},_getFinishButtons:function(){return[e.controlPane.buttons.apply,e.controlPane.buttons.cancel]},_finish:function(t,a,c){var d=this;if(d._super.apply(d,arguments)){var u=_.get(window,"socrata.featureFlags.force_use_of_modifying_lens_id_in_all_derived_views",!1);if(u){var p,m=d._getFormValues(),f=_.get(m,"metadata.jsonQuery.select",[]),h=_.get(m,"metadata.jsonQuery.group",[]),g=n(p=r(f).call(f,h)).call(p,(function(e){return e.columnFieldName})),v=d._view.jsonColumnsWithoutGroupingsOrAggregations();v.forEach((function(e){if(_.isEmpty(g)||s(_).call(_,g,e.fieldName)){var t=l(_).call(_,h,{columnFieldName:e.fieldName}),a=l(_).call(_,f,{columnFieldName:e.fieldName});if(t&&(e.hasOwnProperty("format")||(e.format={}),t.hasOwnProperty("groupFunction")&&(e.format.group_function=t.groupFunction),e.format.drill_down="true"),a){var n;switch(e.hasOwnProperty("format")||(e.format={}),a.aggregate){case"avg":n="average";break;case"min":n="minimum";break;case"max":n="maximum";break;default:n=a.aggregate}e.format.grouping_aggregate=n}}else _.isNull(_.get(e,"flags",null))&&(e.flags=[]),o(e).push("hidden")}));var b={columns:v,metadata:m.metadata};return d._view.update(b,!0,!0),d._view.trigger("columns_changed"),d._finishProcessing(),_.defer((function(){d.reset()})),void(_.isFunction(c)&&c())}var y,w,C=d._getFormValues(),x=e.extend(!0,{},d._view.metadata),k=x.jsonQuery;if(_.each(["order","group","select"],(function(e){k[e]=((C.metadata||{}).jsonQuery||{})[e]})),C.metadata=x,_.each(C.metadata.jsonQuery.order||[],(function(e){e.ascending="true"==e.ascending||!0===e.ascending})),_.isEmpty(C.metadata.jsonQuery.group)||(C.metadata.jsonQuery.group=i(_).call(_,C.metadata.jsonQuery.group,(function(t){return!e.isBlank(t.columnFieldName)}))),_.some(C.metadata.jsonQuery.select,(function(t){return!e.isBlank(t.aggregate)}))&&_.isEmpty(C.metadata.jsonQuery.group))return l(y=d.$dom()).call(y,".mainError").text(e.t("screens.ds.grid_sidebar.sort_rollup.validation.no_group_bys")),void d._finishProcessing();if(!_.isEmpty(C.metadata.jsonQuery.group)&&_.some(C.metadata.jsonQuery.select,(function(t){return e.isBlank(t.aggregate)&&!_.some(C.metadata.jsonQuery.group,(function(e){return e.columnFieldName==t.columnFieldName}))})))return l(w=d.$dom()).call(w,".mainError").text(e.t("screens.ds.grid_sidebar.sort_rollup.validation.no_function")),void d._finishProcessing();var $=!1;_.each(C.metadata.jsonQuery.group,(function(t){var a=d._view.columnForIdentifier(t.columnFieldName),n=Column.closestViewFormat(a,blist.datatypes.groupFunctionFromSoda2(t.groupFunction));if(!e.isBlank(n)){var i=e.extend({},a.format);i.view=n,a.update({format:i}),$=!0}})),_.each(d._view.realColumns,(function(t){if(!(e.isBlank(t.format.group_function)&&e.isBlank(t.format.grouping_aggregate)||_.some(C.metadata.jsonQuery.select,(function(a){return!e.isBlank(a.aggregate)&&a.columnFieldName==t.fieldName}))||_.some(C.metadata.jsonQuery.group,(function(e){return e.columnFieldName==t.fieldName})))){var a=e.extend({},t.format),n=Column.closestViewFormat(t,null);e.isBlank(n)||(a.view=n),delete a.grouping_aggregate,delete a.group_function,t.update({format:a}),$=!0}}));var S=!d._view.valid;d._view.update(C,!1,_.isEmpty(C.metadata.jsonQuery.group)),$&&d._view.trigger("columns_changed");var T=function(){d._finishProcessing(),_.defer((function(){d.reset()})),_.isFunction(c)&&c()};S&&"blist"!=d._view.type&&d._view.save(T)||T()}}},{name:"sortRollUp"},"controlPane");var p=function(e){return e._view.isGrouped()&&e._view.hasRight(blist.rights.view.UPDATE_VIEW)};e(document).ready((function(){var a=_.get(window,"socrata.gridView.sidebarPaneVisibility.filter.sortRollUp",!1),n=_.get(window,"socrata.featureFlags.force_use_of_modifying_lens_id_in_all_derived_views",!1);a&&(n?blist.dataset.getParentView((function(a){t=!e.isBlank(a),e.gridSidebar.registerConfig("filter.sortRollUp","pane_sortRollUp",3,"grouped"),blist.datasetPage.updateSidebarLinks()})):(t=!0,e.gridSidebar.registerConfig("filter.sortRollUp","pane_sortRollUp",3,"grouped")))}))}(jQuery)},96012:function(e,t,a){var n=a(4081),i=a(21456),r=a(47858),s=a(96110);!function(e){var t=!1,a=_.compact(n(_).call(_,blist.datatypes,(function(t,a){return!e.isBlank(t.filterConditions)||_.some(t.subColumns,(function(t){return!e.isBlank(t.filterConditions)}))?a:null}))),o=_.compact(n(_).call(_,blist.datatypes,(function(t,a){return t.disableNBEFilter||e.isBlank(t.filterConditions)&&!_.some(t.subColumns,(function(t){return!e.isBlank(t.filterConditions)}))?null:a})));e.Control.extend("pane_unifiedFilter",{getTitle:function(){return e.t("controls.filter.main.filter")},getSubtitle:function(){return t?e.t("controls.filter.main.filter_based_on_contents"):e.t("screens.ds.grid_sidebar.filter.based_on_private_view")},isAvailable:function(){return!!_.isUndefined(_.get(this,"_view.queryString"))&&(!e.isBlank(this._view)&&this._view.visibleColumns.length>0&&this._view.valid)},getDisabledSubtitle:function(){return _.isUndefined(_.get(this,"_view.queryString"))?e.isBlank(this._view)?"No dataset is defined":this._view.valid?e.t("controls.filter.main.view_has_no_columns"):e.t("controls.filter.main.view_must_be_valid"):e.t("controls.filter.main.view_is_soql_based_view")},setView:function(t){var a=this,n=a._super,i=function(e){n.apply(a,[e]),a.reset(),a._pendingView&&(blist.datasetPage&&blist.datasetPage.sidebar&&blist.datasetPage.sidebar.updateEnabledSubPanes(),delete a._pendingView)};e.subKeyDefined(t,"displayFormat.viewDefinitions")?(a._pendingView=!0,"self"==t.displayFormat.viewDefinitions[0].uid?i(t):Dataset.lookupFromViewId(t.displayFormat.viewDefinitions[0].uid,i)):i(t)},_getSections:function(){return t?[{customContent:{template:"filterPane",directive:{},data:{},callback:function(e){var t,n=this,l=!1;_.isEmpty(blist.currentUserJson)||(l=i(_).call(_,r(blist.currentUserJson),"admin")||blist.dataset.hasRight(blist.rights.view.UPDATE_VIEW));var c=s(t=n._view.columnsForType(n._view.newBackend?o:a,l)).call(t,(function(e){return!i(_).call(_,_.get(e,"flags",[]),"hidden")}));e.unifiedFilter({datasets:n.settings.datasets||[n._view],rootCondition:n.settings.rootCondition,filterableColumns:c}),n._view.unbind(null,null,n),n._view.bind("columns_changed",(function(){e.trigger("columns_changed",{columns:c})}),n),n._view.bind("clear_temporary",(function(){e.trigger("revert")}),n)},cleanupCallback:function(e){e.trigger("destroy")}}}]:[]}},{name:"unifiedFilter",noReset:!0},"controlPane"),e(document).ready((function(){var a=_.get(window,"socrata.gridView.sidebarPaneVisibility.filter.filter",!1),n=_.get(window,"socrata.featureFlags.force_use_of_modifying_lens_id_in_all_derived_views",!1);a&&(n?blist.dataset.getParentView((function(a){t=!e.isBlank(a),e.gridSidebar.registerConfig("filter.unifiedFilter","pane_unifiedFilter",1,"filter"),blist.datasetPage.updateSidebarLinks()})):(t=!0,e.gridSidebar.registerConfig("filter.unifiedFilter","pane_unifiedFilter",1,"filter")))}))}(jQuery)},62794:function(e,t,a){"use strict";a(89041),a(2980),a(29954),a(98933),a(67360);var n=a(49138),i=a.n(n),r=a(4081),s=a.n(r),o=a(21456),l=a.n(o),c=a(27255),d=a.n(c),u=a(17933),p=a.n(u),m=a(96110),f=a.n(m),h=a(35188),g=a.n(h),v=a(95599),b=a.n(v),y=a(59954),w=a.n(y),C=a(6816),x=a.n(C),k=a(79628),$=a(67828),S=a(15552);!function(e){var t={noFilter:!0};e((function(){var t=e.getTemplate("filterCondition");i()(t).call(t,".autogeneratedCount").append(e.tag(s()(_).call(_,_.range(20),(function(e){return{tagName:"option",value:e+1,contents:e+1}})))),e("#js-appended-templates").append(t)}));var a=function(e){return n(e)?e:{}},n=function e(t){return delete t.metadata,!(!_.isArray(t.children)||0===t.children.length)&&("operator"==t.type&&l()(_).call(_,["AND","OR"],t.value)&&_.each(t.children,(function(a){e(a)||(t.children=_.without(t.children,a))})),t.children.length>0)},r=function t(a){return e.isBlank(a.value)?a:"AND"!=a.value.toUpperCase()&&"OR"!=a.value.toUpperCase()?null:(a.children=_.compact(s()(_).call(_,a.children,(function(e){return t(e)}))),a)},o=function e(t){return _.isEmpty(t)?null:"operator"!=t.type||"OR"!=t.value&&"AND"!=t.value?_.some(t.children,(function(e){return"column"==e.type}))?t:null:(t.children=_.compact(s()(_).call(_,t.children,e)),_.isEmpty(t.children)?null:t)},c=function(t,a,n){var i=t.children[n||0];if(e.isBlank(i))return!1;var r={column:"column",subcolumn:"column",value:"literal"},s={subcolumn:"value",value:"value"},o=[];return _.each(i.children,(function(e){e.type==r[a]&&("column"==a?o.push(e.columnFieldName||e.columnId):o.push(e[s[a]]))})),1===o.length?o[0]:o},u=function(t){var a,n=t.data("unifiedFilter-editor");if(e.isBlank(n))a=t.data("unifiedFilter-editorValue");else{if(!n.isValid())return null;a=n.currentValue()}return e.isBlank(a)||_.isNumber(a)||_.isString(a)||_.isBoolean(a)||!_.every(d()(_).call(_,a),(function(t){return e.isBlank(t)}))?a:null},m=function(t,a,n){if("blank?"==n)return"is";var i=t.renderType;return e.subKeyDefined(i,"subColumns."+a)&&(i=i.subColumns[a]),e.subKeyDefined(i,"filterConditions")&&(i.filterConditions.details[n]||{}).text||""},h=function(t){"operator"==t.type&&"OR"!=t.value&&"AND"!=t.value&&(t.children=[e.extend(!0,{},t)],t.value="OR")},v=function(t,a,n){!e.isBlank(n.subcolumn)&&"blank?"!=n.operator&&e.isPlainObject(t)&&(t=t[n.subcolumn]);var i=a.renderType;return e.subKeyDefined(i,"subColumns."+n.subcolumn)&&(i=i.subColumns[n.subcolumn]),_.isFunction(i.filterValue)&&(t=i.filterValue(t)),t},y=function(e){return!("blank?"!=e.metadata.operator&&(_.isArray(e.children)&&0!==e.children.length||_.isArray(e.metadata.customValues)&&0!==e.metadata.customValues.length))},C=function(t,a){var n=t.renderType;e.subKeyDefined(n,"subColumns."+a)&&(n=n.subColumns[a]);var i=function(t){return e.subKeyDefined(t,"filterConditions.details.BETWEEN")?"between?":e.subKeyDefined(t,"filterConditions.details.EQUALS")?"EQUALS":"blank?"}(n);return"between?"==i&&(i=e.subKeyDefined(t,"cachedContents.top")&&(t.cachedContents.top.length<20||f()(_).call(_,t.cachedContents.top,(function(e){return e.count>1})).length>5)?"EQUALS":"BETWEEN"),i},T=function(e){var t=0,a=e<0;if((e=Math.abs(e))<1&&e>0)for(;e<1;)e*=10,t--;else for(;e>=10;)e/=10,t++;return{leading:Math.floor(e),exp:t,isNegative:a}},D=function(e,t,a){var n=new Date(e.getTime()),i="down"==a;switch(t){case"year":n.setMonth(i?0:11);break;case"month":if(i)n.setDate(1);else{var r=n.getMonth();n.setDate(31),n.getMonth()!==r&&(n.setDate(31-n.getDate()),n.setMonth(r))}break;default:n.setHours(i?0:23),n.setMinutes(i?0:59),n.setSeconds(i?0:59),n.setMilliseconds(i?0:999)}return n},F=function(t,a){var n=t.renderType;return e.isBlank(a)||(n=e.subKeyDefined(t.renderType,"subColumns."+a)?t.renderType.subColumns[a]:null),n};e.fn.unifiedFilter=function(n){var d,N=this,I=!1,B=!1,A=s()(_).call(_,n.datasets,(function(e){return{dataset:e,ufID:e.id+"_"+_.uniqueId()}})),P=A[0].dataset,E=n.filterableColumns,L=e.extend(!0,{},n.rootCondition),O="unifiedFilter"+_.uniqueId(),j=!1,q=function(e){return"AND"==e.value&&2==e.children.length&&(("GREATER_THAN_OR_EQUALS"==e.children[0].value&&"LESS_THAN_OR_EQUALS"==e.children[1].value||"LESS_THAN_OR_EQUALS"==e.children[0].value&&"GREATER_THAN_OR_EQUALS"==e.children[1].value)&&{type:"operator",value:"BETWEEN",children:[{columnFieldName:c(e,"column"),type:"column"},{value:c(e,"value",0),type:"literal"},{value:c(e,"value",1),type:"literal"}]})},V=function(e){return _.each(e.children,(function(e){var t={};t[P.publicationGroup]=e.metadata.tableColumnId,e.metadata.tableColumnId=t})),e.metadata.unifiedVersion=2,!0},M=function(t,a){if(_.isEmpty(t))e.subKeyDefined(a,"metadata.filterCondition")?(t=e.extend(!0,{},a.metadata.filterCondition)).metadata.unifiedVersion<2&&V(t):t={type:"operator",value:"AND",children:[],metadata:{advanced:!0,unifiedVersion:2}};else{if(_.isEmpty(t.metadata)){var n=i()(_).call(_,t.children,(function(e){return _.isNumber((e.metadata||{}).unifiedVersion)}));e.isBlank(n)||(t=n)}if((_.isUndefined(t.metadata)||_.isNaN(t.metadata.unifiedVersion))&&!function(t){var a=!0;return"operator"==t.type&&l()(_).call(_,["AND","OR"],t.value)||(t.children=[e.extend({},t)],t.type="operator",t.value="OR"),t.children=t.children||[],_.each(t.children,(function(n,i){if("operator"==n.type&&l()(_).call(_,["AND","OR"],n.value)){if(_.some(n.children||[],(function(e){return l()(_).call(_,["AND","OR"],e.value)}))){var r=!0;return _.each(n.children||[],(function(t,a){var i=q(t);if(!e.isPlainObject(i))return r=r&&i;n.children[a]=i})),a=a&&r}var s,o;_.each(n.children||[],(function(e){if(e.type!==(s||e.type)||e.columnFieldName!==(o||e.columnFieldName))return a=!1;s=e.type,o=e.columnFieldName}))}else t.children[i]={type:"operator",value:"OR",children:[n]}})),_.isUndefined(t.metadata)&&(t.metadata={advanced:!0,unifiedVersion:1}),_.each(t.children,(function(e){if(_.isUndefined(e.metadata)){var t=P.columnForIdentifier(c(e,"column")),a=e.children[0].value;l()(_).call(_,["IS_BLANK","IS_NOT_BLANK"],a)&&(a="blank?"),e.metadata={tableColumnId:t.tableColumnId,operator:a};var n=(c(e,"subcolumn")||"").toLowerCase();n&&l()(_).call(_,g()(_).call(_,t.renderType.subColumns||{}),n)&&(e.metadata.subcolumn=n)}})),V(t),a}(t)||t.metadata.unifiedVersion<2&&!V(t))throw"Error: We're not currently capable of dealing with this filter."}return t.children=t.children||[],0==t.children.length&&(t.metadata.advanced=!0),t};this.on("columns_changed",(function(t,a){E=a.columns,e.isBlank(N)||i()(N).call(N,".filterConditions .filterLink.columnName").each((function(){var t=e(this);l()(_).call(_,E,t.popupSelect_selectedItems()[0])?t.popupSelect_update(E):K(t.closest(".filterCondition"),!0)}))})),this.on("revert",(function(){I=!1,e.isBlank(N)||(i()(N).call(N,".noFilterConditionsText").show(),L=e.extend(!0,{},n.rootCondition),d=null,E=n.filterableColumns,R())})),this.on("destroy",(function(){_.each(A,(function(t){var a=e.extend(!0,{},t.dataset.query);j?a.filterCondition=null:e.isBlank(a.namedFilters)||delete a.namedFilters[O],t.dataset.update({query:a})})),L=e.extend(!0,{},n.rootCondition),d=null,E=n.filterableColumns}));var R=function(){var t,a,n,r,s=!_.get(window,"blist.feature_flags.force_use_of_modifying_lens_id_in_all_derived_views",!1);s&&i()(n=i()(N).call(N,".baseFilterConditions")).call(n,".filterCondition").remove();i()(N).call(N,".filterConditions").empty(),_.isEmpty(L)&&e.subKeyDefined(P,"query.filterCondition")&&(L=e.extend(!0,{},P.query.filterCondition),j=!0),s&&e.subKeyDefined(P,"_queryBase.query.filterCondition")&&(d=o(e.extend(!0,{},P._queryBase.query.filterCondition)),r=d,_.isEmpty(r)||_.remove(r.children,(function(e){return _.isUndefined(P.columnForIdentifier(c(e,"column")))})),d=M(d=r,P._queryBase),L=f()(blist).generateSODA1({},f()(blist).subtractQueries(Dataset.translateFilterColumnsToBase(Dataset.translateFilterCondition(L,P,!1),P).where,Dataset.translateFilterCondition(d,P._queryBase,!1).where,P._queryBase)||{})),L=M(L,P),N.toggleClass("advanced",!!L.metadata.advanced),N.toggleClass("notAdvanced",!L.metadata.advanced),f()(t=i()(N).call(N,".advancedStateLine").removeClass("hide")).call(t,L.metadata.advanced?".editModeAdvancedOffLine":".editModeAdvancedOnLine").addClass("hide"),f()(a=i()(N).call(N,".mainFilterOptionsMenu .matchAnyOrAll").removeClass("checked")).call(a,":has(>a[data-actionTarget="+L.value+"])").addClass("checked");var l=_.some((d||{}).children,(function(e){var t=e.metadata||{};return!_.isEmpty(t)&&!!P._queryBase.columnForTCID(t.tableColumnId[P._queryBase.publicationGroup])}));L.metadata.hideBase||!l?s&&i()(N).call(N,".baseFilterConditions").addClass("hide"):s&&(i()(N).call(N,".baseFilterConditions").removeClass("hide"),_.each(d.children,H),i()(N).call(N,".baseFilterConditions .filterCondition:gt(0)").each((function(){e(this).before(e.tag2({_:"span",className:"conditionJoin",contents:e.t("core."+d.value.toLowerCase())}))}))),"operator"==L.type&&"AND"!=L.value&&"OR"!=L.value&&(L={type:"operator",value:"AND",metadata:{advanced:L.metadata.advanced,unifiedVersion:L.metadata.unifiedVersion},children:[L]}),_.each(L.children,U),0==L.children.length?_.defer((function(){i()(N).call(N,".initialFilterMode").show(),i()(N).call(N,".normalFilterMode").hide()})):_.defer((function(){i()(N).call(N,".initialFilterMode").hide(),i()(N).call(N,".normalFilterMode").show()}))},z=function(e){var t;if(!_.isUndefined(e.children)){var a=s()(t=_.chain(e.children)).call(t,(function(e){return e.columnId})).reject((function(e){return _.isUndefined(e)})).first().value();return _.isUndefined(a)?void 0:P.columnForID(a)}},H=function(t){if(!_.get(window,"blist.feature_flags.force_use_of_modifying_lens_id_in_all_derived_views",!1)){var a=t.metadata||{};if(!_.isEmpty(a)){var n=P._queryBase.columnForTCID(a.tableColumnId[P._queryBase.publicationGroup]);if(_.isUndefined(n)&&(n=z(t)),!_.isUndefined(n)){h(t);var r=e.renderTemplate("filterConditionStatic",{metadata:a,column:n},{".columnName":"column.name!",".columnInfo@title":"column.description!",".subcolumnName":function(){return(((n.renderType.subColumns||{})[a.subcolumn]||{}).title||"").toLowerCase()},".subcolumnName@class+":function(){return!e.isBlank(n.renderType.subColumns)&&_.size(n.renderType.subColumns)>0?"":"hide"},".operator":function(){return m(n,a.subcolumn,a.operator)}}),s="filter_"+_.uniqueId(),o=i()(r).call(r,".columnInfo");o.toggleClass("hide",e.isBlank(o.attr("title"))||!a.showInfo),o.socrataTip({message:(0,S.purify)(o.attr("title"))||"",killTitle:!0}),"blank?"==a.operator?_.some(t.children||[],(function(e){return"IS_BLANK"==e.value}))?Q({item:n.renderType.filterConditions.details.IS_BLANK.text.replace(/^is\s/,""),data:"IS_BLANK"},n,t,r,s,{textOnly:!0,selected:!0}):_.some(t.children||[],(function(e){return"IS_NOT_BLANK"==e.value}))&&Q({item:n.renderType.filterConditions.details.IS_NOT_BLANK.text.replace(/^is\s/,""),data:"IS_NOT_BLANK"},n,t,r,s,{textOnly:!0,selected:!0}):_.each(t.children||[],(function(e,a){var i=c(t,"value",a);Q({item:i},n,t,r,s,{selected:!0})}));var l=i()(r).call(r,".line");if(l.length>1){var d,u;if(l.length>2)i()(u=b()(l).call(l,0,l.length-1)).call(u,".lineValue").append(",");i()(d=l.eq(l.length-2)).call(d,".lineValue").append(" "+e.t("core."+t.value.toLowerCase()))}i()(r).call(r,"input").attr("disabled",!0),i()(N).call(N,".baseFilterConditions").append(r),r.slideDown()}}}},U=function(a){var n,r,o=a.metadata||{};if(!_.isEmpty(o)&&(_.isEmpty(o.tableColumnId)||_.isNull(P.publicationGroup)||(r=P.columnForTCID(o.tableColumnId[P.publicationGroup])),_.isUndefined(r)&&(r=z(a)),!_.isUndefined(r))){h(a),!_.isEmpty(r.subColumnTypes)&&e.isBlank(o.subcolumn)&&(o.subcolumn=r.subColumnTypes[0]);var d=e.renderTemplate("filterCondition",{metadata:o,column:r},{".filterCondition@class+":function(){return!1===o.expanded?"collapsed":"expanded"},".columnName":"column.name!",".columnInfo@title":"column.description!",".subcolumnName":function(){return(((r.renderType.subColumns||{})[o.subcolumn]||{}).title||"").toLowerCase()},".subcolumnName@class+":function(){return!e.isBlank(r.renderType.subColumns)&&_.size(r.renderType.subColumns)>0?"":"hide"},".operator":function(){return m(r,o.subcolumn,o.operator)}}),u="filter_"+_.uniqueId();i()(d).call(d,".autogeneratedCount").val(o.includeAuto||5),l()(_).call(_,["BETWEEN","GREATER_THAN","GREATER_THAN_OR_EQUALS","LESS_THAN","LESS_THAN_OR_EQUALS"],o.operator)&&i()(d).call(d,".autogeneratedProperties").html(e.tag({tagName:"p",contents:e.t("controls.filter.edit_default.auto_suggested")})),i()(d).call(d,".filterRemoveButton").on("click",(function(e){e.preventDefault(),K(d),Z()})),i()(d).call(d,".filterExpander").on("click",(function(e){e.preventDefault(),d.hasClass("expanded")?(i()(d).call(d,".filterValues").stop().slideUp(),d.removeClass("expanded").addClass("collapsed")):(i()(d).call(d,".filterValues").stop().slideDown(),d.removeClass("collapsed").addClass("expanded"))})),i()(d).call(d,".filterLink").on("click",(function(e){e.preventDefault()})),i()(d).call(d,".autogeneratedCount").on("change",(function(){o.includeAuto=parseInt(e(this).val()),i()(d).call(d,".autogenerated .line").remove(),Y(a,r,d,u,[])}));var v=i()(d).call(d,".columnInfo");v.toggleClass("hide",e.isBlank(v.attr("title"))||!o.showInfo),v.socrataTip({message:(0,S.purify)(v.attr("title"))||"",killTitle:!0}),i()(d).call(d,".columnName").popupSelect({choices:E,listContainerClass:"popupColumnSelect",onShowCallback:function(){return N.hasClass("advanced")},prompt:e.t("controls.filter.actions.select_column"),renderer:function(t){return[{tagName:"span",class:["iconWrapper",t.renderTypeName],contents:{tagName:"span",class:"blist-th-icon"}},{tagName:"span",class:"columnName",contents:e.htmlStrip(t.name)}]},selectCallback:function(t){if(t==r)return!0;if(e.isBlank(t.renderType.subColumns)?delete o.subcolumn:o.subcolumn=t.renderType.defaultFilterSubColumn,!e.subKeyDefined(F(t,o.subcolumn),"filterConditions.details."+o.operator)){if(!y(a)&&!confirm(e.t("controls.filter.actions.confirm_modify")))return!1;a.children=[],o.operator=C(t,o.subcolumn),o.customValues=[]}return o.tableColumnId[P.publicationGroup]=t.tableColumnId,W(d,a),!0},selectedItems:r}),blist.dataset.newBackend&&l()(_).call(_,["CONTAINS","NOT_CONTAINS"],o.operator)&&(o.operator=o.operator+"_INSENSITIVE");var x,k,$,T,D,I,B=F(r,o.subcolumn),A=(x=B.filterConditions||{},k=P.newBackend,T=["CONTAINS","NOT_CONTAINS"],D=["CONTAINS_INSENSITIVE","NOT_CONTAINS_INSENSITIVE"],p()($=_.compact(s()(_).call(_,x.orderedList,(function(e){return k&&l()(T).call(T,e)||!k&&l()(D).call(D,e)||"IS_BLANK"==e||"IS_NOT_BLANK"==e?null:{value:e,text:x.details[e].text}})))).call($,{value:"blank?",text:e.t("core.filters.informal.is_blank")}));if(i()(d).call(d,".operator").popupSelect({choices:A,listContainerClass:"popupOperatorSelect",onShowCallback:function(){return N.hasClass("advanced")},prompt:e.t("controls.filter.actions.select_operation"),renderer:function(e){return e.text},selectCallback:function(t){return t==o.operator||("BETWEEN"==t.value||"blank?"==t.value||"BETWEEN"==o.operator||"blank?"==o.operator?!(!y(a)&&!confirm(e.t("controls.filter.actions.confirm_modify")))&&(a.children=[],o.customValues=[],o.operator=t.value,W(d,a),!0):(o.operator=t.value,i()(d).call(d,".operator").text(m(r,o.subcolumn,t.value)),W(d,a),!0))},selectedItems:i()(_).call(_,A,(function(e){return e.value==o.operator}))}),!e.isBlank(r.renderType.subColumns))i()(d).call(d,".subcolumnName").popupSelect({choices:f()(I=g()(_).call(_,r.renderType.subColumns)).call(I,(function(e){return!l()(_).call(_,["latitude","longitude"],e)})),listContainerClass:"popupSubcolumnSelect",onShowCallback:function(){return N.hasClass("advanced")},prompt:e.t("controls.filter.actions.select_subcolumn",{name:r.name}),renderer:function(e){return((r.renderType.subColumns[e]||{}).title||"").toLowerCase()},selectCallback:function(t){if(t==o.subcolumn)return!0;if(!e.subKeyDefined(F(r,t),"filterConditions.details."+o.operator)){if(!y(a)&&!confirm(e.t("controls.filter.actions.confirm_modify")))return!1;a.children=[],o.operator=C(r,t),o.customValues=[]}return o.subcolumn=t,W(d,a),!0},selectedItems:o.subcolumn}),d.addClass(o.subcolumn);if(i()(n=i()(d).call(d,".filterOptionsMenu").menu({additionalDataKeys:["actionTarget"],contents:[{text:e.t("controls.filter.menu.show_suggested"),href:"#toggleSuggestedValues",className:"toggleAutogenerated"+(_.isUndefined(o.includeAuto)?"":" checked")},{divider:!0},{text:e.t("controls.filter.menu.select_one"),href:"#selectOne",actionTarget:"one",className:"selectOneOrMany"+(!1===o.multiSelect?" checked":"")},{text:e.t("controls.filter.menu.select_many"),href:"#selectMany",actionTarget:"many",className:"selectOneOrMany"+(!1!==o.multiSelect?" checked":"")},{divider:!0},{text:e.t("controls.filter.menu.match_any"),href:"#matchAny",actionTarget:"OR",className:"matchAnyOrAll"+("OR"==a.value?" checked":"")},{text:e.t("controls.filter.menu.match_all"),href:"#matchAll",actionTarget:"AND",className:"matchAnyOrAll"+("AND"==a.value?" checked":"")}],menuButtonClass:"filterOptionsMenuButton options",menuButtonContents:"",onOpen:function(){d.addClass("menuOpen")},onClose:function(){d.removeClass("menuOpen")}})).call(n,".menuEntry a").on("click",(function(t){t.preventDefault();var n=e(this),s=n.closest(".menuEntry");s.hasClass("toggleAutogenerated")?_.isUndefined(o.includeAuto)?(s.addClass("checked"),o.includeAuto=5,Y(a,r,d,u,[],(function(t){if(0===t.length){var a=e.tag({tagName:"div",class:"noAutoValuesMessage",contents:e.t("controls.filter.main.no_suggestions")});a.appendTo(d),a.slideDown((function(){setTimeout((function(){a.slideUp((function(){a.remove()}))}),2e3)}))}}))):(s.removeClass("checked"),i()(d).call(d,".autogenerated .line").each((function(){var t=e(this);i()(t).call(t,".filterLineToggle").is(":checked")||t.remove()})),delete o.includeAuto,Z()):s.hasClass("selectOneOrMany")?(o.multiSelect="many"===n.attr("data-actionTarget"),W(d,a)):s.hasClass("matchAnyOrAll")&&(a.value=n.attr("data-actionTarget"),s.siblings(".matchAnyOrAll").removeClass("checked"),s.addClass("checked"),Z())})),!1!==o.multiSelect||o.forceValue||Q(t,r,a,d,u,{selected:!_.isArray(a.children)||0===a.children.length}),"blank?"==o.operator){var L=r.cachedContents||{},O="checkbox"!==r.dataTypeName;Q({item:B.filterConditions.details.IS_BLANK.text.replace(/^is\s/,""),data:"IS_BLANK",count:O?L.null:void 0},r,a,d,u,{textOnly:!0,selected:_.some(a.children||[],(function(e){return"IS_BLANK"==e.value}))}),Q({item:B.filterConditions.details.IS_NOT_BLANK.text.replace(/^is\s/,""),data:"IS_NOT_BLANK",count:O?L.non_null:void 0},r,a,d,u,{textOnly:!0,selected:_.some(a.children||[],(function(e){return"IS_NOT_BLANK"==e.value}))})}else{var j=[];_.each(a.children||[],(function(e,t){var n=c(a,"value",t);j.push(n);var i=e.metadata||{};Q({item:n},r,a,d,u,{selected:!1!==o.multiSelect||0===t,freeform:!!i.freeform})}));var q=_.after(_.isUndefined(o.includeAuto)?1:2,(function(){if(o.forceValue&&_.isEmpty(a.children)&&_.defer((function(){e.uniform.update(i()(d).call(d,".filterLineToggle:first").value(!0)),Z()})),!1!==o.multiSelect&&_.isEmpty(a.children)&&(o.selectAll||o.selectTop)){var t=i()(d).call(d,".filterLineToggle"),n=o.selectTop||t.length;_.defer((function(){var t;e.uniform.update(b()(t=i()(d).call(d,".filterLineToggle")).call(t,0,n).value(!0)),Z()}))}if(_.isNumber(o.visibleItems)){var r=i()(d).call(d,".filterValues .line");b()(r).call(r,o.visibleItems).addClass("hide");var l=i()(d).call(d,".showMoreLess"),c=!1;if(i()(d).call(d,".filterValues .line.hide").length>0&&(l.removeClass("hide"),c=!0),o.usePopup){var m,h,g=e.tag({tagName:"div",class:"filterPopupContents"}),v=[];_.each(_.sortBy(r.clone().removeClass("hide"),(function(t){return e(t).text()})),(function(t){var a=e(t),n=a.text()[0].toUpperCase();n!=h&&(h=n,v.push(h),g.append(e.tag({tagName:"span",class:["sectionHeader","dontend","section-"+h,"section-All"],contents:h}))),a.addClass("dontsplit section-All section-"+h),g.append(a)})),i()(g).call(g,".filterLineToggle").quickEach((function(){var t,a=e(this);a.attr("data-relatedid",a.attr("id")),a.attr("id",a.attr("id")+"_popup"),i()(t=a.closest(".line")).call(t,"label").attr("for",a.attr("id"))}));var y=function(t){e("body").append(t);var a=t.children(".line").outerWidth(!0);t.width(a);var n=Math.min(t.height(),.6*e(window).height());t.css({height:"auto","max-height":"none"});var i=Math.min(Math.ceil(t.height()/n),Math.floor(.6*e(window).width()/a));return t.width(i*a),t.columnize({columns:i,lastNeverTallest:!0}),t.height(Math.min(n,t.height())+10),t.detach(),t},w=e.tag({tagName:"div",class:["filterPopupBlock",u],contents:{tagName:"div",class:"filterMenu",contents:p()(m=[{tagName:"a",href:"#All",class:"active",contents:"All"}]).call(m,s()(_).call(_,v,(function(e){return{tagName:"a",href:"#"+e,contents:e}})))}});w.append(y(g.clone())),e(document).off(".filterPopup_"+u),e(document).on("click.filterPopup_"+u,".filterPopupBlock."+u+" .filterMenu a",(function(t){var a;t.preventDefault();var n=e(this).addClass("active");n.siblings().removeClass("active");var r=n.closest(".filterPopupBlock");i()(r).call(r,".filterPopupContents").remove();var s=g.clone();f()(a=s.children().addClass("hide")).call(a,".section-"+e.hashHref(n.attr("href"))).removeClass("hide"),r.append(y(s)),l.socrataTip().refreshSize()})),l.data("popup",w.add(g)),l.on("click",(function(e){e.preventDefault()})).socrataTip({content:w,fill:"#444444",isSolo:!0,stroke:"#444444",trigger:"click",positions:"auto",shrinkToFit:!0,shownCallback:function(t){var a=e(t);l.data("popup",a.add(g)),i()(a).call(a,".filterLineToggle").on("change click",(function(){var t=e(this);e.uniform.update(i()(r).call(r,"#"+t.attr("data-relatedid")).attr("checked","checked"==t.attr("checked")).trigger("change"))})).quickEach((function(){var t=e(this),a=t.closest(".line");a.prepend(t),a.children(".uniform").remove(),t.uniform()}))}})}else c&&l.on("click",(function(e){var t,a;e.preventDefault(),c=!c,i()(t=l.toggleClass("rightArrow",c).toggleClass("upArrow",!c)).call(t,"span.moreLess").text(c?"More":"Less");var n=i()(d).call(d,".autogenerated"),r=n.height(),s=b()(a=i()(d).call(d,".filterValues .line")).call(a,o.visibleItems);s.toggleClass("hide",c);var u=n.height();c&&s.removeClass("hide"),n.height(r).animate({height:u},(function(){c&&s.addClass("hide"),n.height("")}))}))}}));_.isUndefined(o.includeAuto)||Y(a,r,d,u,j,(function(e){j=p()(j).call(j,e),q(e)})),_.isArray(o.customValues)&&_.each(o.customValues,(function(e){l()(_).call(_,j,e)||Q({item:e},r,a,d,u)})),o.restrictedValues||Q("",r,a,d,u,{freeform:!0}),q()}if(!1!==o.multiSelect)i()(d).call(d,".clearValues").on("click",(function(t){t.preventDefault(),e.uniform.update(i()(d).call(d,".filterLineToggle").value(!1)),Z()}));d.data("unifiedFilter-condition",a),i()(N).call(N,".filterConditions").children(".noFilterConditionsText").hide().end().append(d),d.slideDown();try{var V=_.get(a,"metadata.tableColumnId",{}),M=_.get(w()(V),"0",null);"text"===(P||_.get(window,"blist.dataset")).columnForTCID(M).dataTypeName&&d.append('<div class="text-column-filter-operator-notice">'+e.t("controls.filter.main.filter_operators_for_text_columns_may_differ")+"</div>")}catch(e){}return d}},K=function(e,t){G(e,(function(){L.children=_.without(L.children,e.data("unifiedFilter-condition")),e.parent().length>0&&(1===e.siblings().length&&i()(N).call(N,".noFilterConditionsText").show(),e.remove()),!0!==t&&Z()}))},W=function(e,t){G(e,(function(){e.replaceWith(U(t)),Z()}))},G=function(t,a){_.defer((function(){i()(t).call(t,".filterLink").each((function(){var t=e(this).data("popupSelect-tip");_.isUndefined(t)||t.destroy()})),_.defer(a)}))},Q=function a(n,r,o,c,d,p){var m=o.metadata||{};_.isUndefined(p)&&(p={});var h=e.tag({tagName:"div",class:"line clearfix"}),g="unifiedFilterInput_"+_.uniqueId();if(h.append(e.tag({tagName:"input",type:!1===m.multiSelect?"radio":"checkbox",id:g,name:d,class:"filterLineToggle"})),!0===p.selected&&i()(h).call(h,".filterLineToggle").attr("checked",!0),i()(h).call(h,":radio, :checkbox").uniform(),!0!==p.autogenerated&&h.append(e.tag({tagName:"a",class:"removeFilterLine advanced remove",href:"#remove",contents:{tagName:"span",class:"icon",contents:"remove"}})),p.freeform){var b=r.renderType;if(e.subKeyDefined(r.renderType,"subColumns."+m.subcolumn)&&(b=r.renderType.subColumns[m.subcolumn]),e.isBlank(b.filterConditions)||e.isBlank(b.filterConditions.details[m.operator]))return;var y=b.filterConditions.details[m.operator].interfaceType;if(_.times(b.filterConditions.details[m.operator].editorCount,(function(t){t>0&&h.append(e.tag({tagName:"span",contents:e.t("core.and"),class:"conjunction"})),h.append(e.tag({tagName:"div",class:"filterValueEditor"}))})),m.autocomplete)i()(h).call(h,".filterValueEditor").each((function(t){var a=e(this);a.addClass("autocompleteCombo");var i=v(_.isArray(n.item)?n.item[t]:n.item,r,m);a.append(e.tag({tagName:"div",class:"wrapper",contents:[{tagName:"input",type:"text",class:"textInput",value:e.htmlEscape(i)},{tagName:"a",href:"#choose",class:"dropdownChooser"}]}))})),i()(h).call(h,".dropdownChooser").mousedown((function(){var t=e(this).siblings(".textInput");t.is(":focus")||_.defer((function(){t.focus()}))})).on("click",(function(e){e.preventDefault()})),_.defer((function(){i()(h).call(h,".textInput").each((function(){var t=e(this);t.awesomecomplete({attachTo:h.closest(".filterCondition"),forcePosition:!0,showAll:!0,skipBlankValues:!0,suggestionListClass:"autocompleteComboDropdown",renderFunction:function(t){return e.tag({tagName:"div",contents:[{tagName:"p",class:"item",contents:t.item},{tagName:"p",class:"count",contents:"("+t.count+")"}]},!0)},dataMethod:function(t,a,n){r.getSummary((function(t){var a=[];_.each(t,(function(t,n){_.each(t.topFrequencies,(function(t){var i=t.value;e.isBlank(r.subColumnTypes)||((i={})[n]=t.value),a.push({count:t.count,item:i})}))})),n(a)}))},onComplete:function(n){0===h.nextAll().length&&a("",r,o,c,d,{freeform:!0}),t.closest(".filterValueEditor").data("unifiedFilter-editorValue",n.item),B||i()(h).call(h,".filterLineToggle").attr("checked",!0),e.uniform.update(i()(c).call(c,".filterLineToggle")),Z()},valueFunction:function(e){return e.item||null}})}))}));else{i()(h).call(h,".filterValueEditor").each((function(t){var a=e(this),i=_.isArray(n.item)?n.item[t]:n.item,s=v(i,r,m);a.data("unifiedFilter-editor",a.blistEditor({type:b,editorInterface:y,value:s,row:null,format:r.format,customProperties:{dropDownList:r.dropDownList,baseUrl:r.baseUrl()}}))})),i()(h).call(h,".filterValueEditor input").on("focus",(function(){0===h.nextAll().length&&a("",r,o,c,d,{freeform:!0})}));var w="edit_end";l()(_).call(_,["checkbox","stars"],r.renderTypeName)&&(w="editor-change"),i()(h).call(h,".filterValueEditor").on(w,(function(){var t=e(this),a=i()(h).call(h,".filterLineToggle");if(!("edit_end"==w&&e(document.activeElement).parents().index(t)<0)){var n=i()(c).call(c,".filterLineToggle");if(e.isBlank(u(t))){var r=t.closest(".line").next(".line");r.is(":last-child")&&r.remove(),a.is(":checked")&&(!1===m.multiSelect&&f()(n).call(n,":first").attr("checked",!0),a.prop("checked",!1))}else a.is(":checked")||B||(!1===m.multiSelect&&n.prop("checked",!1),a.attr("checked",!0));e.uniform.update(n),Z()}}))}}else n==t?(h.append(e.tag({tagName:"label",class:"lineValue noFilterValue",for:g,contents:e.t("controls.filter.actions.disable_filter")})),h.data("unifiedFilter-value",t)):(h.append(e.tag({tagName:"label",class:"lineValue",for:g,contents:s()(_).call(_,e.arrayify(n.item),(function(e,t){var a=t>0?" and ":"";if(!0===p.textOnly)a+=e.toString();else try{a+=F(r,m.subcolumn).renderer(e,r,!1,!0)}catch(t){a+=e.toString()}return a}))})),!_.isUndefined(n.count)&&_.isUndefined(m.subcolumn)&&h.append(e.tag({tagName:"span",class:"lineCount",contents:["(",n.count,")"]})),h.data("unifiedFilter-value",e.isBlank(n.data)?n.item:n.data));i()(h).call(h,".filterLineToggle").on("change click",_.throttle(Z,0)),i()(h).call(h,".removeFilterLine").on("click",(function(t){t.preventDefault(),(h=e(this).closest(".line")).is(":last-child")||(h.remove(),Z())})),!0===p.autogenerated?i()(c).call(c,".filterValues .autogenerated").append(h):i()(c).call(c,".filterValues").append(h)},Y=function(t,a,n,r,o,c){var d=t.metadata||{};!function(t,a,n){var r={},s=_.after(A.length,(function(){if(e.subKeyDefined(r,"top")){if(t.sortAlphabetically&&e.subKeyDefined(a,"metadata.displayOrder")){var i,s={};_.each(a.metadata.displayOrder,(function(e,t){s[e.orderItem]=t})),r.top=x()(i=r.top).call(i,(function(a,n){return a.item==n.item?0:e.isBlank(s[a.item])&&e.isBlank(s[n.item])?(a.item>n.item?1:-1)*(t.reverseSort?-1:1):e.isBlank(s[a.item])?1:e.isBlank(s[n.item])?-1:(s[a.item]>s[n.item]?1:-1)*(t.reverseSort?-1:1)}))}else r.top=_.sortBy(r.top,(function(e){return _.isFunction(a.renderType.matchValue)?a.renderType.matchValue(e.item,a):e.item})),t.reverseSort&&r.top.reverse();var o,l;t.sortAlphabetically||(r.top=x()(o=r.top).call(o,(function(e,a){return(a.count-e.count)*(t.reverseSort?-1:1)}))),t.useBottomItems&&!e.isBlank(t.includeAuto)&&(r.top=b()(l=r.top).call(l,-t.includeAuto))}_.isFunction(n)&&n(r)}));0===A.length&&s();var o=function(t){var a;e.subKeyDefined(t,"largest")&&(e.subKeyDefined(r,"largest")?r.largest=Math.max(r.largest,t.largest):r.largest=t.largest,e.subKeyDefined(r,"smallest")?r.smallest=Math.max(r.smallest,t.smallest):r.smallest=t.smallest),e.subKeyDefined(t,"top")&&(e.subKeyDefined(r,"top")?_.each(t.top,(function(t){var a=i()(_).call(_,r.top,(function(e){return e.item==t.item}));e.isBlank(a)?r.top.push(t):a.count+=t.count})):r.top=b()(a=t.top).call(a)),s()};_.each(A,(function(a){var n=a.dataset,i=n.columnForTCID(t.tableColumnId[n.publicationGroup]);t.serverSummary||!e.subKeyDefined(i,"cachedContents")?i.getSummary((function(t){var a=[];_.each(t,(function(t,n){_.each(t.topFrequencies,(function(t){var r=t.value;e.isBlank(i.subColumnTypes)||((r={})[n]=t.value),a.push({count:t.count,item:r})}))})),o({top:a})}),t.includeAuto):o(i.cachedContents)}))}(d,a,(function(i){var u=[];if(l()(_).call(_,["EQUALS","NOT_EQUALS"],d.operator)&&e.subKeyDefined(i,"top")){var p=Math.min(d.includeAuto||5,i.top.length);_.times(p,(function(e){var s=v(i.top[e].item,a,d);_.isUndefined(s)||l()(_).call(_,o,s)||(Q({item:s},a,t,n,r,{autogenerated:!0}),u.push(s))}))}else if(l()(_).call(_,["BETWEEN","LESS_THAN","LESS_THAN_OR_EQUALS","GREATER_THAN","GREATER_THAN_OR_EQUALS"],d.operator)&&e.subKeyDefined(i,"largest")){if(i.smallest==i.largest)return;var m=[];if(l()(_).call(_,["number","money","percent"],a.renderTypeName)){var f=i.largest-i.smallest,h=T(i.smallest),g=T(i.largest);if(f>5e3){var b;if(h.isNegative&&h.exp++,g.isNegative||g.exp++,h.isNegative)for(b=h.exp;b>=(g.isNegative?g.exp:1);b--)m.push(-Math.pow(10,b));if(h.isNegative&&!g.isNegative&&m.push(0),!g.isNegative)for(b=h.isNegative?1:h.exp;b<=g.exp;b++)m.push(Math.pow(10,b))}else{var y=(h.isNegative?h.leading+1:h.leading)*Math.pow(10,h.exp);m.push(y);var w=(i.largest-y)/d.includeAuto;if(w>20){var C=T(w);w=(C.leading+1)*Math.pow(10,C.exp)}for(var x=y;x<i.largest;)x+=w,m.push(x)}}else if(l()(_).call(_,["date","calendar_date"],a.renderTypeName)){var k=i.smallest,$=i.largest;_.isNumber(k)&&(k*=1e3),_.isNumber($)&&($*=1e3);var S=new Date(k),F=new Date($),N="";w=0,(f=(F.getTime()-S.getTime())/864e5)<8?(N="day",w=1):f<32?(N="day",w=7):f<196?(N="month",w=1):f<367?(N="month",w=3):f<3670?(N="year",w=1):(N="year",w=10),S=D(S,N,"down"),m.push(S.getTime());for(var I={day:"Date",month:"Month",year:"FullYear"},B=new Date(S.getTime());B<F;)B["set"+I[N]](B["get"+I[N]]()+w),m.push(B.getTime());m.pop(),m.push(D(F,N,"up").getTime()),m=_.isUndefined(a.renderType.stringFormat)?s()(_).call(_,m,(function(e){return e/1e3})):s()(_).call(_,m,(function(e){return new Date(e).toString(a.renderType.stringFormat)}))}if(l()(_).call(_,["LESS_THAN","LESS_THAN_OR_EQUALS"],d.operator)?m.shift():l()(_).call(_,["GREATER_THAN","GREATER_THAN_OR_EQUALS"],d.operator)&&m.pop(),"BETWEEN"==d.operator)for(;m.length>1;){var A=[m[0],m[1]];u.push(A),Q({item:A},a,t,n,r,{autogenerated:!0}),m.shift()}else for(;m.length>0;)A=m[0],u.push(A),Q({item:A},a,t,n,r,{autogenerated:!0}),m.shift()}_.isFunction(c)&&c(u)}))},X=function(){var t;i()(N).call(N,".advancedStateLink").on("click",(function(t){var a;t.preventDefault();var n=e(this).hasClass("advancedOnLink");N.toggleClass("advanced",n||B),N.toggleClass("notAdvanced",!n&&!B),L.metadata.advanced=n,f()(a=i()(N).call(N,".advancedStateLine").removeClass("hide")).call(a,n?".editModeAdvancedOffLine":".editModeAdvancedOnLine").addClass("hide"),Z()})),i()(t=i()(N).call(N,".mainFilterOptionsMenu").menu({additionalDataKeys:["actionTarget"],contents:[{text:e.t("controls.filter.menu.match_any"),href:"#matchAny",actionTarget:"OR",className:"matchAnyOrAll"},{text:e.t("controls.filter.menu.match_all"),href:"#matchAll",actionTarget:"AND",className:"matchAnyOrAll"}],menuButtonClass:"filterOptionsMenuButton options",menuButtonContents:""})).call(t,".menuEntry a").on("click",(function(t){t.preventDefault();var a=e(this),n=a.closest(".menuEntry");L.value=a.attr("data-actionTarget"),n.siblings(".matchAnyOrAll").removeClass("checked"),n.addClass("checked"),Z()})),i()(N).call(N,".addFilterConditionButton").on("click",(function(t){t.preventDefault(),function(t){var a={children:[],type:"operator",value:"OR",metadata:{}};if(e.isBlank(t)){if(0===E.length)return;t=i()(_).call(_,E,(function(e){return!_.some(L.children,(function(t){return!_.isUndefined(t.metadata.tableColumnId)&&t.metadata.tableColumnId[P.publicationGroup]==e.tableColumnId}))})),e.isBlank(t)&&(t=E[0])}a.metadata.tableColumnId=a.metadata.tableColumnId||{},a.metadata.tableColumnId[P.publicationGroup]=t.tableColumnId,e.isBlank(t.renderType.subColumns)||(a.metadata.subcolumn=t.renderType.defaultFilterSubColumn),a.metadata.operator=C(t,a.metadata.subcolumn),L.children.push(a),U(a)}(),i()(N).call(N,".initialFilterMode").hide(),i()(N).call(N,".normalFilterMode").show()})),i()(N).call(N,".editFilter").on("click",(function(t){var a;if(t.preventDefault(),P.temporary&&!P.minorChange){if(!confirm(e.t("controls.filter.edit_default.save_confirm")))return;P.reload()}i()(N).call(N,".initialFilterMode").hide(),i()(N).call(N,".normalFilterMode").show(),N.removeClass("notAdvanced").addClass("editMode advanced"),i()(N).call(N,".editModeMessage").effect("highlight",{},3e3),f()(a=i()(N).call(N,".filterConditions input")).call(a,":radio, :checkbox").attr("disabled",!0),B=!0})),i()(N).call(N,".saveEditedFilter").on("click",(function(t){t.preventDefault();var a=e(this);if(a.addClass("disabled"),i()(N).call(N,".savingEditedFilterSpinner").css("display","inline-block"),Z(),"blist"==P.type){P.update({metadata:e.extend({},P.metadata,{filterCondition:r(L)})});var n=P.query;delete n.filterCondition,delete n.namedFilters,P.update({query:n})}else P.update({query:e.extend({},P.query,{filterCondition:L})});P.save((function(){N.removeClass("editMode"),B=!1,a.removeClass("disabled"),i()(N).call(N,".savingEditedFilterSpinner").hide()}))})),i()(N).call(N,".discardEditedFilter").on("click",(function(e){e.preventDefault(),N.removeClass("editMode"),B=!1,P.update({}),P.reload()}))},Z=function(){if(!(N.parents("body").length<1)){var n=i()(N).call(N,".filterConditions .filterCondition");n.removeClass("countInvalid");var r={},o={};_.each(A,(function(t){var a,n=e.extend(!0,{},t.dataset.query),i={type:"operator",children:[],metadata:{unifiedVersion:2}};j?a=n.filterCondition=n.filterCondition||i:(e.isBlank(n.namedFilters)&&(n.namedFilters={}),a=n.namedFilters[O]=n.namedFilters[O]||i),e.subKeyDefined(a,"metadata.unifiedVersion")||(a.metadata={unifiedVersion:2}),a.children=[],a.value=L.value,r[t.ufID]=a,o[t.ufID]=n})),n.each((function(){var a=e(this),n=a.data("unifiedFilter-condition"),o=n.metadata||{},l=[],c=P.columnForTCID(o.tableColumnId[P.publicationGroup]),d={type:"column",columnFieldName:c.fieldName};_.isUndefined(o.subcolumn)||(d.value=o.subcolumn);var m=i()(a).call(a,".filterLineToggle"),h=i()(a).call(a,".showMoreLess").data("popup");e.isBlank(h)||i()(h).call(h,":checkbox, :radio").attr("checked",!1),f()(m).call(m,":checked").each((function(){var a=e(this);e.isBlank(h)||i()(h).call(h,'[id^="'+a.attr("id")+'"]').attr("checked",!0);var n=a.closest(".line"),r=n.data("unifiedFilter-value");if(r!=t)if("blank?"!=o.operator){if(!e.isBlank(r)||(r=[],i()(n).call(n,".filterValueEditor").each((function(){r.push(u(e(this)))})),!_.some(r,e.isBlank))){var m=i()(n).call(n,".filterValueEditor").length>0,f=blist.dataset.newBackend&&"location"===c.renderTypeName;if(r&&f){if(r[0]&&(r[0].latitude||r[0].longitude))return;var g=function(e,t,a,n){(0,$.assertIsNotNil)(e),(0,$.assertIsOneOfTypes)(e,"object"),(0,$.assertIsString)(t),(0,$.assertIsString)(a),(0,$.assertIsOneOfTypes)(n,"boolean");var i={type:"operator",value:"AND",children:[]},r=(0,k.map)(e,(function(e,i){var r;return{type:"operator",value:t,metadata:{freeform:n},children:[{type:"column",columnFieldName:p()(r="".concat(a,"_")).call(r,i)},{type:"literal",value:e}]}}));return i.children=r,i}(JSON.parse(r),o.operator,d.columnFieldName,m);l.push(g)}else{var b;l.push({type:"operator",value:o.operator,metadata:{freeform:m},children:p()(b=[d]).call(b,s()(_).call(_,e.arrayify(r),(function(e){return{type:"literal",value:v(e,c,o)}})))})}}}else l.push({type:"operator",value:r,children:[d]})})),e.isBlank(h)||e.uniform.update(i()(h).call(h,":checkbox, :radio")),n.metadata.customValues=[],f()(m).call(m,":not(:checked)").each((function(){var a=e(this).closest(".line");if(!a.parents().hasClass("autogenerated")){var r=a.data("unifiedFilter-value");if(r==t)return;if(e.isBlank(r)&&(r=[],i()(a).call(a,".filterValueEditor").each((function(){r.push(u(e(this)))})),_.some(r,e.isBlank)))return;n.metadata.customValues.push(r)}})),_.isEmpty(n.metadata.customValues)&&delete n.metadata.customValues,n.children=e.extend(!0,[],l),_.each(A,(function(t){var a=t.dataset;d.columnFieldName=a.columnForTCID(o.tableColumnId[a.publicationGroup]).fieldName;var i=e.extend(!0,{},n);i.children=e.extend(!0,[],l),r[t.ufID].children.push(i)})),l.length>0&&a.siblings().addClass("countInvalid"),i()(a).call(a,".clearValues").toggleClass("hide",l.length<1||!1===o.multiSelect||!0!==o.clearOption)})),_.each(A,(function(t){var n=t.dataset;if(I||!_.isEqual(a(e.extend(!0,{},n.query.filterCondition)),a(e.extend(!0,{},L)))){if(_.isArray(r[t.ufID].children)&&d&&_.isArray(d.children)){var i=[_.cloneDeep(r[t.ufID]),d];r[t.ufID].children=i,r[t.ufID].type="operator",r[t.ufID].value="AND"}n.update({query:o[t.ufID]}),I=!0}}))}};P.getQueryBase((function(){X(),R()}))}}(jQuery)},48804:function(e,t,a){var n=a(96110),i=a(49138),r=a(17089),s=a(95599),o=a(4081),l=a(21456),c=a(17933),d=a(65075);a(29954),a(68640),a(27938),a(79167),a(89041),a(2980),function(e){var t=a(40768);function u(e,t,a){var n=_.get(e.displayFormat,"visualizationCanvasMetadata.vifs.0.type"),i=_.get(e.displayFormat,"visualizationCanvasMetadata.vifs.0.series.0.type");return/(^map$|choropleth|region.?map|feature.?map)/i.test(i||n)?a:t}var p=function(a){var c;if(a._viewList.length<1)return a._$section.addClass("noResults"),null;var d=a._viewList;e.isBlank(a._currentShow)||"all"==a._currentShow||(d=n(_).call(_,d,(function(e){switch(a._currentShow){case"data_lens":return"data_lens"===e.type;case"chart":return"chart"===e.type||"visualization"===e.type&&u(e,!0,!1);case"map":return"map"===e.type||"visualization"===e.type&&u(e,!1,!0);default:return e.type===a._currentShow}}))),e.isBlank(a._currentSearch)||(d=n(_).call(_,d,(function(e){return e.name.toLowerCase().indexOf(a._currentSearch)>=0||e.owner.displayName.toLowerCase().indexOf(a._currentSearch)>=0})));var p=i(c=a._$section).call(c,".itemsContent ul.itemsList");if(p.empty(),d.length<1)a._$section.addClass("emptySearch");else{a._$section.removeClass("emptySearch"),d=_.sortBy(d,(function(e){var t;if(r(t=a._currentSort).call(t,"date"))return Math.max(e.viewLastModified,e.createdAt)*("dateDescending"==a._currentSort?-1:1);if("alphaAscending"==a._currentSort)return e.name.toLowerCase();if("popularity"==a._currentSort){for(var n=e.viewCount||0;n.length<10;)n="0"+n;return(e.owner.id==e.tableAuthor.id?"a":"z")+n+e.name.toLowerCase()}return"publicationDate"==a._currentSort?-1*(e.publicationDate||0):void 0}));var m=0,f=d.length;a._renderBlock=function(n){var r;if(!(f<=0)){_.each(s(d).call(d,m,m+20),(function(n){var i=e.renderTemplate("viewItemContainer",{view:n,typeClass:a._typeClass},{".viewIcon@title":function(e){var t=e.context.view;return"Visualization"===t.styleClass?u(t,blist.translations.core.view_types.chart,o(blist.translations.core.view_types)).capitalize():_.get(t,"displayName",_.get(t,"name","")).capitalize()},".viewIcon@class+":function(e){var t=e.context.view;switch(t.styleClass){case"Visualization":return u(t,"typeChart","typeMap");case"Visualization_canvas_table":return"typeBlist";case"Visualization_canvas_chart":return"typeChart";case"Visualization_canvas_map":return"typeMap";case"Measure":return"typeMeasure";default:return"type"+t.styleClass}},".icon@class+":function(e){return"Data_lens"===e.context.view.styleClass?"icon-cards":""},".nameLink@href":"view.url",".name":"view.name!",".name@title":"view.name",".pubDate":function(e){return moment(1e3*(e.context.view.publicationDate||0)).format("LLL")},".authorLine .date":function(e){var t=new Date(1e3*Math.max(e.context.view.viewLastModified||0,e.context.view.createdAt||0,e.context.view.rowsUpdatedAt||0)),a="en"===blist.locale||""===blist.locale?"MMMM D, YYYY":"LL";return moment(t).format(a)},".description":function(a){if(e.isBlank(a.context.view.description))return"";var n={ALLOWED_TAGS:["a"],ALLOWED_ATTR:["href","rel","target"]},i=t.sanitize(a.context.view.description,n),r=[];return e("<p>"+i+"</p>").contents().each((function t(){if(3===this.nodeType)r.push(this.textContent.linkify('rel="nofollow noreferrer external"'));else{var a=e(this);a.is(":not(a)")?a.contents().each(t):r.push(this.outerHTML)}})),t.sanitize(r.join(""),n)},".deleteViewLink@class+":function(e){return l(_).call(_,e.context.view.rights,blist.rights.view.DELETE_VIEW)?"":"hide"},".viewItem@class+":"typeClass"});i.data("view",n),n.id==a._view.id&&i.addClass("current"),n.owner.id==n.tableAuthor.id&&i.addClass("ownerItem"),_.defer((function(){i.expander({contentSelector:".description"})})),p.append(i)}));var c=i(r=a._$section).call(r,".moreLink");if(m+=20,(f-=20)>0?(c.removeClass("hide"),1==f?c.text(e.t("screens.ds.grid_sidebar.view_list.pagination.last")):c.text(e.t("screens.ds.grid_sidebar.view_list.pagination.next",{count:Math.min(f,20)}))):c.addClass("hide"),!n){var h=a._$section.closest(".scrollContent");h.animate({scrollTop:Math.min(a._$section.outerHeight(!0)-h.height(),h.scrollTop()+h.height()-c.outerHeight(!0))},"slow")}}},a._renderBlock(!0)}},m=[{text:e.t("screens.ds.grid_sidebar.view_list.sort.popularity"),name:"popularity"},{text:e.t("screens.ds.grid_sidebar.view_list.sort.dateDescending"),name:"dateDescending"},{text:e.t("screens.ds.grid_sidebar.view_list.sort.dateAscending"),name:"dateAscending"},{text:e.t("screens.ds.grid_sidebar.view_list.sort.alphaAscending"),name:"alphaAscending"}],f=function(t){var a,n,r,s,d,u,f=i(a=t._$section).call(a,".sortMenu");f.menu({menuButtonContents:e.t("screens.ds.grid_sidebar.view_list.sort_title"),menuButtonTitle:e.t("screens.ds.grid_sidebar.view_list.sort_title"),noFlip:!0,contents:o(_).call(_,m,(function(e){return{text:e.text,href:"#"+e.name,className:"none"+(e.name==t._currentSort?" checked":"")}}))}),i(f).call(f,".menuDropdown a").on("click",(function(a){var n;a.preventDefault();var r=e(this);r.closest("li").is(".checked")||(i(n=r.closest(".menuDropdown")).call(n,".checked").removeClass("checked"),r.closest("li").addClass("checked"),t._currentSort=e.hashHref(r.attr("href")),p(t))}));var h=i(n=t._$section).call(n,".showMenu");if(!h.hasClass("hide")){var g,v=o(_).call(_,["chart","map","calendar","filter","data_lens","measure","api","grouped","form"],(function(a){return{text:e.t("core.view_types_plural."+a),className:a.replace(/^(.)(.+)/,(function(e,t,a){return"type"+t.toUpperCase()+a})),href:"#"+a,onlyIf:_.some(t._viewList,(function(e){return"visualization"===e.type?l(_).call(_,["chart","map"],a):e.type===a}))}}));h.menu({menuButtonContents:e.t("screens.ds.grid_sidebar.view_list.filter_title"),menuButtonTitle:e.t("screens.ds.grid_sidebar.view_list.filter_title"),contents:c(g=[{text:e.t("screens.ds.grid_sidebar.view_list.filter.all"),className:"none checked",href:"#all"}]).call(g,v)}),i(h).call(h,".menuDropdown .typeData_lens .icon").addClass("icon-cards"),i(h).call(h,".menuDropdown a").on("click",(function(a){var n;a.preventDefault();var r=e(this);if(!r.closest("li").is(".checked")){t._currentShow=e.hashHref(r.attr("href"));var s=i(n=r.closest(".menuDropdown")).call(n,".checked");s.removeClass("checked").addClass("type"+e.hashHref(s.children("a").attr("href")).capitalize()),r.closest("li").addClass("checked").removeClass("type"+t._currentShow.capitalize()),p(t)}}))}i(r=t._$section).call(r,".textPrompt").example((function(){return e(this).attr("title")}));var b=i(s=t._$section).call(s,".viewSearch"),y=i(d=t._$section).call(d,".clearViewSearch"),w=function(){var a=b.val().toLowerCase();y.toggle(!e.isBlank(a)),t._currentSearch=a,p(t)};y.on("click",(function(e){e.preventDefault(),b.val(""),b.focus().trigger("blur"),w()})),b.on("blur",(function(){_.defer(w)})).closest("form").on("submit",(function(e){e.preventDefault(),_.defer(w)})),i(u=t._$section).call(u,".moreLink").on("click",(function(e){e.preventDefault(),_.isFunction(t._renderBlock)&&t._renderBlock()})),p(t)};e.Control.extend("pane_viewList",{_init:function(){var t=this;t._super.apply(t,arguments),t._typeClass="view",t._currentSort="popularity",t._currentShow="all",t.$dom().on("click",".deleteViewLink",(function(a){a.preventDefault();var n=e(this).closest("li"),i=n.data("view");if(confirm(e.t("screens.ds.grid_sidebar.view_list.delete_confirm",{name:i.name}))){var r;t._view.id==i.id&&t._view.getParentDataset((function(t){e.isBlank(t)||(r=t)})),i.remove((function(){var a;n.remove(),d(a=t._viewList).call(a,_.indexOf(t._viewList,i),1),e.isBlank(blist.datasetPage)||blist.datasetPage.$moreViewsTab.contentIndicator().setText(t._viewList.length),e.isBlank(r)||r.redirectTo()}))}}))},getTitle:function(){return e.t("screens.ds.grid_sidebar.view_list.views.title")},getSubtitle:function(){return e.t("screens.ds.grid_sidebar.view_list.views.subtitle")},_getSections:function(){return[{customContent:{template:"itemsListBlock",data:{resultType:"view"},callback:function(e){var t=this;t._startProcessing(),t._$section=e,t._view.getRelatedViews((function(e){t._finishProcessing(),t._viewList=e,f(t)}))}}}]}},{name:"viewList"},"controlPane"),!e.isBlank(blist.sidebarHidden.moreViews)&&blist.sidebarHidden.moreViews.views||e.gridSidebar.registerConfig("moreViews.viewList","pane_viewList",1),e.Control.extend("pane_snapshotList",{_init:function(){var t=this;t._super.apply(t,arguments),t._typeClass="snapshot",t._currentSort="publicationDate",t._currentShow="all",t.$dom().on("click",".deleteViewLink",(function(a){a.preventDefault();var n=e(this).closest("li"),i=n.data("view");if(confirm(e.t("screens.ds.grid_sidebar.view_list.delete_snapshot_confirm",{name:i.name,date:new Date(1e3*(i.publicationDate||0)).format("F d, Y g:ia")}))){var r;t._view.id==i.id&&t._view.getPublishedDataset((function(t){e.isBlank(t)||(r=t)})),i.remove((function(){var a;n.remove(),d(a=t._viewList).call(a,_.indexOf(t._viewList,i),1),e.isBlank(r)||r.redirectTo()}))}}))},getTitle:function(){return e.t("screens.ds.grid_sidebar.view_list.snapshots.title")},getSubtitle:function(){return e.t("screens.ds.grid_sidebar.view_list.snapshots.subtitle")},_getSections:function(){return[{customContent:{template:"itemsListBlock",directive:{".sortMenu@class+":"hide",".showMenu@class+":"hide"},data:{resultType:"dataset",hide:"hide"},callback:function(e){var t=this;t._startProcessing(),t._$section=e,t._view.getSnapshotDatasets((function(e){t._finishProcessing(),t._viewList=e,f(t)}))}}}]}},{name:"snapshotList"},"controlPane"),!e.isBlank(blist.sidebarHidden.moreViews)&&blist.sidebarHidden.moreViews.snapshots||e.gridSidebar.registerConfig("moreViews.snapshotList","pane_snapshotList",2)}(jQuery)},84875:function(e,t,a){var n=a(49138);!function(e){e.fn.pillButtons=function(t){var a=e.extend({},e.fn.pillButtons.defaults,t);this.each((function(){var t=e(this);n(t).call(t,"a").on("click",(function(i){i.preventDefault();var r=e(this);a.hasClickHandler(r)||(a.multiState?r.toggleClass("active"):(n(t).call(t,"li a."+a.activeClass).removeClass("active"),r.addClass("active")))})),e.isBlank(a.defaultSelector)||n(t).call(t,a.defaultSelector).addClass(a.activeClass)}))},e.fn.pillButtons.defaults={activeClass:"active",defaultSelector:"li:first-child a",hasClickHandler:function(){return!1},multiState:!1}}(jQuery)},13733:function(e,t,a){var n=a(17933),i=a(49138),r=a(21456),s=a(4081),o=a(96110);!function(e){var t=!1,a={},l={};e.fn.popupSelect=function(c){var d=e.extend({},e.fn.popupSelect.defaults,c);return e.each(this,(function(){var c,u=e(this),p=_.uniqueId(),m=e.tag({tagName:"div",class:"popupSelectContainer","data-popupid":p,contents:[{tagName:"p",class:"popupSelectPrompt",contents:d.prompt},{tagName:"ul",class:n(c=["popupSelectList"]).call(c,e.arrayify(d.listContainerClass))}]});u.data("popupSelect-$popup",m);var f=i(m).call(m,".popupSelectList");_.each(d.choices,(function(t){var a,n=_.uniqueId();l[n]=t,a=_.isFunction(d.isSelected)?d.isSelected(t):r(_).call(_,e.arrayify(d.selectedItems),t);var i=e.tag({tagName:"li",class:["none",{value:"checked",onlyIf:a}],"data-itemid":n,contents:[{tagName:"span",class:"icon selectedIcon"},{tagName:"div",class:"contentWrapper",contents:d.renderer(t)}]});f.append(i)}));var h=u.socrataTip({content:m,fill:"#444444",isSolo:!0,onShowCallback:d.onShowCallback,shownCallback:function(t){var a;i(a=e(t)).call(a,".popupSelectList").lockScroll(!0)},stroke:"#444444",trigger:"click"});u.data("popupSelect-tip",h),a[p]={opts:d,selectedItems:_.compact(e.arrayify(d.selectedItems)),tip:h},u.parents().on("scroll",(function(){h.hide()})),t||(e.live(".popupSelectList li","click",(function(){var t,n,i=e(this),r=a[i.closest(".popupSelectContainer").attr("data-popupid")];r.opts.selectCallback(l[i.attr("data-itemid")],!i.hasClass("checked"))?r.opts.multiselect?i.toggleClass("checked"):(i.siblings().removeClass("checked"),i.addClass("checked")):d.canDeselect&&i.removeClass("checked"),r.selectedItems=e.makeArray(s(t=o(n=i.siblings().addBack()).call(n,".checked")).call(t,(function(){return l[e(this).attr("data-itemid")]}))),r.opts.dismissOnClick&&r.tip.hide()})),t=!0)}))},e.fn.popupSelect_update=function(t){return this.each((function(){var n=e(this),i=n.data("popupSelect-$popup"),r=a[i.attr("data-popupid")],s=_.intersection(r.selectedItems,t);n.popupSelect(e.extend({},r.opts,{choices:t,selectedItems:s}))}))},e.fn.popupSelect_selectedItems=function(){return a[this.data("popupSelect-$popup").attr("data-popupid")].selectedItems},e.fn.popupSelect.defaults={canDeselect:!1,choices:[],dismissOnClick:!0,isSelected:null,listContainerClass:[],multiselect:!1,onShowCallback:null,positions:["bottom","top"],prompt:"Choose one:",renderer:function(e){return e},selectCallback:function(){return!0},selectedItems:null}}(jQuery)},52863:function(e,t,a){var n=a(49138),i=a(35188),r=a(96110);a(60148),a(29954),function(e){var t={calendar:{name:"calendar",domId:"calendarRenderType",initFunction:"socrataCalendar",javascripts:[{assets:"shared-calendar"}],stylesheets:[{assets:"display-calendar"},"/stylesheets/fullcalendar.css",{assets:"rich-render-bundle"}],scrollsInline:!1},visualization_canvas_calendar:{name:"visualization_canvas_calendar",domId:"calendarRenderType",initFunction:function(e,t){var a=t.view.displayFormat.visualizationCanvasMetadata.vifs[0],n=a.series[0].dataSource.filters||[],i=new window.blist.Visualizations.views.FlyoutRenderer;a.series[0].dataSource.filters=n,e.on("SOCRATA_VISUALIZATION_FLYOUT",(function(e){e.originalEvent.detail?i.render(e.originalEvent.detail):i.clear()})),e.socrataCalendar(a,{displayFilterBar:!1})},scrollsInline:!1,translations:["controls.common.visualization"]},chart:{name:"chart",domId:"chartRenderType",initFunction:"socrataChart",javascripts:[{assets:"shared-chart"}],stylesheets:["/stylesheets/chart-screen.css",{assets:"rich-render-bundle"},{assets:"display-chart"}],scrollsInline:!0,translations:["controls.charts","controls.common.visualization"]},form:{name:"form",domId:"staticRenderType",initFunction:function(){},scrollsInline:!1},visualization_canvas_map:{name:"visualization_canvas_map",domId:"mapRenderType",initFunction:function(e,t){var a=t.view.displayFormat.visualizationCanvasMetadata.vifs[0],n=a.series[0].dataSource.filters||[];n.forEach((function(e){e.arguments||"noop"!==e.function||(e.arguments=null)})),a.series[0].dataSource.filters=n,e.socrataUnifiedMap(a,{displayFilterBar:!1,toggleMapLayersInternally:!0})},scrollsInline:!0,translations:["controls.map"]},map:{name:"map",domId:"mapRenderType",initFunction:"socrataMap",javascripts:["https://js.arcgis.com/3.42/",{assets:"shared-map"}],stylesheets:[{assets:"render-images-bundle",hasImages:!0},{assets:"display-map"},{assets:"rich-render-bundle"}],scrollsInline:!0,translations:["controls.map","controls.common.visualization"]},geoRows:{name:"geoRows",domId:"mapRenderType",initFunction:"socrataMap",javascripts:["https://js.arcgis.com/3.42/",{assets:"shared-map"}],stylesheets:[{assets:"render-images-bundle",hasImages:!0},{assets:"display-map"},{assets:"rich-render-bundle"}],scrollsInline:!0,translations:["controls.map","controls.common.visualization"]},fatrow:{name:"fatrow",domId:"fatRowRenderType",initFunction:function(t,a){t.fatrowRenderType(e.extend({view:a.view,columnDeleteEnabled:a.editEnabled&&"blist"==a.view.type&&a.view.hasRight(blist.rights.view.REMOVE_COLUMN),columnPropertiesEnabled:a.editEnabled},a.common,a.fatrow))},javascripts:[{assets:"shared-richRenderers"}],templates:["fatrow","fatrow_header"],translations:["screens.ds.column_tip","controls.grid"],reset:function(){this.$dom.children(".renderContent").removeData().children(".columnHeaders, .rowList").empty().end().children(".templateRow").removeData().empty()},stylesheets:[{assets:"render-images-bundle",hasImages:!0},{assets:"rich-render-bundle"}],scrollsInline:!1},page:{name:"page",domId:"pageRenderType",initFunction:"pageRenderType",javascripts:[{assets:"shared-richRenderers"}],templates:["page_render_type"],reset:function(){this.$dom.children(".renderContent").removeData().children(".content").empty().removeData().end().children(".navigation").removeData()},stylesheets:[{assets:"render-images-bundle",hasImages:!0},{assets:"rich-render-bundle"}],scrollsInline:!1},href:{name:"href",domId:"staticRenderType",stylesheets:[{assets:"dataset-about-minimal",hasSpecialSelectors:!0},{assets:"display-blob"}],javascripts:[{assets:"shared-blob"}],scrollsInline:!1,initFunction:function(t,a){t.blobDataset(e.extend({view:a.view,editEnabled:a.editEnabled},a.common,a.href))}},federated:{name:"href",domId:"staticRenderType",stylesheets:[{assets:"dataset-about-minimal",hasSpecialSelectors:!0},{assets:"display-blob"}],javascripts:[{assets:"shared-blob"}],scrollsInline:!1,initFunction:function(t,a){t.blobDataset(e.extend({view:a.view,editEnabled:a.editEnabled},a.common,a.href))}},blob:{name:"blob",domId:"staticRenderType",stylesheets:[{assets:"dataset-about-minimal",hasSpecialSelectors:!0},{assets:"display-blob"}],javascripts:[{assets:"shared-blob"}],scrollsInline:!1,initFunction:function(t,a){t.blobDataset(e.extend({view:a.view,editEnabled:a.editEnabled},a.common,a.blob))}},table:{name:"socrataVizTable",domId:"gridRenderType",javascripts:[{assets:"shared-table-render"}],stylesheets:[],initFunction:function(t,a){var n=e.extend({view:a.view,columnDeleteEnabled:!1,columnPropertiesEnabled:!1,columnNameEdit:!1,showAddColumns:!1,editEnabled:!1},a.common,a.table);t.socrataVizDatasetGrid(n)},scrollsInline:!0,translations:[]}};t.api=t.table,t.metadata_table=t.table,e.fn.renderTypeManager=function(t){var n=e(this[0]).data("renderTypeManager");return n||(n=new a(t,this[0])),n};var a=function t(a,n){this.settings=e.extend({},t.defaults,a),this.currentDom=n,this.init()};e.extend(a,{defaults:{defaultTypes:null,handleResize:!0,view:null},prototype:{init:function(){var t=this,a=t.$dom();a.data("renderTypeManager",t),n(a).call(a,".renderTypeNode").addClass("hide"),t.typeInfos={},t.visibleTypes={},t.settings.view.bind("valid",(function(){_.isEmpty(t.visibleTypes)||_.each(t.visibleTypes,(function(e,a){e&&t.show(a)}))})).bind("displaytype_change",(function(){var a=e.extend({},t.settings.view.metadata.renderTypeConfig.visible);_.each(i(_).call(_,t.visibleTypes),(function(e){a[e]||t.hide(e)})),_.each(a,(function(e,a){e&&t.show(a)}))})),a.on("click",".renderTypeNode > .divider .close",(function(a){a.preventDefault(),t.hide(e(this).closest(".renderTypeNode").data("rendertype"))})),t._loadedTypes={};var r=t.settings.defaultTypes||t.settings.view.metadata.renderTypeConfig.visible;if(_.isString(r)){var s={};s[r]=!0,r=s}_.each(r,(function(e,a){e&&t.show(a)})),t.settings.handleResize&&e(window).on("resize",(function(e,a,n){a!=window&&_.each(t.visibleTypes,(function(e,a){t.$domForType(a).trigger("resize",[this,n])}))}))},$dom:function(){return this._$dom||(this._$dom=e(this.currentDom)),this._$dom},setTypeConfig:function(t,a){var n=this,i=s(n,t);n.settings[i.name]=n.settings[i.name]||{},e.extend(n.settings[i.name],a)},show:function(t,a){var n=this,i=s(n,t);if(n.visibleTypes[t]=!0,n.settings.view.valid){var r=e.deepGetStringField(n.settings.view,"metadata.renderTypeConfig.active."+t+".id");r&&i.activeView&&i.activeView.id!=r&&(i._assetsLoaded=!0,delete i._initialized,_.isFunction(i.reset)&&i.reset()),l(n,t,a),i.$dom.is(":visible")||(i.$dom.removeClass("hide").children(".renderContent").trigger("show"),n.$dom().toggleClass("multipleRenderers",n.$dom().children(".renderTypeNode:visible").length>1),n.$dom().trigger("render_type_shown",[t]),e(window).trigger("resize"))}},hide:function(t){var a=this,n=s(a,t);delete a.visibleTypes[t],n.$dom.is(":visible")&&(n.$dom.addClass("hide").children(".renderContent").trigger("hide"),a.$dom().toggleClass("multipleRenderers",a.$dom().children(".renderTypeNode:visible").length>1),a.$dom().trigger("render_type_hidden",[t]),e(window).trigger("resize"))},toggle:function(e){var t=this;t.visibleTypes[e]?t.hide(e):t.show(e)},update:function(e,t){var a=this;if("page"===e){var n=a.$domForType(e)[0],i=_.get(t,"row.data",[]),r=_.get(a,"settings.view.columns");a.settings.view.trigger("row_clicked",[n,i,r])}},$domForType:function(e){return o(this,e),s(this,e).$dom.children(".renderContent")}}});var s=function(a,n){if(_.isUndefined(a.typeInfos[n])){var i=e.extend(!0,{},t[n]);if(e.isBlank(i))throw"missing type info for "+n;a.typeInfos[n]=i}return a.typeInfos[n]},o=function(t,a){var i=s(t,a),o=i.$dom;if(e.isBlank(o)){var l;if((o=n(l=t.$dom()).call(l,"."+i.domId)).length<1){var c,d,u=t.settings.view.metadata.availableDisplayTypes,p=_.indexOf(u,a),m=t.$dom().children(".renderTypeNode");p<0&&(d=m.eq(0));for(var f=p+1;f<u.length&&e.isBlank(d);f++){var h=r(m).call(m,"[data-renderType="+u[f]+"]");h.length>0&&(d=h)}var g=_.get(t,"settings.view.name",""),v=e.tag2({_:"div",className:["fullHeight","renderTypeNode","hide",i.domId],"data-renderType":a,"aria-label":g+" ("+a+")"});e.isBlank(d)||d.length<1?t.$dom().append(v):d.before(v),o=n(c=t.$dom()).call(c,"."+i.domId)}if(o.children(".renderContent").length<1){var b=e.tag({tagName:"div",class:["renderContent","fullHeight"]});b.append(o.children()),o.append(b)}o.children(".divider").length<1&&!t.settings.hideDividers&&o.prepend(e.tag({tagName:"div",class:"divider",contents:{tagName:"a",href:"#Hide",class:"close",title:"Hide section",contents:{tagName:"span",class:"icon"}}})),i.$dom=o}},l=function(t,a,i){var r=s(t,a);if(!r._initialized){o(t,a);var l=r.$dom,c=n(l).call(l,".renderContent"),d=function(){t.settings.view.getViewForDisplay(a,(function(a){r.activeView=a,_.isFunction(e.fn[r.initFunction])?c[r.initFunction](e.extend({view:a,deoptimizeRender:t.settings.deoptimizeRender,editEnabled:t.settings.editEnabled},t.settings.common,t.settings[r.name],i)):_.isFunction(r.initFunction)&&r.initFunction(c,e.extend({},t.settings,{view:a})),c.trigger("show")}))};r.scrollsInline?c.addClass("scrollContent"):c.removeClass("scrollContent"),r._assetsLoaded?d():blist.util.assetLoading.loadAssets(r,d,(function(){c.trigger("show"),e(window).trigger("resize",[null,!0])})),r._initialized=!0}}}(jQuery)},17064:function(e,t,a){var n=a(49138);!function(e){e.fn.stars=function(t){var a=e.extend({},e.fn.stars.defaults,t);return this.each((function(){var t=e(this);t.addClass("jsEnabled"),e.isBlank(a.value)||(t.attr("data-rating",a.value),t.attr("title",e.t("controls.common.stars.tooltip",{number:a.value})),n(t).call(t,":radio").eq(parseInt(a.value)).attr("checked","checked")),t.on("change",(function(){_.defer((function(){_.isFunction(a.onChange)&&a.onChange(n(t).call(t,":radio:checked").val())}))}))}))},e.fn.stars.defaults={onChange:function(){},value:null}}(jQuery)},55565:function(e,t,a){var n=a(11796),i=a(27255),r=a(96110),s=a(4081),o=a(17933);a(89041),a(42e3),function(e){e.fn.userPicker=function(a){var n=e(this[0]).data("userPicker");return n||(n=new t(a,this[0])),n};var t=function t(a,n){this.settings=e.extend({},t.defaults,a),this.currentDom=n,this.init()};e.extend(t,{defaults:{chooseCallback:function(){},filterCallback:function(){return!0},limit:10,fetchDomainUsers:!1,valueFunction:function(e){return e.id}},prototype:{init:function(){var e=this,t=e.$dom();t.data("userPicker",e),t.attr("autocomplete","off"),t.closest("form").attr("autocomplete","off"),t.awesomecomplete({attachTo:e.settings.attachTo||t.offsetParent(),forcePosition:!0,suggestionListClass:"autocomplete userPicker",typingDelay:500,dataMethod:function(t,a,n){l(e,t,n)},renderFunction:c,onComplete:function(t){d(e,t)},valueFunction:e.settings.valueFunction})},$dom:function(){return this._$dom||(this._$dom=e(this.currentDom)),this._$dom}}});var a=function(t){return e.ajax({url:"/cetera/users",data:t,success:function(e){return e||[]}})},l=function(t,l,c){if(l=n(e).call(e,l),e.isBlank(l))c([]);else{var u=l.match(/\w{4}-\w{4}$/);if(e.isBlank(u)){var p={limit:t.settings.limit,q:l};if(t.settings.fetchDomainUsers){var m=e.extend({domain:window.location.host},p),f=e.extend({flags:"admin"},p),h=a(m),g=a(f);e.when(h,g).done((function(e,a){var n,l,d,u;c(i(n=r(l=s(d=_.chain(o(u=e[0]).call(u,a[0]))).call(d,(function(e){return new User(e)}))).call(l,t.settings.filterCallback).keyBy("id")).call(n).value())}))}else{var v=a(p);e.when(v).done((function(e){var a,n;c(r(a=s(n=_.chain(e)).call(n,(function(e){return new User(e)}))).call(a,t.settings.filterCallback).value())}))}}else User.createFromUserId(u[0],(function(e){c([]),t.settings.filterCallback(e)&&d(t,e)}),(function(){c([])}))}},c=function(e){return'<p class="title">'+e.displayName+'</p><p class="matchRow"><span class="matchedField">Email:</span> '+e.email+"</p>"},d=function(e,t){e.settings.chooseCallback(t)}}(jQuery)},81359:function(e,t,a){var n=a(49138),i=a(96110);a(89041),a(426),a(2980),function(e){e.fn.wizardPrompt=function(a){var n=e(this[0]).data("wizardPrompt");return n||(n=new t(a,this[0])),n};var t=function t(a,n){this.settings=e.extend({},t.defaults,a),this.currentDom=n,this.init()};e.extend(t,{defaults:{buttons:null,buttonCallback:null,closeCallback:null,closeEvents:null,closeSelector:"a:not(.wizExclude), :input:not(.wizExclude)",positions:null,prompt:null},prototype:{init:function(){var t,a=this,r=a.$dom();r.data("wizardPrompt",a),a._uid=_.uniqueId();var s=e('<div class="wizardPrompt"><a href="#close" title="Dismiss" class="wizardDismiss"></a><span class="prompt">'+a.settings.prompt+"</span></div>");if(!_.isEmpty(a.settings.buttons)){s.append('<ul class="actionButtons"></ul>');var o=n(s).call(s,"ul.actionButtons");_.each(a.settings.buttons,(function(t){var a=e.button(e.htmlEscape(t.text));a.data("wizardValue",t.value),o.append(e("<li></li>").append(a))}))}n(s).call(s,".actionButtons a").click((function(t){t.preventDefault(),_.isNull(a.settings.buttonCallback)||a.settings.buttonCallback(e(this).data("wizardValue")),_.defer((function(){a.close()}))})),s.children(".wizardDismiss").click((function(e){e.preventDefault(),_.isFunction(a.settings.dismissCallback)&&a.settings.dismissCallback(),a.close()})),r.socrataTip({content:s,closeOnClick:!1,overlap:-10,trigger:"now",killTitle:!1,positions:a.settings.positions});var l=a.settings.closeEvents;_.isNull(l)&&(l="click, change");var c=i(t=n(r).call(r,a.settings.closeSelector).addBack()).call(t,a.settings.closeSelector);"string"==typeof l&&(l=l.replace(/\s+/g,"").split(",")),_.each(l,(function(e){c.bind(e+".wizardPrompt"+a._uid,(function(){a.close()}))}))},$dom:function(){return this._$dom||(this._$dom=e(this.currentDom)),this._$dom},close:function(){var e,t=this;t.$dom().socrataTip().destroy(),t.$dom().removeData("wizardPrompt"),n(e=t.$dom()).call(e,t.settings.closeSelector).unbind(".wizardPrompt"+t._uid),_.isNull(t.settings.closeCallback)||t.settings.closeCallback()}}})}(jQuery)},73505:function(){"use strict";!function(e,t){if("function"!=typeof t)throw new Error("exports must be a function");window.loadedModules=window.loadedModules||{};var a=window.loadedModules;a[e]?console.debug("attempted to add '".concat(e,"' to window.loadedModules, but it is already loaded! ")):(console.debug("adding '".concat(e,"' to window.loadedModules")),a[e]=!0,t())}("jqModal",(function(){return function(e){e.fn.jqm=function(n){var i={overlay:50,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:r,ajaxText:"",target:r,modal:r,toTop:r,onShow:r,onHide:r,onLoad:r};return this.each((function(){if(this._jqm)return a[this._jqm].c=e.extend({},a[this._jqm].c,n);t++,this._jqm=t,a[t]={c:e.extend(i,e.jqm.params,n),a:r,w:e(this).addClass("jqmID"+t),s:t},i.trigger&&e(this).jqmAddTrigger(i.trigger)}))},e.fn.jqmAddClose=function(e){return u(this,e,"jqmHide")},e.fn.jqmAddTrigger=function(e){return u(this,e,"jqmShow")},e.fn.jqmShow=function(t){return this.each((function(){t=t||window.event,e.jqm.open(this._jqm,t)}))},e.fn.jqmHide=function(t){return this.each((function(){t=t||window.event,e.jqm.close(this._jqm,t)}))},e.jqm={hash:{},open:function(t,s){var l=a[t],d=l.c,u="."+d.closeClass,p=(p=parseInt(l.w.css("z-index")))>0?p:3e3,m=e("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":p-1,opacity:d.overlay/100});if(l.a)return r;if(l.t=s,l.a=!0,l.w.css("z-index",p),d.modal?(n[0]||c("on"),n.push(t)):d.overlay>0?l.w.jqmAddClose(m):m=r,l.o=m?m.addClass(d.overlayClass).prependTo("body"):r,i&&(e("html,body").css({height:"100%",width:"100%"}),m))for(var f in m=m.css({position:"absolute"})[0],{Top:1,Left:1})m.style.setExpression(f.toLowerCase(),"(_=(document.documentElement.scroll"+f+" || document.body.scroll"+f+"))+'px'");if(d.ajax){var h=d.target||l.w,_=d.ajax;h="string"==typeof h?e(h,l.w):e(h),_="@"==_.substr(0,1)?e(s).attr(_.substring(1)):_;h.html(d.ajaxText).load(_,(function(){d.onLoad&&d.onLoad.call(this,l),u&&l.w.jqmAddClose(e(u,l.w)),o(l)}))}else u&&l.w.jqmAddClose(e(u,l.w));return d.toTop&&l.o&&l.w.before('<span id="jqmP'+l.w[0]._jqm+'"></span>').insertAfter(l.o),d.onShow?d.onShow(l):l.w.show(),o(l),r},close:function(t){var i=a[t];return i.a?(i.a=r,n[0]&&(n.pop(),n[0]||c("off")),i.c.toTop&&i.o&&e("#jqmP"+i.w[0]._jqm).after(i.w).remove(),i.c.onHide?i.c.onHide(i):(i.w.hide(),i.o&&i.o.remove()),r):r},params:{}};var t=0,a=e.jqm.hash,n=[],i=e.browser.msie&&"6.0"==e.browser.version,r=!1,s=e('<iframe src="javascript:false;document.write(\'\');" class="jqm"></iframe>').css({opacity:0}),o=function(t){i&&(t.o?t.o.html('<p style="width:100%;height:100%"/>').prepend(s):e("iframe.jqm",t.w)[0]||t.w.prepend(s)),l(t)},l=function(t){try{e(":input:visible",t.w)[0].focus()}catch(e){}},c=function(t){e()[t]("keypress",d)[t]("keydown",d)[t]("mousedown",d)},d=function(t){var i=a[n[n.length-1]],r=!e(t.target).parents(".jqmID"+i.s)[0];return r&&l(i),!r},u=function(t,n,i){return t.each((function(){var t=this._jqm;e(n).each((function(){this[i]||(this[i]=[],e(this).on("click",(function(){for(var e in{jqmShow:1,jqmHide:1})for(var t in this[e])a[this[e][t]]&&a[this[e][t]].w[e](this);return r}))),this[i].push(t)}))}))}}(jQuery)}))},60951:function(e,t,a){"use strict";a(29954),a(89041),a(2980),a(426),a(94173);var n=a(21456),i=a.n(n),r=a(49138),s=a.n(r),o=a(4081),l=a.n(o),c=a(95599),d=a.n(c),u=a(96110),p=a.n(u),m=a(35188),f=a.n(m),h=a(52406),g=a(44703),v=a(26586),b=a.n(v),y=a(8498),w=a.n(y),C=a(39883),x=a(68973),k=a(56322),S=a(38701),T=a(55524),D=a.n(T),F=a(36586),N=a(16353),I=a(79507),B=a(29248),A=a(86404),P=a(6),E=a(35554),L=a(52879),O=a(88148),j=a.n(O),q=a(17933),V=a.n(q),M=a(70316),R=a(18394),z=a.n(R),H=a(99491),U=a.n(H),K=a(80957),W=a.n(K),G=a(7491),Q=a.n(G),Y=a(75802),X=a.n(Y),Z=a(97946),J=a.n(Z),ee=a(56942),te={};te.styleTagTransform=J(),te.setAttributes=Q(),te.insert=W().bind(null,"head"),te.domAPI=U(),te.insertStyleElement=X();z()(ee.Z,te),ee.Z&&ee.Z.locals&&ee.Z.locals;var ae=a(58477),ne=a(35165),ie=a(18139);function re(e){var t=function(){if("undefined"==typeof Reflect||!D())return!1;if(D().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(D()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,E.Z)(e);if(t){var i=(0,E.Z)(this).constructor;a=D()(n,arguments,i)}else a=n.apply(this,arguments);return(0,P.Z)(this,a)}}var se=function(e){return M.ZP.t(e,{scope:"shared.explore_banner"})},oe=function(e){(0,A.Z)(n,e);var t,a=re(n);function n(){var e,t;(0,N.Z)(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=a.call.apply(a,V()(e=[this]).call(e,r)),(0,L.Z)((0,B.Z)(t),"state",{canRender:!1}),t}return(0,I.Z)(n,[{key:"componentDidMount",value:function(){this.checkIfCanRender()}},{key:"checkIfCanRender",value:(t=(0,F.Z)(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=this,e.next=4,(0,ae.Q)(this.props.view);case 4:e.t1=e.sent,e.t2={canRender:e.t1},e.t0.setState.call(e.t0,e.t2),e.next=12;break;case 9:e.prev=9,e.t3=e.catch(0),this.setState({canRender:!1});case 12:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.view,t=(0,ne.G)()?se("introducing_explore_scgc"):se("introducing_explore_odp"),a=(0,ne.G)()?"https://support.socrata.com/hc/en-us/articles/1500012938981":"https://support.socrata.com/hc/en-us/articles/4409024688151";return this.state.canRender?h.createElement(ie.Z,{sessionStorageKey:"exploreEntryBanner",alertWhenDismissed:!1,bannerType:ie.$.Info,className:"explore-banner"},h.createElement("div",{className:"banner-content"},h.createElement(ae.P,{intro:t,url:"/d/".concat(e.id,"/explore")}),h.createElement("a",{href:a,target:"_blank",className:"learn-more-link"},se("learn_more")))):null}}]),n}(h.Component),le=blist.namespace.fetch("blist.datasetPage");blist.datasetPage.adjustSize=function(){$(window).trigger("resize")},blist.datasetPage.clearTempView=function(){$("#sidebarOptions a.alert").removeClass("alert"),$("body, #datasetBar").removeClass("unsavedView minorChange"),le.sidebar.updateEnabledSubPanes(),$("#renderTypeOptions li a:visible").each((function(){var e=$(this),t=$.urlParam(e.attr("href"),"defaultRender");"richList"==t&&(t="fatrow"),i()(_).call(_,blist.dataset.metadata.availableDisplayTypes,t)||e.addClass("hide")}))},blist.datasetPage.flashTimedNotice=function(e,t){var a=$.tag2({_:"div",className:"flash notice",contents:[{_:"a",href:"#",className:"close",contents:{_:"span",className:"icon",contents:"close"}},e]});$("#noticeContainer").append(a),s()(a).call(a,"a.close").on("click",(function(e){e.preventDefault(),a.fadeOut()})),t&&setTimeout(a.fadeOut.bind(a),t)},blist.datasetPage.setTempView=function(){if(!blist.dataset.minorChange||blist.dataset.hasRight(blist.rights.view.UPDATE_VIEW))if($("body, #datasetBar").addClass("unsavedView").toggleClass("minorChange",blist.dataset.minorChange),$("#sidebarOptions .tabFilter a").addClass("alert"),le.sidebar.updateEnabledSubPanes(),blist.currentUserId){var e=_.get(window,"socrata.featureFlags.force_use_of_modifying_lens_id_in_all_derived_views",!1),t=$("#create-child-view-button").length>0;e&&t&&blist.datasetPage.flashTimedNotice($.t("screens.ds.show.create_child_view_disabled_alert"),1e4)}else blist.datasetPage.flashTimedNotice($.t("screens.ds.show.unauthenticated_alert"),1e4)},blist.datasetPage.updateValidView=function(){$(".invalidView").removeClass("invalidView"),le.sidebar.updateEnabledSubPanes()},blist.datasetPage.updateSidebarLinks=function(){var e;if(!blist.datasetPage.sidebar)return setTimeout(blist.datasetPage.updateSidebarLinks,10);s()(e=$("#sidebarOptions")).call(e,"a[data-paneName]").each((function(){var e=$(this),t=e.attr("data-paneName");blist.datasetPage.sidebar.hasPane(t)?e.closest("li").show():e.closest("li").hide()}))},function(e){blist.dataset||(blist.dataset={}),blist.dataset.valid||e("body").addClass("invalidView")}(jQuery),$((function(){var e,t;$(".aboutLoad .aboutDataset").appendTo("#js-appended-templates"),$(".aboutLoad").remove(),$("#siteFooter, #site-chrome-footer").addClass("clearfix").appendTo(".siteInnerWrapper"),$(".outerContainer").fullScreen();try{var a=$("<div>",{id:"asset-action-bar-container"});a.insertBefore($("#datasetBar"));g.render(h.createElement("div",null,h.createElement(S.Z,{view:blist.viewCache[blist.dataset.id],user:(0,k.ts)(),willShowBar:function(){b()(blist,"sidebarHidden.edit.redirect",!0),w()(blist.sidebarHidden.edit)&&$('[data-panename="edit"]').parent().hide()},willNotShowBarBecauseUserCantDoAnything:function(){$("body").addClass("asset-action-bar-hidden")}}),h.createElement(oe,{view:blist.viewCache[blist.dataset.id]})),a[0])}catch(e){C.Z.notify({error:e,context:{component:"Grid View Asset Action Bar"}})}$("#renderTypeOptions").length>0&&($("#renderTypeOptions").pillButtons({multiState:!0,defaultSelector:null,hasClickHandler:function(e){return e.data("popupSelect-tip")}}),$.live("#renderTypeOptions a","click",(function(e){e.preventDefault();var t=$(this),a=$.urlParam(t.attr("href"),"defaultRender");if("richList"==a&&(a="fatrow"),!t.data("popupSelect-tip")){var n=function(e){if(blist.dataset.metadata.renderTypeConfig.visible[a]!=le.rtManager.visibleTypes[a])le.rtManager.toggle(a);else if(e){if(e!=_.get(blist,"dataset.metadata.renderTypeConfig.active."+a+".id",blist.dataset.id)){var t=$.extend({},blist.dataset.metadata);$.deepSet(t,e,"renderTypeConfig","active",a,"id"),blist.dataset.update({metadata:t})}le.rtManager.visibleTypes[a]&&le.rtManager.hide(a),le.rtManager.show(a)}else blist.dataset.toggleRenderType(a)};t.data("noChildren")?n():blist.dataset.getChildOptionsForType(a,(function(e){e.length>1?(t.toggleClass("active",blist.dataset.metadata.renderTypeConfig.visible[a]).popupSelect({canDeselect:!0,choices:e,isSelected:function(e){var t=$.deepGetStringField(blist.dataset.metadata,"renderTypeConfig.active."+a+".id");return $.deepGetStringField(blist.dataset.metadata,"renderTypeConfig.visible."+a)&&(e.id==t||$.isBlank(t)&&e.id==blist.dataset.id)},prompt:"Select a layer:",renderer:function(e){return e.name},selectCallback:function(e,t){return t?e===blist.dataset?n(e.id):e.getViewForDisplay(a,(function(e){n(e.id)})):n(),t}}).data("popupSelect-tip").show(),t.data("popupSelect-width",$(window).width()),$(window).on("resize",(function(){var e=$(window).width();t.data("popupSelect-tip").adjustPosition({left:e-t.data("popupSelect-width")}),t.data("popupSelect-width",e)}))):(t.data("noChildren",!0),n())}))}}))),blist.$container.on("render_type_shown",(function(e,t){if($("body").addClass(t+"-renderType"),$("#renderTypeOptions").length>0){var a=$("#renderTypeOptions li ."+t);if(a.length<1){var n=$("#renderTypeOptions li .template").parent().clone();(a=s()(n).call(n,"a").removeClass("template hide").addClass(t)).attr("title",a.attr("title").replace("template",t)),a.attr("href",$.urlParam(a.attr("href"),"defaultRender",t)),$("#renderTypeOptions").prepend(n)}a.addClass("active").removeClass("hide")}blist.dataset.metadata.renderTypeConfig.visible[t]||blist.dataset.showRenderType(t)})),blist.$container.on("render_type_hidden",(function(e,t){if($("body").removeClass(t+"-renderType"),$("#renderTypeOptions").length>0){var a=$("#renderTypeOptions li ."+t);a.length>0&&a.removeClass("active")}blist.dataset.metadata.renderTypeConfig.visible[t]&&blist.dataset.hideRenderType(t)}));var n=$.urlParam(window.location.href,"defaultRender");"richList"==n&&(n="fatrow"),$.isBlank(blist.initialRowId)||(n="page");var r=!1;if(blist.dataset.displayFormat.viewDefinitions){blist.dataset.childViews||(blist.dataset.childViews=l()(_).call(_,blist.dataset.displayFormat.viewDefinitions,"uid"));var o=blist.dataset.displayFormat.viewDefinitions[0].uid;"self"!=o&&(_.each(blist.dataset.metadata.renderTypeConfig.visible||[],(function(e,t){e&&i()(_).call(_,["table","page","fatrow"],t)&&!$.subKeyDefined(blist.dataset.metadata,"renderTypeConfig.active."+t+".id")&&$.deepSet(blist.dataset.metadata,o,"renderTypeConfig","active",t,"id")})),$.subKeyDefined(blist.dataset,"metadata.query."+o+".filterCondition")&&(blist.dataset.metadata.query[o].filterCondition.children||[]).length>0&&(r=!0))}le.rtManager=blist.$container.renderTypeManager({view:blist.dataset,defaultTypes:n,editEnabled:!1,columnEditEnabled:!blist.dataset.isImmutable(),common:{editColumnCallback:function(){},showRowHandle:!0,manualResize:!0},table:{addColumnCallback:function(e){le.sidebar.show("edit.addColumn",{parentId:e})}},socrataVizTable:{addColumnCallback:function(e){le.sidebar.show("edit.addColumn",{parentId:e})}},page:{defaultRowId:blist.initialRowId}});var c=le.rtManager.$domForType("socrataVizTable");$(document).on(blist.events.DISPLAY_ROW,(function(e,t,a){var n;if("string"==typeof t&&t.indexOf("/")>-1){var i=t.split("/");n=i[0],t=i[1]}var r=$.deepGet(blist.dataset.metadata.renderTypeConfig,"active","page","id"),s=r==n||$.isBlank(r)&&n==blist.dataset.id;(!a||blist.dataset.metadata.renderTypeConfig.visible.page&&!s)&&(le.rtManager.setTypeConfig("page",{defaultRowId:t}),blist.dataset.showRenderType("page",n,!s))})),le.sidebar=$("#gridSidebar").gridSidebar({position:blist.sidebarPosition||"right",onSidebarShown:function(e){var t,a=$("#sidebarOptions");s()(a).call(a,"li").removeClass("active"),s()(a).call(a,"a").removeAttr("aria-selected");var n,i=s()(t=$("#sidebarOptions")).call(t,"a[data-paneName="+e+"]");i.length>0?(a.css("background-color",i.css("background-color")),i.closest("li").addClass("active"),i.attr("aria-selected","true")):s()(n=a.css("background-color","transparent")).call(n,"li").removeClass("active")},onSidebarClosed:function(){var e,t,a=s()(e=$("#sidebarOptions")).call(e,'a[aria-selected="true"]');s()(t=$("#sidebarOptions").css("background-color","transparent")).call(t,"li").removeClass("active"),a.removeAttr("aria-selected")},renderTypeManager:blist.$container.renderTypeManager(),resizeNeighbor:blist.$container,setSidebarTop:!1,view:blist.dataset}),s()(e=$("#sidebarOptions")).call(e,"a[data-paneName]").each((function(){var e=$(this),t=e.attr("data-paneName");le.sidebar.hasPane(t)?e.on("click",(function(e){e.preventDefault(),le.sidebar.show(t),$.analytics&&$.analytics.trackEvent("dataset page (v4-chrome)",t+" pane opened",blist.dataset.id)})):e.closest("li").hide()})),le.$feedTab=s()(t=$("#sidebarOptions")).call(t,"a.feed"),le.$feedTab.is(":visible")&&le.$feedTab.contentIndicator().setText(blist.dataset.numberOfComments||"");var u=function(e){return(e.children||[]).length>0};(r||$.subKeyDefined(blist.dataset,"query.filterCondition")&&u(blist.dataset.query.filterCondition)||$.subKeyDefined(blist.dataset,"metadata.filterCondition")&&u(blist.dataset.metadata.filterCondition))&&le.sidebar.setDefault("filter.unifiedFilter");var m=$.urlParam(window.location.href,"pane")||blist.defaultPane;_.isString(m)&&!$.isBlank(m)?le.sidebar.show(m):blist.dataset.visibleColumns&&0==blist.dataset.visibleColumns.length&&!blist.sidebarHidden.edit.addColumn&&le.sidebar.show("edit.addColumn");var v=function(){le.sidebar.updateEnabledSubPanes()};blist.dataset.bind("columns_changed",v).bind("displaytype_change",v);var y=$("#searchForm .clearSearch"),T=$("#searchForm");T.on("submit",(function(e){var t,a;e.preventDefault();var n=s()(t=$(e.currentTarget)).call(t,":input.searchField").val(),i="true"===s()(a=$(e.currentTarget)).call(a,":input[name=inDatasetSearch]").val();blist.dataset.setSearchString(n,i),n?y.show():y.hide()}));var D=function(){s()(T).call(T,":input:text").trigger("focus").val(blist.dataset.metadata.jsonQuery.search).trigger("blur"),y.toggle(!$.isBlank(blist.dataset.metadata.jsonQuery.search))};y.on("click",(function(e){e.preventDefault();var t=$.extend(!0,{},blist.dataset.metadata);t.jsonQuery.search=null,blist.dataset.update({metadata:t}),D()})).hide(),blist.dataset.bind("clear_temporary",(function(){D()})),$.isBlank(_.get(blist,"dataset.metadata.jsonQuery.search",""))||(s()(T).call(T,":input").on("focus").val(blist.dataset.metadata.jsonQuery.search).on("blur"),y.show()),$("#description").expander({contentSelector:"div.descriptionContent",expanderCollapsedClass:"rightArrow",expandSelector:".descriptionExpander",moveExpandTrigger:!0,resizeFinishCallback:le.adjustSize});var F=$("#datasetIcon");F.socrataTip(F.text()),$(".fullscreenButton").on("click",(function(e){e.preventDefault(),$("#siteHeader, #site-chrome-header, #siteFooter, #site-chrome-footer").animate({opacity:"toggle"},le.adjustSize),le.adjustSize(),$(this).toggleClass("maximize").toggleClass("minimize")})),$("#shareOptions .email").on("click",(function(e){e.preventDefault(),_.isFunction(blist.dialog.sharing)&&blist.dialog.sharing(e)})),$("#shareOptions .subscribe").on("click",(function(e){e.preventDefault(),_.isFunction(blist.dialog.subscribe)&&blist.dialog.subscribe()})),$("#formatOptions select").uniform(),$("#formatOptions").formatOptions({gridSelector:c}),blist.dataset.bind("set_temporary",le.setTempView),blist.dataset.bind("clear_temporary",le.clearTempView),blist.datasetControls.unsavedViewPrompt(),$(".unsavedLine a.save").on("click",(function(e){e.preventDefault();var t=$(this);t.is(".disabled")||(t.data("saveText",t.text()),t.text(t.attr("data-savingText")),t.addClass("disabled"),blist.dataset.save((function(){t.text(t.data("saveText")),t.removeClass("disabled")})))})),$(".unsavedLine a.saveAs").on("click",(function(e){e.preventDefault(),blist.datasetControls.showSaveViewDialog()})),$(".unsavedLine a.revert, .basedOnTemp .revertLink").on("click",(function(e){window.location.reload(),$(".innerContainer .loadingSpinnerContainer").removeClass("hidden hide"),e.preventDefault()})),blist.datasetControls.hookUpPublishing($("#infoBox")),$.live(".button.editPublished","click",(function(e){e.preventDefault();var t=$(this);if(!t.hasClass("disabled")){t.closest(".bt-wrapper").length>0&&t.closest(".bt-wrapper").data("socrataTip-$element").socrataTip().hide();blist.dataset.isDefault()?blist.dataset.getOpenRevision((function(e){var t=function(e){window.location=blist.dataset.url+"/revisions/"+e.resource.revision_seq};$.isBlank(e)?blist.dataset.makeBrowserRevision((function(e){t(e)}),(function(){var e,t;s()(e=$(".editAlert")).call(e,".errorMessage").removeClass("hide"),s()(t=$(".editAlert")).call(t,".copyingMessage, .editPublished, .editMessage").addClass("hide")})):t(e)})):blist.dataset.getUnpublishedView((function(e){$.isBlank(e)?blist.dataset.isPublicationStageChangeAvailable(!0,(function(e,t){var a,n,i,r;e?(r=!1,blist.dataset.makeUnpublishedCopy((function(e){var t,a;r?(le.sidebar.show("edit"),s()(t=$(".editAlert")).call(t,".editPublished, .doneCopyingMessage").removeClass("hide"),s()(a=$(".editAlert")).call(a,".copyingMessage").addClass("hide")):e.redirectTo()}),(function(){var e,t;s()(e=$(".editAlert")).call(e,".editPublished, .editMessage").addClass("hide"),s()(t=$(".editAlert")).call(t,".copyingMessage").removeClass("hide"),r=!0}),(function(){var e,t;r&&le.sidebar.show("edit"),s()(e=$(".editAlert")).call(e,".errorMessage").removeClass("hide"),s()(t=$(".editAlert")).call(t,".copyingMessage, .editPublished, .editMessage").addClass("hide")}))):(a=t,(i=s()(n=$(".editAlert")).call(n,".editPublished")).isSocrataTip()&&i.data("socrataTip").destroy(),_.defer((function(){i.socrataTip({content:$.tag2({_:"p",className:"errorMessage",contents:a}),showSpike:!1,trigger:"now"})})))})):e.redirectTo()}))}})),blist.dataset.isUnpublished()&&"true"==$.urlParam(window.location.href,"firstRun")?($("#infoBox #datasetName").socrataTip({trigger:"now",showSpike:!1,closeOnClick:!1,content:$.tag({tagName:"div",class:"unpublishedAlert",contents:[{tagName:"p",contents:$.t("screens.ds.show.unpublished_alert")},{tagName:"a",class:["button","close"],contents:"OK"}]})}),$.live(".unpublishedAlert .close","click",(function(e){e.preventDefault(),$("#infoBox #datasetName").socrataTip().destroy()}))):"form"==blist.dataset.displayType&&"published"==blist.dataset.publicationStage&&blist.dataset.id==window.sessionStorage.getItem("dataPublicAdd")&&(window.sessionStorage.removeItem("dataPublicAdd"),blist.dataset.makePublic()),blist.dataset.bind("valid",(function(){le.updateValidView()})),$(".viewError").text(blist.dataset.invalidMessage());var N=$.gridSidebar.paneForDisplayType[blist.dataset.metadata.availableDisplayTypes[0]]||$.gridSidebar.paneForDisplayType[blist.dataset.type];function I(){var e=_.get(window,"blist.feature_flags.force_use_of_modifying_lens_id_in_all_derived_views",!1),t=blist.dataset.isDefault()||!blist.dataset.isUnpublished();if(blist.dataset.isDefault()||e&&t){var a,n=blist.dataset.cleanCopy(),i=_.get(n,"query",{}),r=p()(a=_.get(n,"columns",[])).call(a,(function(e){return e.format.hasOwnProperty("group_function")||e.format.hasOwnProperty("grouping_aggregate")||e.format.hasOwnProperty("drill_down")})),s=_.has(n,"queryString"),o=!_.isEmpty(i.filterCondition),l=!_.isEmpty(i.groupBys),c=r.length>0,d=_.some(f()(_).call(_,_.get(n,"metadata.renderTypeConfig.visible",{})),(function(e){var t=e.toLowerCase();return"table"!==t&&"page"!==t&&"fatrow"!==t}));s||o||l||c||d?$("#infoBox .unsavedLine a.save").hide():$("#infoBox .unsavedLine a.save").show()}}$.isBlank(N)||!le.sidebar.isPaneEnabled(N)?$(".invalidActions .editView").hide():$(".invalidActions .editView").on("click",(function(e){e.preventDefault(),le.sidebar.show(N)})),$(".invalidActions .removeView").on("click",(function(e){e.preventDefault(),confirm($.t("screens.ds.show.remove_confirm"))&&blist.dataset.remove((function(){blist.dataset.getParentView((function(e){$.isBlank(e)?window.location="/datasets":e.redirectTo()}))}))})),$.fn.shortenActionBar=function(e){var t,a=$(this),n=function(){var e;return _.uniq(l()(e=s()(a).call(a,"#sidebarOptions li:visible")).call(e,(function(){return $(this).position().top}))).length>1},r=s()(a).call(a,"a.other").parent(),o=$("#moreActionBarButtons");o.exists()||(o=$('<ul class="hide" id="moreActionBarButtons">'),a.append(o),r.on("click",(function(e){e.preventDefault(),o.toggleClass("hide")})));var c=d()(t=e.priorityForTruncate).call(t),u=[],p=function(){var e;r.addClass("hide"),e=c.length>0?s()(a).call(a,"a."+c.shift()).parent():s()(a).call(a,"a:visible:last").parent(),u.push(e.index()),o.append(e),r.removeClass("hide")},m=1/0,f=!1,h=$("#description").position().left-$("#sidebarOptions").padding().left;$(window).on("resize",_.debounce((function(){if(!f){f=!0;var t=$(window).width();if(t<$(".siteOuterWrapper").width()-70)return m=t,void(f=!1);var a,l,d;if($(".sidebarOptionsContainer").width(function(){if("left"==blist.sidebarPosition)return.9*t;var e=$("#description, #description .collapsed").width();return e?t-(e+h):.85*t}()),m<t){for(;!n()&&o.children().exists();)a=void 0,l=void 0,d=void 0,a=u.pop(),l=o.children(":last"),d=s()(l).call(l,"a").attr("class"),i()(_).call(_,e.priorityForTruncate,d)&&c.unshift(d),l.insertBefore($("#sidebarOptions li:eq("+a+")")),o.children().exists()||(r.addClass("hide"),o.addClass("hide"));n()&&p()}else if(m>t)for(;n();)p();m=t,f=!1}}),500))},$("#actionBar").shortenActionBar({priorityForTruncate:["feed","embed","export"]}),$.device.ipad&&$(document).on("touchmove",(function(e){e.originalEvent.preventDefault()})),blist.dataset.bind("dataset_last_modified",(function(e){var t=$("#datasetName + .outOfDate"),a=$.t("screens.ds.bar.up_to_date",{current:e.lastModified});t[0]||($("#datasetName").after($("<span>").addClass("outOfDate").text(a)),t=$("#datasetName + .outOfDate")),"true"===blist.dataset._dataOutOfDate&&(a=$.t("screens.ds.bar.out_of_date",{age:e.age})),t.text(a)})),blist.dataset.bind("displaytype_change",I),blist.dataset.bind("columns_changed",I),blist.dataset.bind("query_change",I),blist.dataset.bind("query_string_change",I),_.defer((function(){var e;i()(_).call(_,["blist","blob","href","metadata_table"],blist.dataset.type)||GeoHelpers.isGeoDataset(blist.dataset)||blist.dataset.getParentView((function(e){var t;$.isBlank(e)||(0,x.Gy)(e)||s()(t=$(".basedOnParent").addClass("hasParent")).call(t,".parentName").attr("href",e.url+"/data").text(e.name)})),$.analytics&&$.analytics.trackEvent("dataset page (v4-chrome)","page loaded",blist.dataset.id);var t=null!==(e=blist.currentUserCanCreateAssets)&&void 0!==e&&e;if(!blist.currentUserId||!t){var a=$(".unsavedLine a.saveAs");a.addClass("disabled"),a.off("click"),t?a.socrataTip($.t("screens.ds.bar.save_as_button_disabled_tooltip")):a.socrataTip($.t("shared.components.asset_action_bar.button_disabled_limited_community_assets_tooltip"))}}))}))},42701:function(e,t,a){var n=a(4081),i=a(95599),r=a(17933),s=a(17089),o=a(96110);a(98933),a(67360),a(89041),a(2980),function(e){var t,a="blist.util.assetLoading",l=blist.namespace.fetch(a),c={libraries:{},translations:{}},d={libraries:{},stylesheets:{}},u=[],p=[];l.loadAssets=function(t,a,i){if(e.subKeyDefined(t,"stylesheets")||e.subKeyDefined(t,"javascripts")||e.subKeyDefined(t,"templates")||e.subKeyDefined(t,"translations")||e.subKeyDefined(t,"modals")||e.subKeyDefined(t,"newModals")){if(!e.isBlank(t.stylesheets)){var r=n(_).call(_,t.stylesheets,(function(e){return h("/styles/bundle/",[e.sheet||e],"stylesheets")[0]}));l.loadStylesheets(r,i)}var s=_.isArray(t.javascripts)&&t.javascripts.length>0,o=_.isArray(t.templates)&&t.templates.length>0,c=_.isArray(t.modals)&&t.modals.length>0,d=_.isArray(t.newModals)&&t.newModals.length>0,u=_.isArray(t.translations)&&t.translations.length>0,p=_.compact([s,o,u,c,d]).length,m=_.after(p,(function(){_.isFunction(a)&&a()}));0===p&&m(),o&&l.loadPartials(h("/templates/",t.templates,"js-appended-templates"),"js-appended-templates",m),c&&l.loadPartials(h("/modals/",t.modals,"modals"),"modals",(function(t){e.isBlank(t)||t.socrataJqm(),m()})),d&&l.loadPartials(h("/modals/",t.newModals,"newModals"),"newModals",m),s&&l.loadLibraries(l.getJavascriptSources(t.javascripts),m),u&&l.loadTranslations(t.translations,m)}else _.isFunction(a)&&a()},l.loadLibraries=function(n,r){var s=_.compact(_.flatten(e.arrayify(n)));if(_.isEmpty(s))_.isFunction(r)&&r();else{t=window.$LAB;var o={queue:s,callback:r};u.push(o);var p=!1,f=[];_.each(s,(function(n){var r=e.isPlainObject(n)?n.url:n;if(c.libraries[r]||d.libraries[r])c.libraries[r]&&(p=!0);else{var s=r,o=!1;if(e.subKeyDefined(n,"jsonp")){var u={},h="callback_"+_.uniqueId();l[h]=function(){m(r)},u[n.jsonp]=a+"."+h,s+=(r.indexOf("?")>=0?"&":"?")+e.param(u),o=!0}if(blist.configuration.development){var g;if(r.indexOf("veapicore")<0)s+=(r.indexOf("?")>=0?"&":"?")+e.param({_:i(g=(new Date).valueOf().toString()).call(g,0,9)});t=t.script(s),o||(t=t.wait((function(){m(r)})))}else t=t.script(s),s.indexOf("socket.io")>-1&&(t=t.wait()),o||f.push(r);c.libraries[r]=!0,p=!0}})),f.length>0&&(t=t.wait((function(){_.each(f,(function(e){m(e)}))}))),p||(u=_.without(u,o),_.isFunction(r)&&r())}};var m=function(t){var a;d.libraries[t]=c.libraries[t],delete c.libraries[t];var n=[];_.each(u,(function(t){_.every(t.queue,(function(t){return!_.isUndefined(d.libraries[e.isPlainObject(t)?t.url:t])}))&&(_.isFunction(t.callback)&&t.callback(),n.push(t))})),u=_.without.apply(this,r(a=[u]).call(a,n))};l.loadStylesheets=function(t,a){var r,o,l=n(r=n(o=_.chain(e.makeArray(t))).call(o,(function(t){return e.subKeyDefined(t,"sheet")?t:{sheet:t}}))).call(r,(function(t){return _.isArray(t.sheet)?n(_).call(_,t.sheet,(function(a){return e.extend({},t,{sheet:a})})):t})).flatten().reject((function(e){return d.stylesheets[e.sheet]})).value(),c=0,u=l.length,p="";_.each(l,(function(t){var n,r=t.sheet;blist.configuration.development&&(r+=(r.indexOf("?")>=0?"&":"?")+e.param({_:i(n=(new Date).valueOf().toString()).call(n,0,9)}));e.browser.msie&&window.parent!=window&&t.hasImages||e.browser.msie&&t.hasFonts||s(r).call(r,"http://")||s(r).call(r,"https://")?(u--,document.createStyleSheet?document.createStyleSheet(r):e("head").append(e.tag({tagName:"link",type:"text/css",rel:"stylesheet",href:r}))):e.socrataServer.makeRequest({url:r,contentType:"text/css",pageCache:!0,dataType:"text",success:function(n){c++,d.stylesheets[t.sheet]||(p+=n,d.stylesheets[t.sheet]=!0),c==u&&(e("head").append('<style type="text/css">'+p+"</style>\n"),_.isFunction(a)&&a())}})}))},l.loadPartials=function(t,a,n){e.isBlank(d[a])&&(d[a]={});var r=_.reject(e.arrayify(t),(function(e){return d[a][e]}));if(r.length<1)_.isFunction(n)&&n();else{var s="",o=_.after(r.length,(function(){var t=e("#"+a);t.length<1&&(e("body").append(e.tag({tagName:"div",id:a})),t=e("#"+a));var i=e(s);t.append(i),_.isFunction(n)&&n(i)}));0===r.length&&o(),_.each(r,(function(t){var n,r=e.path(t);blist.configuration.development&&(r+=(r.indexOf("?")>=0?"&":"?")+e.param({_:i(n=(new Date).valueOf().toString()).call(n,0,9)}));e.socrataServer.makeRequest({url:r,pageCache:!0,dataType:"text",contentType:"text/html",success:function(e){d[a][t]||(s+=e),o(),d[a][t]=!0}})}))}},l.loadTranslations=function(t,a){var n=o(_).call(_,e.arrayify(t),(function(t){var a=!1;return e.isPlainObject(t)&&(a=t.force,t=t.key),!(e.subKeyDefined(blist.translations,t)&&!a)&&(!0===c.translations[t]||(c.translations[t]=!0,e.socrataServer.makeRequest({url:"/"+blist.locale+"/translations/"+t.replace(/\./g,"/"),contentType:"application/json",dataType:"json",success:function(t){e.extend(!0,blist.translations,t),f()}})),!0)}));n.length>0?p.push({queue:n,callback:a}):_.isFunction(a)&&a()},l.getJavascriptSources=function(e){var t;return _.isUndefined(blist.configuration.development)&&console.warn("Application environment not set. Defaulting to production."),n(t=_(e)).call(t,(function(e){return _.get(e,"assets")?function(e){var t="shared/".concat(e.assets,".js");if(blist.configuration.development)return"/javascripts/webpack/".concat(t);var a,n=blist.configuration.webpackManifest[t];return n?r(a="".concat(n,"?")).call(a,blist.configuration.assetRevisionKey):void console.error("Asset configuration could not be found in webpack manifest for package: ",e)}(e):_.isString(e)?e:void console.error("Page attempted to load unintelligible package:",e)})).compact().value()};var f=function(){p=o(_).call(_,p,(function(t){return!_.every(t.queue,(function(t){return e.subKeyDefined(blist.translations,t.key||t)}))||(t.callback(),!1)}))},h=function(t,a,i){return n(_).call(_,a,(function(a){var n=e.subKeyDefined(a,"assets");if(n&&e.subKeyDefined(blist,"assets."+i))return blist.assets[i][a.assets];if(n&&"stylesheets"===i)return a.sheet=t+a.assets+".css",a;var r=e.isPlainObject(a)?a.url:a;return!r||s(r).call(r,"http")||s(r).call(r,"/")||(r=t+r),e.isPlainObject(a)?a.url=r:a=r,a}))}}(jQuery)},56942:function(e,t,a){"use strict";var n=a(10122),i=a.n(n),r=a(85338),s=a.n(r)()(i());s.push([e.id,".explore-banner{padding:8px 12px}.explore-banner.alert.notice .alert-container{padding:0;display:flex;align-items:center;justify-content:space-between}.explore-banner.alert.notice .alert-container .alert-dismiss{cursor:pointer;margin-left:8px;position:static;flex-grow:0;flex-shrink:0}.explore-banner .banner-content{flex-grow:1;flex-shrink:1;display:flex;justify-content:space-between;align-items:center;line-height:1.2}.explore-banner .banner-content .banner-main{display:flex;align-items:center}.explore-banner .banner-content .banner-main .pill_badge{flex-grow:0;flex-shrink:0;margin-right:4px}.explore-banner .banner-content .banner-main .btn-wrapper{flex-grow:0;flex-shrink:0;margin-left:8px}.explore-banner .banner-content .pill_badge{font-size:10px;font-weight:bold;padding:2px 8px}.explore-banner .banner-content .btn-default{border-color:#288dc1;color:#1c6387}.explore-banner .banner-content .learn-more-link{flex-grow:0;flex-shrink:0;margin-left:16px;margin-right:32px;font-size:15px;text-decoration:underline}","",{version:3,sources:["webpack://./../../../common/explore_grid/components/ExploreBanner/explore-banner.scss","webpack://./../../../common/styleguide/variables/_colors.scss"],names:[],mappings:"AAEA,gBACE,gBAAA,CAEA,8CACE,SAAA,CACA,YAAA,CACA,kBAAA,CACA,6BAAA,CAEA,6DACE,cAAA,CACA,eAAA,CACA,eAAA,CACA,WAAA,CACA,aAAA,CAIJ,gCACE,WAAA,CACA,aAAA,CACA,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,eAAA,CAEA,6CACE,YAAA,CACA,kBAAA,CAEA,yDACE,WAAA,CACA,aAAA,CACA,gBAAA,CAGF,0DACE,WAAA,CACA,aAAA,CACA,eAAA,CAIJ,4CACE,cAAA,CACA,gBAAA,CACA,eAAA,CAGF,6CACE,oBC7CI,CD8CJ,aCwPU,CDrPZ,iDACE,WAAA,CACA,aAAA,CACA,gBAAA,CACA,iBAAA,CACA,cAAA,CACA,yBAAA",sourcesContent:['@import "common/styleguide/variables/colors.scss";\n\n.explore-banner {\n  padding: 8px 12px;\n\n  &.alert.notice .alert-container {\n    padding: 0;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n\n    .alert-dismiss {\n      cursor: pointer;\n      margin-left: 8px;\n      position: static;\n      flex-grow: 0;\n      flex-shrink: 0;\n    }\n  }\n\n  .banner-content {\n    flex-grow: 1;\n    flex-shrink: 1;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    line-height: 1.2;\n\n    .banner-main {\n      display: flex;\n      align-items: center;\n\n      .pill_badge {\n        flex-grow: 0;\n        flex-shrink: 0;\n        margin-right: 4px;\n      }\n\n      .btn-wrapper {\n        flex-grow: 0;\n        flex-shrink: 0;\n        margin-left: 8px;\n      }\n    }\n\n    .pill_badge {\n      font-size: 10px;\n      font-weight: bold;\n      padding: 2px 8px;\n    }\n\n    .btn-default {\n      border-color: $primary;\n      color: $external-blue;\n    }\n\n    .learn-more-link {\n      flex-grow: 0;\n      flex-shrink: 0;\n      margin-left: 16px;\n      margin-right: 32px;\n      font-size: 15px;\n      text-decoration: underline;\n    }\n  }\n}','// You can preview these colors by loading /internal/demos/elements in your browser.\n// Note: Colors added here won\'t automatically show up in the colors demo page. Add your color to:\n// frontend/app/styles/demos/color_list.scss\n\n@import "./color_helpers";\n\n/* Base Palette Colors */\n$primary: #288dc1;\n$primary-base: $primary;\n$primary-text: shade($primary, 30%);\n$primary-light: #eaf4f9;\n$primary-dark: #176289;\n$alternate-1: #e28432;\n$alternate-1-text: shade($alternate-1, 30%);\n$alternate-2: #00a1af;\n$alternate-2-text: #00717c;\n$alternate-3: #00be9b;\n$alternate-3-text: shade($alternate-3, 20%);\n$alternate-4: tint(#425363, 40%);\n$alternate-4-text: shade($alternate-4, 40%);\n$success: lighten(#218649, 10%);\n$success-text: shade($success, 14%);\n$success-background: lighten($success, 50%);\n$error: #ce6565;\n$error-background: #faf0f0;\n$error-text: shade($error, 14%);\n$warning: shade(#fabe00, 8%);\n$warning-text: shade($warning, 40%);\n\n/* Colors light version */\n$primary-light: tint($primary, 90%);\n$alternate-1-light: tint($alternate-1, 90%);\n$alternate-2-light: tint($alternate-2, 90%);\n$alternate-3-light: tint($alternate-3, 90%);\n$alternate-4-light: tint($alternate-4, 90%);\n$success-light: tint($success, 90%);\n$error-light: tint($error, 90%);\n$warning-light: tint($warning, 93%);\n\n/* Colors dark version */\n$primary-dark: shade($primary, 30%);\n$alternate-1-dark: shade($alternate-1, 30%);\n$alternate-2-dark: shade($alternate-2, 30%);\n$alternate-3-dark: shade($alternate-3, 30%);\n$alternate-4-dark: shade($alternate-4, 30%);\n$success-dark: shade($success, 30%);\n$error-dark: #914646;\n$warning-dark: shade($warning, 30%);\n\n/* Greys */\n$white: #fff;\n$grey: #767676;\n$black: #2c2c2c;\n$orange: #e48424;\n\n/* forge var shortcuts */\n$forge-black: var(--mdc-theme-text-primary-on-background);\n$forge-blue: var(--mdc-theme-primary);\n\n/* Shades of Grey */\n$dark-grey-0: shade($grey, 10%);\n$dark-grey-1: shade($grey, 20%);\n$dark-grey-2: shade($grey, 40%);\n$dark-grey-3: shade($grey, 60%);\n\n// None of these have enough contrast to be used as text\n// on a white background. See text colors below.\n$light-grey-0: tint($grey, 10%);\n$light-grey-1: tint($grey, 20%);\n$light-grey-2: tint($grey, 40%);\n$light-grey-3: tint($grey, 60%);\n$light-grey-4: tint($grey, 80%);\n$light-grey-5: tint($grey, 90%);\n$light-grey-6: tint($grey, 93.3%);\n$light-grey-7: tint($grey, 95%);\n$light-grey-8: tint($grey, 97%);\n$light-grey-9: tint($grey, 98%);\n\n/* Text colors */\n$default-text-color: $dark-grey-1;\n$quiet-text-color: $grey;\n$light-text-color: $white;\n\n/* Background colors */\n$light-grey-bg: $light-grey-5;\n\n/* Button Colors */\n$btn-active-box-shadow-color: $black;\n\n$btn-default-color: $forge-black;\n$btn-default-background-color: $white;\n$btn-default-border-color: $light-grey-3;\n$btn-default-hover-color: $forge-black;\n$btn-default-hover-background-color: $light-grey-5;\n$btn-default-active-border-color: shade($white, 20%);\n\n$btn-simple-color: $dark-grey-1;\n$btn-simple-background-color: $light-grey-5;\n$btn-simple-hover-color: $dark-grey-1;\n$btn-simple-hover-background-color: $light-grey-4;\n\n$btn-default-dark-color: $white;\n$btn-default-dark-background-color: $grey;\n$btn-default-dark-border-color: $grey;\n$btn-default-dark-hover-background-color: shade($grey, 20%);\n\n$btn-default-busy-border-color: $white;\n$btn-default-busy-border-right-color: $light-grey-2;\n$btn-default-inverse-color: $white;\n$btn-default-inverse-background-color: transparent;\n$btn-default-inverse-border-color: $white;\n$btn-default-inverse-hover-color: $grey;\n$btn-default-inverse-hover-background-color: white;\n$btn-default-inverse-hover-border-color: transparent;\n\n$btn-primary-color: $white;\n$btn-primary-background-color: $primary-text;\n$btn-primary-border-color: $primary;\n$btn-primary-hover-background-color: shade($primary-text, 27%);\n$btn-primary-active-border-color: shade($primary, 10%);\n$btn-primary-inverse-color: $primary-text;\n$btn-primary-inverse-background-color: $white;\n$btn-primary-inverse-hover-color: $white;\n$btn-primary-inverse-hover-background-color: $primary-text;\n$btn-primary-busy-border-right-color: tint($primary, 20%);\n\n$btn-alternate-2-color: $white;\n$btn-alternate-2-background-color: $alternate-2-text;\n$btn-alternate-2-border-color: $alternate-2;\n$btn-alternate-2-hover-background-color: shade($alternate-2-text, 20%);\n$btn-alternate-2-hover-color: $white;\n$btn-alternate-2-active-border-color: shade($alternate-2, 10%);\n$btn-alternate-2-inverse-color: $alternate-2-text;\n$btn-alternate-2-inverse-background-color: $white;\n$btn-alternate-2-inverse-hover-color: $white;\n$btn-alternate-2-inverse-hover-background-color: $alternate-2-text;\n$btn-alternate-2-busy-border-right-color: tint($alternate-2, 20%);\n\n$btn-alternate-3-color: $white;\n$btn-alternate-3-background-color: $alternate-3;\n$btn-alternate-3-border-color: $alternate-3;\n$btn-alternate-3-hover-background-color: shade($alternate-3, 20%);\n$btn-alternate-3-active-border-color: shade($alternate-3, 10%);\n$btn-alternate-3-inverse-color: $alternate-3;\n$btn-alternate-3-inverse-background-color: $white;\n$btn-alternate-3-inverse-hover-color: $white;\n$btn-alternate-3-inverse-hover-background-color: $alternate-3;\n$btn-alternate-3-busy-border-right-color: tint($alternate-3, 20%);\n\n$btn-warning-color: $white;\n$btn-warning-background-color: $warning;\n$btn-warning-border-color: $warning;\n$btn-warning-hover-background-color: shade($warning, 20%);\n$btn-warning-active-border-color: shade($warning, 10%);\n$btn-warning-inverse-color: $warning;\n$btn-warning-inverse-background-color: $white;\n$btn-warning-inverse-hover-color: $white;\n$btn-warning-inverse-hover-background-color: $warning;\n\n$btn-success-color: $white;\n$btn-success-background-color: $success;\n$btn-success-border-color: $success;\n$btn-success-hover-background-color: shade($success, 20%);\n$btn-success-active-border-color: shade($success, 10%);\n$btn-success-inverse-color: $success-text;\n$btn-success-inverse-background-color: $white;\n$btn-success-inverse-hover-color: $white;\n$btn-success-inverse-hover-background-color: $success;\n\n$btn-error-color: $white;\n$btn-error-background-color: $error-dark;\n$btn-error-border-color: $error;\n$btn-error-hover-background-color: shade($error, 20%);\n$btn-error-active-border-color: shade($error, 10%);\n$btn-error-inverse-color: $error;\n$btn-error-inverse-background-color: $white;\n$btn-error-inverse-hover-color: $white;\n$btn-error-inverse-hover-background-color: $error;\n\n$btn-transparent-busy-border-color: $dark-grey-1;\n$btn-transparent-busy-border-right-color: $light-grey-2;\n\n$btn-disabled-color: $dark-grey-2;\n$btn-disabled-border-color: $light-grey-1;\n$btn-disabled-background-color: $light-grey-3;\n$btn-disabled-dark-color: $light-grey-1;\n$btn-disabled-dark-border-color: $grey;\n$btn-disabled-dark-background-color: $dark-grey-1;\n\n$tag-color: $dark-grey-2;\n$tag-background-color: $light-grey-5;\n\n/* View card */\n$federation-banner-background: rgba(20, 20, 20, 0.75);\n\n/* Header */\n$header-bg-color: #4a4747;\n$header-text-color: $white;\n$header-accent-color: #ddd;\n$header-link-hover-color: #7ac3ff;\n$header-link-hover-bg-color: #2295e1;\n$header-box-shadow-color: rgba(0, 0, 0, 0.2);\n$header-story-title-color: $light-grey-4;\n$header-story-title-hover-color: $white;\n$header-btn-disabled-color: #777;\n$header-publication-status-color: #e0e0e0;\n\n/* Settings Panel */\n$settings-panel-btn-color: $grey;\n\n/* Backgrounds */\n$light-gray-bg: $light-grey-3;\n$panel-border-color: $light-grey-4;\n\n/* Notifications Panel */\n$bell-icon-color: $white;\n$bell-icon-hover-color: #3c3c3c;\n$bell-button-active-background-color: #3b454e;\n$notification-panel-background-color: #f5f5f5;\n$notification-panel-shadow: #3e3e3e;\n$user-notification-item-border-color: #d6d6d6;\n$panel-background-color: $white;\n$secondary-panel-background-color: #000;\n$panel-header-background-color: #636a71;\n$panel-header-menu-background-color: #3b454e;\n$panel-header-text-color: $white;\n$panel-header-outline-color: #31363d;\n$panel-body-background-color: #373e46;\n$panel-footer-background-color: #4c545d;\n$panel-footer-prompt-shadow-color: #ccc;\n$panel-footer-prompt-background-color: $white;\n$panel-primary-button-background-color: #15587d;\n$panel-primary-button-text-color: $white;\n$panel-primary-button-hover-background-color: #124e6f;\n$panel-close-link-background-color: rgba(255, 255, 255, 0.15);\n$view-older-notifications-link-color: #7a7a7a;\n$notification-item-text-color: #696869;\n$product-unread-indicator-color: #e6af00;\n$settings-icon-color: #999;\n$settings-text-color: $white;\n$notification-item-background-color: $white;\n$status-notification-indicator-background-color: #00bf9d;\n$alert-notification-indicator-background-color: #e28432;\n$alert-notification-indicator-label-color: #e28432;\n$notification-title-text-color: $forge-black;\n$notification-link-color: $forge-blue;\n$checkmark-read-state-color: var(--forge-theme-icon-color);\n$checkmark-un-read-state-color: #2279a6;\n$see-new-user-notifications-link-text-color: $white;\n$see-new-user-notifications-link-background-color: #288DC1;\n$see-new-user-notifications-link-hover-background-color: #176289;\n$transient-notification-background-color: #373e46;\n$alert-delete-yes-button-background-color: #6b7ca5;\n$notification-panel-alert-table-border-color: #e4e4e4;\n$notification-panel-myalerts-paused-background-color: #fcf9ef;\n$notification-panel-myalerts-paused-border-color: #e4ad39;\n$notification-panel-myalerts-paused-title-color: #a48953;\n$notification-tabs-title-color: $forge-black;\n$notification-tabs-title-select-color: $forge-black;\n\n$alert-share-modal-text-color: #555b61;\n\n$success-base: #20b05c;\n$success-dark: #177b41;\n$error-base: #d06463;\n\n/* Map Layers Pane */\n$map-layers-panel-background-color: #f8f8f8;\n$layer-border-color: #c8c8c8;\n$menu-toggle-hover-background-color: #efefef;\n$primary-label-background-color: #fdffac;\n$layer-options-header-border-color: #e4e4e4;\n$layer-controls-color: #5e5e5e;\n$layer-controls-hover-color: #2c2c2c;\n$add-layer-button-color: #2279a6;\n$add-layer-button-border-color: #288dc1;\n\n/* Radio button */\n$radio-button-checked-background-color: #474747;\n$radio-button-checked-border-color: #c8c8c8;\n$radio-button-border-color: #e2e2e2;\n$radio-button-label-color: #5e5e5e;\n\n/* Measures Statuses */\n$status-measuring-dark: $primary-text;\n$status-on-track-dark: $success-dark;\n$status-off-track-dark: $error-text;\n$status-near-target-dark: $warning-text;\n\n$status-measuring-light: $primary-light;\n$status-on-track-light: $success-light;\n$status-off-track-light: $error-light;\n$status-near-target-light: $warning-light;\n\n$status-dark-text: $dark-grey-1;\n\n$result-card-border-measuring: $primary;\n$result-card-border-on-track: $success;\n$result-card-border-off-track: $error;\n$result-card-border-near-target: $warning;\n\n$external-blue: #1c6387;\n'],sourceRoot:""}]),t.Z=s},22097:function(e,t){var a=void 0;e=void 0;(function(){!function(t,n){var i,r,s=t,o=s.document,l=s.navigator,c=s.setTimeout,d=s.clearTimeout,u=s.encodeURIComponent,p=s.ActiveXObject,m=s.Error,f=s.Number.parseInt||s.parseInt,h=s.Number.parseFloat||s.parseFloat,_=s.Number.isNaN||s.isNaN,g=s.Math.round,v=s.Date.now,b=s.Object.keys,y=s.Object.defineProperty,w=s.Object.prototype.hasOwnProperty,C=s.Array.prototype.slice,x=function(){var e=function(e){return e};if("function"==typeof s.wrap&&"function"==typeof s.unwrap)try{var t=o.createElement("div"),a=s.unwrap(t);1===t.nodeType&&a&&1===a.nodeType&&(e=s.unwrap)}catch(e){}return e}(),k=function(e){return C.call(e,0)},$=function(){var e,t,a,i,r,s=k(arguments),o=s[0]||{};for(e=1,t=s.length;e<t;e++)if(null!=(a=s[e]))for(i in a)w.call(a,i)&&(o[i],o!==(r=a[i])&&r!==n&&(o[i]=r));return o},S=function(e){var t,a,n,i;if("object"!=typeof e||null==e)t=e;else if("number"==typeof e.length)for(t=[],a=0,n=e.length;a<n;a++)w.call(e,a)&&(t[a]=S(e[a]));else for(i in t={},e)w.call(e,i)&&(t[i]=S(e[i]));return t},T=function(e,t){for(var a={},n=0,i=t.length;n<i;n++)t[n]in e&&(a[t[n]]=e[t[n]]);return a},D=function(e,t){var a={};for(var n in e)-1===t.indexOf(n)&&(a[n]=e[n]);return a},F=function(e,t){if(e&&1===e.nodeType&&e.ownerDocument&&t&&(1===t.nodeType&&t.ownerDocument&&t.ownerDocument===e.ownerDocument||9===t.nodeType&&!t.ownerDocument&&t===e.ownerDocument))do{if(e===t)return!0;e=e.parentNode}while(e);return!1},N=function(e){var t;return"string"==typeof e&&e&&(t=e.split("#")[0].split("?")[0],t=e.slice(0,e.lastIndexOf("/")+1)),t},I={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,unavailable:null,degraded:null,deactivated:null,overdue:null,ready:null},B="11.0.0",A={},P={},E=null,L=0,O={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-degraded":"Flash is unable to preserve data fidelity when communicating with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate","flash-overdue":"Flash communication was established but NOT within the acceptable time limit"}},j={swfPath:(N(function(){var e,t,a;if(o.currentScript&&(e=o.currentScript.src))return e;if(1===(t=o.getElementsByTagName("script")).length)return t[0].src||n;if("readyState"in t[0])for(a=t.length;a--;)if("interactive"===t[a].readyState&&(e=t[a].src))return e;return"loading"===o.readyState&&(e=t[t.length-1].src)||(e=function(){var e,t;try{throw new m}catch(e){t=e}return t&&(e=t.sourceURL||t.fileName||function(e){var t,a;return"string"==typeof e&&e&&((a=e.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/))&&a[1]||(a=e.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/))&&a[1])&&(t=a[1]),t}(t.stack)),e}())?e:n}())||function(){var e,t,a,i=o.getElementsByTagName("script");for(e=i.length;e--;){if(!(a=i[e].src)){t=null;break}if(a=N(a),null==t)t=a;else if(t!==a){t=null;break}}return t||n}()||"")+"ZeroClipboard.swf",trustedDomains:t.location.host?[t.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},q=function(e){if("object"==typeof e&&null!==e)for(var t in e)if(w.call(e,t))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(t))j[t]=e[t];else if(null==I.bridge)if("containerId"===t||"swfObjectId"===t){if(!ee(e[t]))throw new Error("The specified `"+t+"` value is not valid as an HTML4 Element ID");j[t]=e[t]}else j[t]=e[t];return"string"==typeof e&&e?w.call(j,e)?j[e]:void 0:S(j)},V=function(){return{browser:T(l,["userAgent","platform","appName"]),flash:D(I,["bridge"]),zeroclipboard:{version:Se.version,config:Se.config()}}},M=function(){return!!(I.disabled||I.outdated||I.unavailable||I.degraded||I.deactivated)},R=function(e,t){var a,n,i,r={};if("string"==typeof e&&e)i=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&void 0===t)for(a in e)w.call(e,a)&&"string"==typeof a&&a&&"function"==typeof e[a]&&Se.on(a,e[a]);if(i&&i.length){for(a=0,n=i.length;a<n;a++)r[e=i[a].replace(/^on/,"")]=!0,A[e]||(A[e]=[]),A[e].push(t);if(r.ready&&I.ready&&Se.emit({type:"ready"}),r.error){var s=["disabled","outdated","unavailable","degraded","deactivated","overdue"];for(a=0,n=s.length;a<n;a++)if(!0===I[s[a]]){Se.emit({type:"error",name:"flash-"+s[a]});break}}}return Se},z=function(e,t){var a,n,i,r,s;if(0===arguments.length)r=b(A);else if("string"==typeof e&&e)r=e.split(/\s+/);else if("object"==typeof e&&e&&void 0===t)for(a in e)w.call(e,a)&&"string"==typeof a&&a&&"function"==typeof e[a]&&Se.off(a,e[a]);if(r&&r.length)for(a=0,n=r.length;a<n;a++)if(e=r[a].toLowerCase().replace(/^on/,""),(s=A[e])&&s.length)if(t)for(i=s.indexOf(t);-1!==i;)s.splice(i,1),i=s.indexOf(t,i);else s.length=0;return Se},H=function(e){return"string"==typeof e&&e?S(A[e])||null:S(A)},U=function(e){var t,a,n;if((e=te(e))&&!oe(e))return"ready"===e.type&&!0===I.overdue?Se.emit({type:"error",name:"flash-overdue"}):(t=$({},e),se.call(this,t),"copy"===e.type&&(a=(n=pe(P)).data,E=n.formatMap),a)},K=function(){if("boolean"!=typeof I.ready&&(I.ready=!1),!Se.isFlashUnusable()&&null===I.bridge){var e=j.flashLoadTimeout;"number"==typeof e&&e>=0&&(L=c((function(){"boolean"!=typeof I.deactivated&&(I.deactivated=!0),!0===I.deactivated&&Se.emit({type:"error",name:"flash-deactivated"})}),e)),I.overdue=!1,de()}},W=function(){Se.clearData(),Se.blur(),Se.emit("destroy"),ue(),Se.off()},G=function(e,t){var a;if("object"==typeof e&&e&&void 0===t)a=e,Se.clearData();else{if("string"!=typeof e||!e)return;(a={})[e]=t}for(var n in a)"string"==typeof n&&n&&w.call(a,n)&&"string"==typeof a[n]&&a[n]&&(P[n]=a[n])},Q=function(e){void 0===e?(!function(e){if(e)for(var t in e)w.call(e,t)&&delete e[t]}(P),E=null):"string"==typeof e&&w.call(P,e)&&delete P[e]},Y=function(e){return void 0===e?S(P):"string"==typeof e&&w.call(P,e)?P[e]:void 0},X=function(e){if(e&&1===e.nodeType){i&&(ye(i,j.activeClass),i!==e&&ye(i,j.hoverClass)),i=e,be(e,j.hoverClass);var t=e.getAttribute("title")||j.title;if("string"==typeof t&&t){var a=ce(I.bridge);a&&a.setAttribute("title",t)}var n=!0===j.forceHandCursor||"pointer"===we(e,"cursor");ke(n),xe()}},Z=function(){var e=ce(I.bridge);e&&(e.removeAttribute("title"),e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.top="1px"),i&&(ye(i,j.hoverClass),ye(i,j.activeClass),i=null)},J=function(){return i||null},ee=function(e){return"string"==typeof e&&e&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(e)},te=function(e){var t;if("string"==typeof e&&e?(t=e,e={}):"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(t=e.type),t){!e.target&&/^(copy|aftercopy|_click)$/.test(t.toLowerCase())&&(e.target=r),$(e,{type:t.toLowerCase(),target:e.target||i||null,relatedTarget:e.relatedTarget||null,currentTarget:I&&I.bridge||null,timeStamp:e.timeStamp||v()||null});var a=O[e.type];return"error"===e.type&&e.name&&a&&(a=a[e.name]),a&&(e.message=a),"ready"===e.type&&$(e,{target:null,version:I.version}),"error"===e.type&&(/^flash-(disabled|outdated|unavailable|degraded|deactivated|overdue)$/.test(e.name)&&$(e,{target:null,minimumVersion:B}),/^flash-(outdated|unavailable|degraded|deactivated|overdue)$/.test(e.name)&&$(e,{version:I.version})),"copy"===e.type&&(e.clipboardData={setData:Se.setData,clearData:Se.clearData}),"aftercopy"===e.type&&(e=me(e,E)),e.target&&!e.relatedTarget&&(e.relatedTarget=ae(e.target)),e=ne(e)}},ae=function(e){var t=e&&e.getAttribute&&e.getAttribute("data-clipboard-target");return t?o.getElementById(t):null},ne=function(e){if(e&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)){var t=e.target,a="_mouseover"===e.type&&e.relatedTarget?e.relatedTarget:n,i="_mouseout"===e.type&&e.relatedTarget?e.relatedTarget:n,r=Ce(t),l=s.screenLeft||s.screenX||0,c=s.screenTop||s.screenY||0,d=o.body.scrollLeft+o.documentElement.scrollLeft,u=o.body.scrollTop+o.documentElement.scrollTop,p=r.left+("number"==typeof e._stageX?e._stageX:0),m=r.top+("number"==typeof e._stageY?e._stageY:0),f=p-d,h=m-u,_=l+f,g=c+h,v="number"==typeof e.movementX?e.movementX:0,b="number"==typeof e.movementY?e.movementY:0;delete e._stageX,delete e._stageY,$(e,{srcElement:t,fromElement:a,toElement:i,screenX:_,screenY:g,pageX:p,pageY:m,clientX:f,clientY:h,x:f,y:h,movementX:v,movementY:b,offsetX:0,offsetY:0,layerX:0,layerY:0})}return e},ie=function(e){var t=e&&"string"==typeof e.type&&e.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(t)},re=function(e,t,a,n){n?c((function(){e.apply(t,a)}),0):e.apply(t,a)},se=function(e){if("object"==typeof e&&e&&e.type){var t=ie(e),a=A["*"]||[],n=A[e.type]||[],i=a.concat(n);if(i&&i.length){var r,o,l,c,d;for(r=0,o=i.length;r<o;r++)c=this,"string"==typeof(l=i[r])&&"function"==typeof s[l]&&(l=s[l]),"object"==typeof l&&l&&"function"==typeof l.handleEvent&&(c=l,l=l.handleEvent),"function"==typeof l&&(d=$({},e),re(l,c,[d],t))}return this}},oe=function(e){var t=e.target||i||null,a="swf"===e._source;delete e._source;switch(e.type){case"error":-1!==["flash-disabled","flash-outdated","flash-unavailable","flash-degraded","flash-deactivated","flash-overdue"].indexOf(e.name)&&$(I,{disabled:"flash-disabled"===e.name,outdated:"flash-outdated"===e.name,unavailable:"flash-unavailable"===e.name,degraded:"flash-degraded"===e.name,deactivated:"flash-deactivated"===e.name,overdue:"flash-overdue"===e.name,ready:!1});break;case"ready":var n=!0===I.deactivated;$(I,{disabled:!1,outdated:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:n,ready:!n});break;case"beforecopy":r=t;break;case"copy":var s,o,l=e.relatedTarget;!P["text/html"]&&!P["text/plain"]&&l&&(o=l.value||l.outerHTML||l.innerHTML)&&(s=l.value||l.textContent||l.innerText)?(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",s),o!==s&&e.clipboardData.setData("text/html",o)):!P["text/plain"]&&e.target&&(s=e.target.getAttribute("data-clipboard-text"))&&(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",s));break;case"aftercopy":Se.clearData(),t&&t!==ve()&&t.focus&&t.focus();break;case"_mouseover":Se.focus(t),!0===j.bubbleEvents&&a&&(t&&t!==e.relatedTarget&&!F(e.relatedTarget,t)&&le($({},e,{type:"mouseenter",bubbles:!1,cancelable:!1})),le($({},e,{type:"mouseover"})));break;case"_mouseout":Se.blur(),!0===j.bubbleEvents&&a&&(t&&t!==e.relatedTarget&&!F(e.relatedTarget,t)&&le($({},e,{type:"mouseleave",bubbles:!1,cancelable:!1})),le($({},e,{type:"mouseout"})));break;case"_mousedown":be(t,j.activeClass),!0===j.bubbleEvents&&a&&le($({},e,{type:e.type.slice(1)}));break;case"_mouseup":ye(t,j.activeClass),!0===j.bubbleEvents&&a&&le($({},e,{type:e.type.slice(1)}));break;case"_click":r=null,!0===j.bubbleEvents&&a&&le($({},e,{type:e.type.slice(1)}));break;case"_mousemove":!0===j.bubbleEvents&&a&&le($({},e,{type:e.type.slice(1)}))}if(/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type))return!0},le=function(e){if(e&&"string"==typeof e.type&&e){var t,a=e.target||null,n=a&&a.ownerDocument||o,i={view:n.defaultView||s,canBubble:!0,cancelable:!0,detail:"click"===e.type?1:0,button:"number"==typeof e.which?e.which-1:"number"==typeof e.button?e.button:n.createEvent?0:1},r=$(i,e);a&&n.createEvent&&a.dispatchEvent&&(r=[r.type,r.canBubble,r.cancelable,r.view,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,r.relatedTarget],(t=n.createEvent("MouseEvents")).initMouseEvent&&(t.initMouseEvent.apply(t,r),t._source="js",a.dispatchEvent(t)))}},ce=function(e){for(var t=e&&e.parentNode;t&&"OBJECT"===t.nodeName&&t.parentNode;)t=t.parentNode;return t||null},de=function(){var e,t=I.bridge,a=ce(t);if(!t){var n=ge(s.location.host,j),i="never"===n?"none":"all",r=he(j),l=j.swfPath+fe(j.swfPath,j);a=function(){var e=o.createElement("div");return e.id=j.containerId,e.className=j.containerClass,e.style.position="absolute",e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px",e.style.zIndex=""+$e(j.zIndex),e}();var c=o.createElement("div");a.appendChild(c),o.body.appendChild(a);var d=o.createElement("div"),u="activex"===I.pluginType;d.innerHTML='<object id="'+j.swfObjectId+'" name="'+j.swfObjectId+'" width="100%" height="100%" '+(u?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+l+'"')+">"+(u?'<param name="movie" value="'+l+'"/>':"")+'<param name="allowScriptAccess" value="'+n+'"/><param name="allowNetworking" value="'+i+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+r+'"/></object>',t=d.firstChild,d=null,x(t).ZeroClipboard=Se,a.replaceChild(t,c)}return t||((t=o[j.swfObjectId])&&(e=t.length)&&(t=t[e-1]),!t&&a&&(t=a.firstChild)),I.bridge=t||null,t},ue=function(){var e=I.bridge;if(e){var t=ce(e);t&&("activex"===I.pluginType&&"readyState"in e?(e.style.display="none",function a(){if(4===e.readyState){for(var n in e)"function"==typeof e[n]&&(e[n]=null);e.parentNode&&e.parentNode.removeChild(e),t.parentNode&&t.parentNode.removeChild(t)}else c(a,10)}()):(e.parentNode&&e.parentNode.removeChild(e),t.parentNode&&t.parentNode.removeChild(t))),d(L),L=0,I.ready=null,I.bridge=null,I.deactivated=null}},pe=function(e){var t={},a={};if("object"==typeof e&&e){for(var n in e)if(n&&w.call(e,n)&&"string"==typeof e[n]&&e[n])switch(n.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":t.text=e[n],a.text=n;break;case"text/html":case"html":case"air:html":case"flash:html":t.html=e[n],a.html=n;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":t.rtf=e[n],a.rtf=n}return{data:t,formatMap:a}}},me=function(e,t){if("object"!=typeof e||!e||"object"!=typeof t||!t)return e;var a={};for(var n in e)if(w.call(e,n)){if("success"!==n&&"data"!==n){a[n]=e[n];continue}a[n]={};var i=e[n];for(var r in i)r&&w.call(i,r)&&w.call(t,r)&&(a[n][t[r]]=i[r])}return a},fe=function(e,t){return null==t||t&&!0===t.cacheBust?(-1===e.indexOf("?")?"?":"&")+"noCache="+v():""},he=function(e){var t,a,n,i,r="",o=[];if(e.trustedDomains&&("string"==typeof e.trustedDomains?i=[e.trustedDomains]:"object"==typeof e.trustedDomains&&"length"in e.trustedDomains&&(i=e.trustedDomains)),i&&i.length)for(t=0,a=i.length;t<a;t++)if(w.call(i,t)&&i[t]&&"string"==typeof i[t]){if(!(n=_e(i[t])))continue;if("*"===n){o.length=0,o.push(n);break}o.push.apply(o,[n,"//"+n,s.location.protocol+"//"+n])}return o.length&&(r+="trustedOrigins="+u(o.join(","))),!0===e.forceEnhancedClipboard&&(r+=(r?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof e.swfObjectId&&e.swfObjectId&&(r+=(r?"&":"")+"swfObjectId="+u(e.swfObjectId)),r},_e=function(e){if(null==e||""===e)return null;if(""===(e=e.replace(/^\s+|\s+$/g,"")))return null;var t=e.indexOf("//"),a=(e=-1===t?e:e.slice(t+2)).indexOf("/");return(e=-1===a?e:-1===t||0===a?null:e.slice(0,a))&&".swf"===e.slice(-4).toLowerCase()?null:e||null},ge=function(e,t){var a=_e(t.swfPath);null===a&&(a=e);var n=function(e){var t,a,n,i=[];if("string"==typeof e&&(e=[e]),"object"!=typeof e||!e||"number"!=typeof e.length)return i;for(t=0,a=e.length;t<a;t++)if(w.call(e,t)&&(n=_e(e[t]))){if("*"===n){i.length=0,i.push("*");break}-1===i.indexOf(n)&&i.push(n)}return i}(t.trustedDomains),i=n.length;if(i>0){if(1===i&&"*"===n[0])return"always";if(-1!==n.indexOf(e))return 1===i&&e===a?"sameDomain":"always"}return"never"},ve=function(){try{return o.activeElement}catch(e){return null}},be=function(e,t){if(!e||1!==e.nodeType)return e;if(e.classList)return e.classList.contains(t)||e.classList.add(t),e;if(t&&"string"==typeof t){var a=(t||"").split(/\s+/);if(1===e.nodeType)if(e.className){for(var n=" "+e.className+" ",i=e.className,r=0,s=a.length;r<s;r++)n.indexOf(" "+a[r]+" ")<0&&(i+=" "+a[r]);e.className=i.replace(/^\s+|\s+$/g,"")}else e.className=t}return e},ye=function(e,t){if(!e||1!==e.nodeType)return e;if(e.classList)return e.classList.contains(t)&&e.classList.remove(t),e;if("string"==typeof t&&t){var a=t.split(/\s+/);if(1===e.nodeType&&e.className){for(var n=(" "+e.className+" ").replace(/[\n\t]/g," "),i=0,r=a.length;i<r;i++)n=n.replace(" "+a[i]+" "," ");e.className=n.replace(/^\s+|\s+$/g,"")}}return e},we=function(e,t){var a=s.getComputedStyle(e,null).getPropertyValue(t);return"cursor"!==t||a&&"auto"!==a||"A"!==e.nodeName?a:"pointer"},Ce=function(e){var t={left:0,top:0,width:0,height:0};if(e.getBoundingClientRect){var a,n,i,r=e.getBoundingClientRect();"pageXOffset"in s&&"pageYOffset"in s?(a=s.pageXOffset,n=s.pageYOffset):(i=function(){var e,t,a,n=1;return"function"==typeof o.body.getBoundingClientRect&&(t=(e=o.body.getBoundingClientRect()).right-e.left,a=o.body.offsetWidth,n=g(t/a*100)/100),n}(),a=g(o.documentElement.scrollLeft/i),n=g(o.documentElement.scrollTop/i));var l=o.documentElement.clientLeft||0,c=o.documentElement.clientTop||0;t.left=r.left+a-l,t.top=r.top+n-c,t.width="width"in r?r.width:r.right-r.left,t.height="height"in r?r.height:r.bottom-r.top}return t},xe=function(){var e;if(i&&(e=ce(I.bridge))){var t=Ce(i);$(e.style,{width:t.width+"px",height:t.height+"px",top:t.top+"px",left:t.left+"px",zIndex:""+$e(j.zIndex)})}},ke=function(e){!0===I.ready&&(I.bridge&&"function"==typeof I.bridge.setHandCursor?I.bridge.setHandCursor(e):I.ready=!1)},$e=function(e){return/^(?:auto|inherit)$/.test(e)?e:("number"!=typeof e||_(e)?"string"==typeof e&&(t=$e(f(e,10))):t=e,"number"==typeof t?t:"auto");var t};!function(e){var t,a,n=!1,i=!1,r=!1,s="";function o(e){var t=e.match(/[\d]+/g);return t.length=3,t.join(".")}function c(e){var t;e&&(n=!0,e.version&&(s=o(e.version)),!s&&e.description&&(s=o(e.description)),e.filename&&(t=e.filename,r=!!t&&(t=t.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(t)||"chrome.plugin"===t.slice(-13))))}if(l.plugins&&l.plugins.length)c(l.plugins["Shockwave Flash"]),l.plugins["Shockwave Flash 2.0"]&&(n=!0,s="2.0.0.11");else if(l.mimeTypes&&l.mimeTypes.length)c((a=l.mimeTypes["application/x-shockwave-flash"])&&a.enabledPlugin);else if(void 0!==e){i=!0;try{t=new e("ShockwaveFlash.ShockwaveFlash.7"),n=!0,s=o(t.GetVariable("$version"))}catch(a){try{t=new e("ShockwaveFlash.ShockwaveFlash.6"),n=!0,s="6.0.21"}catch(a){try{t=new e("ShockwaveFlash.ShockwaveFlash"),n=!0,s=o(t.GetVariable("$version"))}catch(e){i=!1}}}}I.disabled=!0!==n,I.outdated=s&&h(s)<h(B),I.version=s||"0.0.0",I.pluginType=r?"pepper":i?"activex":n?"netscape":"unknown"}(p);var Se=function(){if(!(this instanceof Se))return new Se;"function"==typeof Se._createClient&&Se._createClient.apply(this,k(arguments))};y(Se,"version",{value:"2.2.0-beta.1",writable:!1,configurable:!0,enumerable:!0}),Se.config=function(){return q.apply(this,k(arguments))},Se.state=function(){return V.apply(this,k(arguments))},Se.isFlashUnusable=function(){return M.apply(this,k(arguments))},Se.on=function(){return R.apply(this,k(arguments))},Se.off=function(){return z.apply(this,k(arguments))},Se.handlers=function(){return H.apply(this,k(arguments))},Se.emit=function(){return U.apply(this,k(arguments))},Se.create=function(){return K.apply(this,k(arguments))},Se.destroy=function(){return W.apply(this,k(arguments))},Se.setData=function(){return G.apply(this,k(arguments))},Se.clearData=function(){return Q.apply(this,k(arguments))},Se.getData=function(){return Y.apply(this,k(arguments))},Se.focus=Se.activate=function(){return X.apply(this,k(arguments))},Se.blur=Se.deactivate=function(){return Z.apply(this,k(arguments))},Se.activeElement=function(){return J.apply(this,k(arguments))};var Te=0,De={},Fe=0,Ne={},Ie={};$(j,{autoActivate:!0});var Be=function(e){var t=this;t.id=""+Te++,De[t.id]={instance:t,elements:[],handlers:{}},e&&t.clip(e),Se.on("*",(function(e){return t.emit(e)})),Se.on("destroy",(function(){t.destroy()})),Se.create()},Ae=function(e,t){var a,n,i,r={},s=De[this.id],o=s&&s.handlers;if(!s)throw new Error("Attempted to add new listener(s) to a destroyed ZeroClipboard client instance");if("string"==typeof e&&e)i=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&void 0===t)for(a in e)w.call(e,a)&&"string"==typeof a&&a&&"function"==typeof e[a]&&this.on(a,e[a]);if(i&&i.length){for(a=0,n=i.length;a<n;a++)r[e=i[a].replace(/^on/,"")]=!0,o[e]||(o[e]=[]),o[e].push(t);if(r.ready&&I.ready&&this.emit({type:"ready",client:this}),r.error){var l=["disabled","outdated","unavailable","degraded","deactivated","overdue"];for(a=0,n=l.length;a<n;a++)if(I[l[a]]){this.emit({type:"error",name:"flash-"+l[a],client:this});break}}}return this},Pe=function(e,t){var a,n,i,r,s,o=De[this.id],l=o&&o.handlers;if(!l)return this;if(0===arguments.length)r=b(l);else if("string"==typeof e&&e)r=e.split(/\s+/);else if("object"==typeof e&&e&&void 0===t)for(a in e)w.call(e,a)&&"string"==typeof a&&a&&"function"==typeof e[a]&&this.off(a,e[a]);if(r&&r.length)for(a=0,n=r.length;a<n;a++)if((s=l[e=r[a].toLowerCase().replace(/^on/,"")])&&s.length)if(t)for(i=s.indexOf(t);-1!==i;)s.splice(i,1),i=s.indexOf(t,i);else s.length=0;return this},Ee=function(e){var t=null,a=De[this.id]&&De[this.id].handlers;return a&&(t="string"==typeof e&&e?a[e]?a[e].slice(0):[]:S(a)),t},Le=function(e){if(Me.call(this,e)){"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(e=$({},e));var t=$({},te(e),{client:this});Re.call(this,t)}return this},Oe=function(e){if(!De[this.id])throw new Error("Attempted to clip element(s) to a destroyed ZeroClipboard client instance");e=ze(e);for(var t=0;t<e.length;t++)if(w.call(e,t)&&e[t]&&1===e[t].nodeType){e[t].zcClippingId?-1===Ne[e[t].zcClippingId].indexOf(this.id)&&Ne[e[t].zcClippingId].push(this.id):(e[t].zcClippingId="zcClippingId_"+Fe++,Ne[e[t].zcClippingId]=[this.id],!0===j.autoActivate&&He(e[t]));var a=De[this.id]&&De[this.id].elements;-1===a.indexOf(e[t])&&a.push(e[t])}return this},je=function(e){var t=De[this.id];if(!t)return this;for(var a,n=t.elements,i=(e=void 0===e?n.slice(0):ze(e)).length;i--;)if(w.call(e,i)&&e[i]&&1===e[i].nodeType){for(a=0;-1!==(a=n.indexOf(e[i],a));)n.splice(a,1);var r=Ne[e[i].zcClippingId];if(r){for(a=0;-1!==(a=r.indexOf(this.id,a));)r.splice(a,1);0===r.length&&(!0===j.autoActivate&&Ue(e[i]),delete e[i].zcClippingId)}}return this},qe=function(){var e=De[this.id];return e&&e.elements?e.elements.slice(0):[]},Ve=function(){De[this.id]&&(this.unclip(),this.off(),delete De[this.id])},Me=function(e){if(!e||!e.type)return!1;if(e.client&&e.client!==this)return!1;var t=De[this.id],a=t&&t.elements,n=!!a&&a.length>0,i=!e.target||n&&-1!==a.indexOf(e.target),r=e.relatedTarget&&n&&-1!==a.indexOf(e.relatedTarget),s=e.client&&e.client===this;return!(!t||!(i||r||s))},Re=function(e){var t=De[this.id];if("object"==typeof e&&e&&e.type&&t){var a=ie(e),n=t&&t.handlers["*"]||[],i=t&&t.handlers[e.type]||[],r=n.concat(i);if(r&&r.length){var o,l,c,d,u;for(o=0,l=r.length;o<l;o++)d=this,"string"==typeof(c=r[o])&&"function"==typeof s[c]&&(c=s[c]),"object"==typeof c&&c&&"function"==typeof c.handleEvent&&(d=c,c=c.handleEvent),"function"==typeof c&&(u=$({},e),re(c,d,[u],a))}}},ze=function(e){return"string"==typeof e&&(e=[]),"number"!=typeof e.length?[e]:e},He=function(e){if(e&&1===e.nodeType){var t=function(e){(e||(e=s.event))&&("js"!==e._source&&(e.stopImmediatePropagation(),e.preventDefault()),delete e._source)},a=function(a){(a||(a=s.event))&&(t(a),Se.focus(e))};e.addEventListener("mouseover",a,!1),e.addEventListener("mouseout",t,!1),e.addEventListener("mouseenter",t,!1),e.addEventListener("mouseleave",t,!1),e.addEventListener("mousemove",t,!1),Ie[e.zcClippingId]={mouseover:a,mouseout:t,mouseenter:t,mouseleave:t,mousemove:t}}},Ue=function(e){if(e&&1===e.nodeType){var t=Ie[e.zcClippingId];if("object"==typeof t&&t){for(var a,n,i=["move","leave","enter","out","over"],r=0,s=i.length;r<s;r++)"function"==typeof(n=t[a="mouse"+i[r]])&&e.removeEventListener(a,n,!1);delete Ie[e.zcClippingId]}}};Se._createClient=function(){Be.apply(this,k(arguments))},Se.prototype.on=function(){return Ae.apply(this,k(arguments))},Se.prototype.off=function(){return Pe.apply(this,k(arguments))},Se.prototype.handlers=function(){return Ee.apply(this,k(arguments))},Se.prototype.emit=function(){return Le.apply(this,k(arguments))},Se.prototype.clip=function(){return Oe.apply(this,k(arguments))},Se.prototype.unclip=function(){return je.apply(this,k(arguments))},Se.prototype.elements=function(){return qe.apply(this,k(arguments))},Se.prototype.destroy=function(){return Ve.apply(this,k(arguments))},Se.prototype.setText=function(e){if(!De[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Se.setData("text/plain",e),this},Se.prototype.setHtml=function(e){if(!De[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Se.setData("text/html",e),this},Se.prototype.setRichText=function(e){if(!De[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Se.setData("application/rtf",e),this},Se.prototype.setData=function(){if(!De[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Se.setData.apply(this,k(arguments)),this},Se.prototype.clearData=function(){if(!De[this.id])throw new Error("Attempted to clear pending clipboard data from a destroyed ZeroClipboard client instance");return Se.clearData.apply(this,k(arguments)),this},Se.prototype.getData=function(){if(!De[this.id])throw new Error("Attempted to get pending clipboard data from a destroyed ZeroClipboard client instance");return Se.getData.apply(this,k(arguments))},"function"==typeof a&&a.amd?a((function(){return Se})):"object"==typeof e&&e&&"object"==typeof e.exports&&e.exports?e.exports=Se:t.ZeroClipboard=Se}(function(){return this||window}())}).call(window)},45624:function(e,t){(function(){!function(){function e(e,t,a){if(e.addEventListener)e.addEventListener(t,a,!1);else{if(!e.attachEvent)throw new Error("not supported or DOM not loaded");e.attachEvent("on"+t,(function(){a.call(e)}))}}if(document.documentElement.getBoundingClientRect)var t=function(e){var t=e.getBoundingClientRect(),a=e.ownerDocument,n=a.body,i=a.documentElement,r=i.clientTop||n.clientTop||0,s=i.clientLeft||n.clientLeft||0,o=1;if(n.getBoundingClientRect){var l=n.getBoundingClientRect();o=(l.right-l.left)/n.clientWidth}return o>1&&(r=0,s=0),{top:t.top/o+(window.pageYOffset||i&&i.scrollTop/o||n.scrollTop/o)-r,left:t.left/o+(window.pageXOffset||i&&i.scrollLeft/o||n.scrollLeft/o)-s}};else t=function(e){var t=0,a=0;do{t+=e.offsetTop||0,a+=e.offsetLeft||0,e=e.offsetParent}while(e);return{left:a,top:t}};function a(e,t){for(var a in t)t.hasOwnProperty(a)&&(e.style[a]=t[a])}function n(e,n){var i,r,s,o,l=(o=t(i=e),r=o.left,s=o.top,{left:r,right:r+i.offsetWidth,top:s,bottom:s+i.offsetHeight});a(n,{position:"absolute",left:l.left+"px",top:l.top+"px",width:e.offsetWidth+"px",height:e.offsetHeight+"px"})}var i,r,s=(i=document.createElement("div"),function(e){i.innerHTML=e;var t=i.firstChild;return i.removeChild(t)}),o=(r=0,function(){return"ValumsAjaxUpload"+r++});function l(e){return e.replace(/.*(\/|\\)/,"")}function c(e){return-1!==e.indexOf(".")?e.replace(/.*[.]/,""):""}function d(e,t){(function(e,t){return new RegExp("\\b"+t+"\\b").test(e.className)})(e,t)||(e.className+=" "+t)}function u(e,t){var a=new RegExp("\\b"+t+"\\b");e.className=e.className.replace(a,"")}function p(e){e.parentNode.removeChild(e)}window.AjaxUpload=function(t,a){for(var n in this._settings={action:"upload.php",name:"userfile",multiple:!1,data:{},autoSubmit:!0,responseType:!1,hoverClass:"hover",focusClass:"focus",disabledClass:"disabled",onChange:function(e,t){},onSubmit:function(e,t){},onComplete:function(e,t){}},a)a.hasOwnProperty(n)&&(this._settings[n]=a[n]);if(t.jquery?t=t[0]:"string"==typeof t&&(/^#.*/.test(t)&&(t=t.slice(1)),t=document.getElementById(t)),!t||1!==t.nodeType)throw new Error("Please make sure that you're passing a valid element");"A"==t.nodeName.toUpperCase()&&e(t,"click",(function(e){e&&e.preventDefault?e.preventDefault():window.event&&(window.event.returnValue=!1)})),this._button=t,this._input=null,this._disabled=!1,this.enable(),this._rerouteClicks()},AjaxUpload.prototype={setData:function(e){this._settings.data=e},disable:function(){d(this._button,this._settings.disabledClass),this._disabled=!0;var e=this._button.nodeName.toUpperCase();"INPUT"!=e&&"BUTTON"!=e||this._button.setAttribute("disabled","disabled"),this._input&&this._input.parentNode&&(this._input.parentNode.style.visibility="hidden")},enable:function(){u(this._button,this._settings.disabledClass),this._button.removeAttribute("disabled"),this._disabled=!1},_createInput:function(){var t=this,n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("name",this._settings.name),this._settings.multiple&&n.setAttribute("multiple","multiple"),a(n,{position:"absolute",right:0,margin:0,padding:0,fontSize:"480px",fontFamily:"sans-serif",cursor:"pointer"});var i=document.createElement("div");a(i,{display:"block",position:"absolute",overflow:"hidden",margin:0,padding:0,opacity:0,direction:"ltr",zIndex:2147483583}),"0"!==i.style.opacity&&(i.style.filter="alpha(opacity=0)"),e(n,"change",(function(){if(n&&""!==n.value){var e=l(n.value);!1!==t._settings.onChange.call(t,e,c(e))?t._settings.autoSubmit&&t.submit():t._clearInput()}})),e(n,"mouseover",(function(){d(t._button,t._settings.hoverClass)})),e(n,"mouseout",(function(){u(t._button,t._settings.hoverClass),u(t._button,t._settings.focusClass),n.parentNode&&(n.parentNode.style.visibility="hidden")})),e(n,"focus",(function(){d(t._button,t._settings.focusClass)})),e(n,"blur",(function(){u(t._button,t._settings.focusClass)})),i.appendChild(n),document.body.appendChild(i),this._input=n},_clearInput:function(){this._input&&(p(this._input.parentNode),this._input=null,this._createInput(),u(this._button,this._settings.hoverClass),u(this._button,this._settings.focusClass))},_rerouteClicks:function(){var t=this;e(t._button,"mouseover",(function(){if(!t._disabled){t._input||t._createInput();var e=t._input.parentNode;n(t._button,e),e.style.visibility="visible"}}))},_createIframe:function(){var e=o(),t=s('<iframe src="javascript:false;" name="'+e+'" />');return t.setAttribute("id",e),t.style.display="none",document.body.appendChild(t),t},_createForm:function(e){var t=this._settings,a=s('<form method="post" enctype="multipart/form-data"></form>'),n=$('meta[name="csrf-token"]').attr("content"),i=t.action;for(var r in i+=(-1==i.indexOf("?")?"?":"&")+"app_token=U29jcmF0YS0td2VraWNrYXNz0&authenticity_token="+escape(n),a.setAttribute("action",i),a.setAttribute("target",e.name),a.style.display="none",document.body.appendChild(a),t.data=t.data||{},t.data.authenticity_token=n,t.data)if(t.data.hasOwnProperty(r)){var o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name",r),o.setAttribute("value",t.data[r]),a.appendChild(o)}return a},_getResponse:function(t,a){var n=!1,i=this,r=this._settings;e(t,"load",(function(){if("javascript:'%3Chtml%3E%3C/html%3E';"!=t.src&&"javascript:'<html></html>';"!=t.src){var e=t.contentDocument?t.contentDocument:window.frames[t.id].document;if(!(e.readyState&&"complete"!=e.readyState||e.body&&"false"==e.body.innerHTML)){var s;if(e.XMLDocument)s=e.XMLDocument;else if(e.body){if(s="PRE"==e.body.firstChild.tagName?e.body.firstChild.innerHTML:e.body.innerHTML,r.responseType&&"json"==r.responseType.toLowerCase())if(e.body.firstChild&&"PRE"==e.body.firstChild.nodeName.toUpperCase()&&(void 0!==e.normalize&&e.normalize(),s=e.body.firstChild.firstChild.nodeValue),s)try{s=JSON.parse(s)}catch(e){s={error:!0,message:s}}else s={}}else s=e;r.onComplete.call(i,a,s),n=!0,t.src="javascript:'<html></html>';"}}else n&&setTimeout((function(){p(t)}),0)}))},submit:function(){var e=this,t=this._settings;if(this._input&&""!==this._input.value){var a=l(this._input.value);if(!1!==t.onSubmit.call(this,a,c(a))){var n=this._createIframe(),i=this._createForm(n);p(this._input.parentNode),u(e._button,e._settings.hoverClass),u(e._button,e._settings.focusClass),i.appendChild(this._input),i.submit(),p(i),i=null,p(this._input),this._input=null,this._getResponse(n,a),this._createInput()}else this._clearInput()}}}}()}).call(window)},77757:function(e,t){(function(){!function(){function e(e,t){var r,p=this;if(p.element="object"==typeof e?e:document.getElementById(e),p.wrapper=p.element.parentNode,p.element.style.webkitTransitionProperty="-webkit-transform",p.element.style.webkitTransitionTimingFunction="cubic-bezier(0,0,0.25,1)",p.element.style.webkitTransitionDuration="0",p.element.style.webkitTransform=d+"0,0"+u,p.options={bounce:a,momentum:a,checkDOMChanges:!0,topOnDOMChanges:!1,hScrollbar:a,vScrollbar:a,fadeScrollbar:n||i||!s,shrinkScrollbar:n||i,desktopCompatibility:!1,overflow:"auto",snap:!1},"object"==typeof t)for(r in t)p.options[r]=t[r];p.options.desktopCompatibility&&(p.options.overflow="hidden"),p.wrapper.style.overflow=p.options.overflow,p.refresh(),window.addEventListener("onorientationchange"in window?"orientationchange":"resize",p,!1),(s||p.options.desktopCompatibility)&&(p.element.addEventListener(o,p,!1),p.element.addEventListener(l,p,!1),p.element.addEventListener(c,p,!1)),p.options.checkDOMChanges&&p.element.addEventListener("DOMSubtreeModified",p,!1),s||p.element.addEventListener("click",p,!0)}function t(e,t,a,n){var i,r=this;r.dir=e,r.fade=a,r.shrink=n,r.uid=++p,r.bar=document.createElement("div"),i="position:absolute;top:0;left:0;-webkit-transition-timing-function:cubic-bezier(0,0,0.25,1);pointer-events:none;-webkit-transition-duration:0;-webkit-transition-delay:0;-webkit-transition-property:-webkit-transform;z-index:10;background:rgba(0,0,0,0.5);-webkit-transform:"+d+"0,0"+u+";"+("horizontal"==e?"-webkit-border-radius:3px 2px;min-width:6px;min-height:5px":"-webkit-border-radius:2px 3px;min-width:5px;min-height:6px"),r.bar.setAttribute("style",i),r.wrapper=document.createElement("div"),i="-webkit-mask:-webkit-canvas(scrollbar"+r.uid+r.dir+");position:absolute;z-index:10;pointer-events:none;overflow:hidden;opacity:0;-webkit-transition-duration:"+(a?"300ms":"0")+";-webkit-transition-delay:0;-webkit-transition-property:opacity;"+("horizontal"==r.dir?"bottom:2px;left:1px;right:7px;height:5px":"top:1px;right:2px;bottom:7px;width:5px;"),r.wrapper.setAttribute("style",i),r.wrapper.appendChild(r.bar),t.appendChild(r.wrapper)}e.prototype={x:0,y:0,dist:0,handleEvent:function(e){var t=this;switch(e.type){case"click":e._fake||e.stopPropagation();break;case o:t.touchStart(e);break;case l:t.touchMove(e);break;case c:t.touchEnd(e);break;case"webkitTransitionEnd":t.transitionEnd();break;case"orientationchange":case"resize":t.refresh();break;case"DOMSubtreeModified":t.onDOMModified()}},onDOMModified:function(){var e=this;e.refresh(),!e.options.topOnDOMChanges||0==e.x&&0==e.y||e.scrollTo(0,0,"0")},refresh:function(){var e,a=this,n=this.x,i=this.y;a.scrollWidth=a.wrapper.clientWidth,a.scrollHeight=a.wrapper.clientHeight,a.scrollerWidth=a.element.offsetWidth,a.scrollerHeight=a.element.offsetHeight,a.maxScrollX=a.scrollWidth-a.scrollerWidth,a.maxScrollY=a.scrollHeight-a.scrollerHeight,a.directionX=0,a.directionY=0,a.scrollX&&(a.maxScrollX>=0?n=0:a.x<a.maxScrollX&&(n=a.maxScrollX)),a.scrollY&&(a.maxScrollY>=0?i=0:a.y<a.maxScrollY&&(i=a.maxScrollY)),a.options.snap&&(a.maxPageX=-Math.floor(a.maxScrollX/a.scrollWidth),a.maxPageY=-Math.floor(a.maxScrollY/a.scrollHeight),n=(e=a.snap(n,i)).x,i=e.y),n==a.x&&i==a.y||(a.setTransitionTime("0"),a.setPosition(n,i,!0)),a.scrollX=a.scrollerWidth>a.scrollWidth,a.scrollY=!a.scrollX||a.scrollerHeight>a.scrollHeight,a.options.hScrollbar&&a.scrollX?(a.scrollBarX=a.scrollBarX||new t("horizontal",a.wrapper,a.options.fadeScrollbar,a.options.shrinkScrollbar),a.scrollBarX.init(a.scrollWidth,a.scrollerWidth)):a.scrollBarX&&(a.scrollBarX=a.scrollBarX.remove()),a.options.vScrollbar&&a.scrollY&&a.scrollerHeight>a.scrollHeight?(a.scrollBarY=a.scrollBarY||new t("vertical",a.wrapper,a.options.fadeScrollbar,a.options.shrinkScrollbar),a.scrollBarY.init(a.scrollHeight,a.scrollerHeight)):a.scrollBarY&&(a.scrollBarY=a.scrollBarY.remove())},setPosition:function(e,t,a){var n=this;n.x=e,n.y=t,n.element.style.webkitTransform=d+n.x+"px,"+n.y+"px"+u,a||(n.scrollBarX&&n.scrollBarX.setPosition(n.x),n.scrollBarY&&n.scrollBarY.setPosition(n.y))},setTransitionTime:function(e){var t=this;e=e||"0",t.element.style.webkitTransitionDuration=e,t.scrollBarX&&(t.scrollBarX.bar.style.webkitTransitionDuration=e,t.scrollBarX.wrapper.style.webkitTransitionDuration=a&&t.options.fadeScrollbar?"300ms":"0"),t.scrollBarY&&(t.scrollBarY.bar.style.webkitTransitionDuration=e,t.scrollBarY.wrapper.style.webkitTransitionDuration=a&&t.options.fadeScrollbar?"300ms":"0")},touchStart:function(e){var t,a=this;a.scrolling=!0,e.preventDefault(),e.stopPropagation(),a.moved=!1,a.dist=0,a.setTransitionTime("0"),(a.options.momentum||a.options.snap)&&((t=new WebKitCSSMatrix(window.getComputedStyle(a.element).webkitTransform)).e==a.x&&t.f==a.y||(document.removeEventListener("webkitTransitionEnd",a,!1),a.setPosition(t.e,t.f),a.moved=!0)),a.touchStartX=s?e.changedTouches[0].pageX:e.pageX,a.scrollStartX=a.x,a.touchStartY=s?e.changedTouches[0].pageY:e.pageY,a.scrollStartY=a.y,a.scrollStartTime=e.timeStamp,a.directionX=0,a.directionY=0},touchMove:function(e){var t=this,a=s?e.changedTouches[0].pageX:e.pageX,n=s?e.changedTouches[0].pageY:e.pageY,i=t.scrollX?a-t.touchStartX:0,r=t.scrollY?n-t.touchStartY:0,o=t.x+i,l=t.y+r;t.scrolling&&(t.dist+=Math.abs(t.touchStartX-a)+Math.abs(t.touchStartY-n),t.touchStartX=a,t.touchStartY=n,(o>0||o<t.maxScrollX)&&(o=t.options.bounce?Math.round(t.x+i/3):o>=0?0:t.maxScrollX),(l>0||l<t.maxScrollY)&&(l=t.options.bounce?Math.round(t.y+r/3):l>=0?0:t.maxScrollY),t.dist>5&&(t.setPosition(o,l),t.moved=!0,t.directionX=i>0?-1:1,t.directionY=r>0?-1:1))},touchEnd:function(e){var t,a,n,i,r,o=this,l=e.timeStamp-o.scrollStartTime,c=0,d=o.x,u=o.y;if(o.scrolling){if(o.scrolling=!1,!o.moved){for(o.resetPosition(),t=s?e.changedTouches[0].target:e.target;1!=t.nodeType;)t=t.parentNode;return(a=document.createEvent("Event")).initEvent("focus",!0,!0),t.dispatchEvent(a),(a=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,e.view,1,t.screenX,t.screenY,t.clientX,t.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),a._fake=!0,void t.dispatchEvent(a)}!o.options.snap&&l>250?o.resetPosition():(o.options.momentum&&(n=!0===o.scrollX?o.momentum(o.x-o.scrollStartX,l,o.options.bounce?-o.x+o.scrollWidth/5:-o.x,o.options.bounce?o.x+o.scrollerWidth-o.scrollWidth+o.scrollWidth/5:o.x+o.scrollerWidth-o.scrollWidth):{dist:0,time:0},i=!0===o.scrollY?o.momentum(o.y-o.scrollStartY,l,o.options.bounce?-o.y+o.scrollHeight/5:-o.y,o.options.bounce?(o.maxScrollY<0?o.y+o.scrollerHeight-o.scrollHeight:0)+o.scrollHeight/5:o.y+o.scrollerHeight-o.scrollHeight):{dist:0,time:0},c=Math.max(Math.max(n.time,i.time),1),d=o.x+n.dist,u=o.y+i.dist),o.options.snap&&(d=(r=o.snap(d,u)).x,u=r.y,c=Math.max(r.time,c)),o.scrollTo(d,u,c+"ms"))}},transitionEnd:function(){document.removeEventListener("webkitTransitionEnd",this,!1),this.resetPosition()},resetPosition:function(e){var t=this,a=t.x,n=t.y;t.x>=0?a=0:t.x<t.maxScrollX&&(a=t.maxScrollX),t.y>=0||t.maxScrollY>0?n=0:t.y<t.maxScrollY&&(n=t.maxScrollY),a!=t.x||n!=t.y?t.scrollTo(a,n,e):(t.onScrollEnd(),t.scrollBarX&&t.scrollBarX.hide(),t.scrollBarY&&t.scrollBarY.hide())},snap:function(e,t){var a=this;return e=a.directionX>0?Math.floor(e/a.scrollWidth):a.directionX<0?Math.ceil(e/a.scrollWidth):Math.round(e/a.scrollWidth),a.pageX=-e,(e*=a.scrollWidth)>0?e=a.pageX=0:e<a.maxScrollX&&(a.pageX=a.maxPageX,e=a.maxScrollX),t=a.directionY>0?Math.floor(t/a.scrollHeight):a.directionY<0?Math.ceil(t/a.scrollHeight):Math.round(t/a.scrollHeight),a.pageY=-t,(t*=a.scrollHeight)>0?t=a.pageY=0:t<a.maxScrollY&&(a.pageY=a.maxPageY,t=a.maxScrollY),{x:e,y:t,time:Math.round(Math.max(Math.abs(a.x-e)/a.scrollWidth*500,Math.abs(a.y-t)/a.scrollHeight*500))}},scrollTo:function(e,t,a){var n=this;n.x!=e||n.y!=t?(n.setTransitionTime(a||"400ms"),n.setPosition(e,t),"0"===a||"0s"==a||"0ms"==a?(n.resetPosition(),n.onScrollEnd()):document.addEventListener("webkitTransitionEnd",n,!1)):n.onScrollEnd()},scrollToPage:function(e,t,a){var n,i=this;i.options.snap||(i.pageX=-Math.round(i.x/i.scrollWidth),i.pageY=-Math.round(i.y/i.scrollHeight)),"next"==e?e=++i.pageX:"prev"==e&&(e=--i.pageX),"next"==t?t=++i.pageY:"prev"==t&&(t=--i.pageY),e=-e*i.scrollWidth,t=-t*i.scrollHeight,e=(n=i.snap(e,t)).x,t=n.y,i.scrollTo(e,t,a||"500ms")},scrollToElement:function(e,t){if(e="object"==typeof e?e:this.element.querySelector(e)){var a=this,n=a.scrollX?-e.offsetLeft:0,i=a.scrollY?-e.offsetTop:0;n>=0?n=0:n<a.maxScrollX&&(n=a.maxScrollX),i>=0?i=0:i<a.maxScrollY&&(i=a.maxScrollY),a.scrollTo(n,i,t)}},momentum:function(e,t,a,n){var i,r=Math.abs(e)/t*1e3,s=r*r/2.5/1e3;return e>0&&s>a?(r=r*a/s/2.5,s=a):e<0&&s>n&&(r=r*n/s/2.5,s=n),s*=e<0?-1:1,i=r/1.2,{dist:Math.round(s),time:Math.round(i)}},onScrollEnd:function(){},destroy:function(e){var t=this;return window.removeEventListener("orientationchange",t,!1),window.removeEventListener("resize",t,!1),t.element.removeEventListener(o,t,!1),t.element.removeEventListener(l,t,!1),t.element.removeEventListener(c,t,!1),t.element.removeEventListener("DOMSubtreeModified",t,!1),t.element.removeEventListener("click",t,!0),document.removeEventListener("webkitTransitionEnd",t,!1),t.scrollBarX&&(t.scrollBarX=t.scrollBarX.remove()),t.scrollBarY&&(t.scrollBarY=t.scrollBarY.remove()),e&&t.wrapper.parentNode.removeChild(t.wrapper),null}},t.prototype={init:function(e,t){var a,n,i=this;"horizontal"==i.dir?(n=i.wrapper.offsetWidth,(a=document.getCSSCanvasContext("2d","scrollbar"+i.uid+i.dir,n,5)).fillStyle="rgb(0,0,0)",a.beginPath(),a.arc(2.5,2.5,2.5,Math.PI/2,-Math.PI/2,!1),a.lineTo(n-2.5,0),a.arc(n-2.5,2.5,2.5,-Math.PI/2,Math.PI/2,!1),a.closePath(),a.fill()):(n=i.wrapper.offsetHeight,(a=document.getCSSCanvasContext("2d","scrollbar"+i.uid+i.dir,5,n)).fillStyle="rgb(0,0,0)",a.beginPath(),a.arc(2.5,2.5,2.5,Math.PI,0,!1),a.lineTo(5,n-2.5),a.arc(2.5,n-2.5,2.5,0,Math.PI,!1),a.closePath(),a.fill()),i.maxSize="horizontal"==i.dir?i.wrapper.clientWidth:i.wrapper.clientHeight,i.size=Math.round(i.maxSize*i.maxSize/t),i.maxScroll=i.maxSize-i.size,i.toWrapperProp=i.maxScroll/(e-t),i.bar.style["horizontal"==i.dir?"width":"height"]=i.size+"px"},setPosition:function(e,t){var a=this;t||"1"==a.wrapper.style.opacity||a.show(),(e=a.toWrapperProp*e)<0?(e=a.shrink?e+3*e:0,a.size+e<5&&(e=5-a.size)):e>a.maxScroll&&(e=a.shrink?e+3*(e-a.maxScroll):a.maxScroll,a.size+a.maxScroll-e<5&&(e=a.size+a.maxScroll-5)),e="horizontal"==a.dir?d+Math.round(e)+"px,0"+u:d+"0,"+Math.round(e)+"px"+u,a.bar.style.webkitTransform=e},show:function(){a&&(this.wrapper.style.webkitTransitionDelay="0"),this.wrapper.style.opacity="1"},hide:function(){a&&(this.wrapper.style.webkitTransitionDelay="200ms"),this.wrapper.style.opacity="0"},remove:function(){return this.wrapper.parentNode.removeChild(this.wrapper),null}};var a="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,n=/iphone/gi.test(navigator.appVersion),i=/ipad/gi.test(navigator.appVersion),r=/android/gi.test(navigator.appVersion),s=n||i||r,o=s?"touchstart":"mousedown",l=s?"touchmove":"mousemove",c=s?"touchend":"mouseup",d="translate"+(a?"3d(":"("),u=a?",0)":")",p=0;window.iScroll=e}()}).call(window)},53009:function(e,t){(function(){!function(e){var t=0;e.fn.awesomecomplete=function(n){n=e.extend({},e.fn.awesomecomplete.defaults,n);return this.each((function(){var i=e(this),s=e.meta?e.extend({},n,i.data()):n;i.data("awesomecomplete-config",s);var o=e(s.attachTo||i);width=o.innerWidth(),0===width&&(width="100%");var l,c=e("<ul/>").addClass(s.suggestionListClass).insertAfter(o).hide().css("width",width);i.data("awesomecomplete-list",c);var d=!1;i.on("keyup",(function(e){d?d=!1:e.which>36&&e.which<41||16==e.which||(s.typingDelay>0?(clearTimeout(l),l=setTimeout((function(){a(i)}),s.typingDelay)):a(i))})),i.on("keydown",(function(t){var a=c.children("li."+s.activeItemClass);switch(t.which){case 13:0!==a.length&&c.is(":visible")&&(t.preventDefault(),i.val(a.data("awesomecomplete-value")),s.onComplete(a.data("awesomecomplete-dataItem"),i),c.hide()),s.blurFunction(c),c.hide(),d=!0;break;case 38:for(t.preventDefault(),0===a.length?n=c.children("li:last-child"):a.is(":not(:first-of-type")?(n=a.prev(),a.removeClass(s.activeItemClass)):(n=c.children("li:last-child"),a.removeClass(s.activeItemClass));s.skipBlankValues&&n.length>0&&e.isBlank(n.data("awesomecomplete-value"));)n=n.prev();n.addClass(s.activeItemClass);break;case 40:var n;if(t.preventDefault(),0===a.length?n=c.children("li:first"):a.is(":not(:last-child)")?(n=a.next(),a.removeClass(s.activeItemClass)):(n=c.children("li:first"),a.removeClass(s.activeItemClass)),!e.isBlank(n)){for(;s.skipBlankValues&&n.length>0&&e.isBlank(n.data("awesomecomplete-value"));)n=n.next();n.addClass(s.activeItemClass)}break;case 27:s.blurFunction(c),c.hide(),d=!0}})),i.on("keypress",(function(e){c.children("li."+s.activeItemClass);13==e.which&&c.children("li."+s.activeItemClass).length>0&&e.preventDefault()}));var u=!1,p=!1;e(document).on("mousedown.awesomecomplete"+ ++t,(function(){u=!0})),e(document).on("mouseup.awesomecomplete"+t,(function(){u=!1,p&&(p=!1,s.blurFunction(c),c.hide())})),i.on("blur",(function(){if(u)p=!0;else{var e=c.children("li."+s.activeItemClass);c.is(":visible")&&0!==e.length&&(i.val(e.data("awesomecomplete-value")),s.onComplete(e.data("awesomecomplete-dataItem"),i)),s.blurFunction(c),c.hide()}})),i.on("focus",(function(){c.children(":not(."+s.noResultsClass+")").length>0?s.initDelay>0?setTimeout((function(){r(i)}),s.initDelay):r(i):s.showAll&&a(i)}))}))};var a=function(e){var t=e.val();"function"==typeof e.data("awesomecomplete-config").dataMethod?e.data("awesomecomplete-config").dataMethod(t,e,function(e,t){return function(a){i(e,a,t)}}(e,t)):i(e,e.data("awesomecomplete-config").staticData,t)},n=function(e){return"string"!=typeof e?e:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},i=function(t,a,i){var s=t.data("awesomecomplete-config"),o=t.data("awesomecomplete-list");if(o.empty().hide(),s.showAll||""!==i){s.showAwesomeTip&&o.append(e('<div class="awesome-tip"></div>'));var l=[i];if(s.splitTerm&&(l=i.split(s.wordDelimiter)),s.headerText.length>0){var c=l.length>1||""!=l[0]?1:0;o.append(e('<h2 class="awesome-header">'+s.headerText[c]+"</h2>"))}for(var d=[],u=0;u<a.length;u++){var p=jQuery.extend({},a[u]),m=0;s.showAll&&""===i&&m++;var f=0,h=null,_=[];for(var g in p)if("function"!=typeof p[g]&&"object"!=typeof p[g]){for(var v=!1,b=0;b<s.dontMatch.length;b++)g==s.dontMatch[b]&&(v=!0);if(!v){var y=p[g].toString(),w=[];for(b=0;b<l.length;b++)if(""!==l[b]){var C=l[b].replace(/([\\*+?|{}()^$.#])/g,"\\$1"),x=new RegExp("("+C+")",s.ignoreCase?"ig":"g");w.push(C);var k;(k=y.match(x))&&(m+=k.length,g!=s.nameField&&k.length>f&&(f=k.length,h=g,_[w.length-1]=!0))}if(s.highlightMatches){x=new RegExp("("+w.join("|")+")",s.ignoreCase?"ig":"g");for(var $=y.split(x),S=0;S<$.length;S++)$[S]=n($[S]),S%2&&($[S]='<span class="'+s.highlightClass+'">'+$[S]+"</span>");p[g]=$.join("")}else p[g]=n(y)}}var T=0;for(b=0;b<_.length;b++)!0===_[b]&&T++;m>0&&d.push({dataItem:p,originalDataItem:a[u],matchCount:m,topMatch:h,matchedTermCount:T})}for(var S in d.sort((function(e,t){return s.sortFunction(e,t,i)})),d=d.slice(0,s.resultLimit)){var D=s.hoverDefaultFirstItem&&0===S?s.activeItemClass:"";d[S]instanceof Function||e('<li class="'+D+'">'+s.renderFunction(d[S].dataItem,d[S].topMatch,s)+"</li>").data("awesomecomplete-dataItem",d[S].originalDataItem).data("awesomecomplete-value",s.valueFunction(d[S].originalDataItem,s)).appendTo(o).on("click",(function(){var a=e(this),n=a.data("awesomecomplete-value");s.skipBlankValues&&e.isBlank(n)||(t.val(n),s.onComplete(a.data("awesomecomplete-dataItem"),t),s.blurFunction(o),o.hide(),suppressKey=!0)})).on("mouseup",(function(t){s.skipBlankValues&&e.isBlank(e(this).data("awesomecomplete-value"))&&t.stopPropagation()})).on("mouseover",(function(){s.skipBlankValues&&e.isBlank(e(this).data("awesomecomplete-value"))||e(this).addClass(s.activeItemClass).siblings().removeClass(s.activeItemClass)}))}void 0!==s.noResultsMessage&&0==d.length&&o.append(e('<li class="'+s.noResultsClass+'">'+s.noResultsMessage+"</li>")),(d.length>0||void 0!==s.noResultsMessage)&&(s.initDelay>0?setTimeout((function(){r(t)}),s.initDelay):r(t))}},r=function(e){var t=e.data("awesomecomplete-list"),a=e.data("awesomecomplete-config");if(a.showFunction(t),t.fadeIn(a.fadeInTime),a.forcePosition){if(a.alignRight){var n=!0===a.alignRight?e:a.alignRight;t.css("left",n.position().left+(n.offsetParent().offset().left-t.offsetParent().offset().left)-t.outerWidth(!0)+n.outerWidth(!0))}else t.css("left",e.position().left+(e.offsetParent().offset().left-t.offsetParent().offset().left));t.css("top",e.position().top+e.outerHeight(!0)+(e.offsetParent().offset().top-t.offsetParent().offset().top))}};e.fn.awesomecomplete.defaults={activeItemClass:"active",alignRight:!1,attachTo:void 0,blurFunction:function(e){},dataMethod:void 0,dontMatch:[],forcePosition:!1,highlightMatches:!0,highlightClass:"match",ignoreCase:!0,nameField:"name",noResultsClass:"noResults",noResultsMessage:void 0,onComplete:function(e,t){},showFunction:function(e){},sortFunction:function(e,t,a){return e.matchedTermCount==t.matchedTermCount?t.matchCount-e.matchCount:t.matchedTermCount-e.matchedTermCount},splitTerm:!0,staticData:[],suggestionListClass:"autocomplete",renderFunction:function(e,t,a){return t===a.nameField||null===t?'<p class="title">'+e[a.nameField]+"</p>":'<p class="title">'+e[a.nameField]+'</p><p class="matchRow"><span class="matchedField">'+t+"</span>: "+e[t]+"</p>"},resultLimit:10,showAll:!1,skipBlankValues:!1,typingDelay:0,initDelay:0,fadeInTime:0,valueFunction:function(e,t){return e[t.nameField]},wordDelimiter:/[^\da-z]+/gi,showAwesomeTip:!1,hoverDefaultFirstItem:!1,headerText:[]}}(jQuery)}).call(window)},11344:function(e,t){(function(){!function(e){var t=function(e){return"auto"==e.css("overflow-y")||"scroll"==e.css("overflow-y")},a=function(e,t){return parseInt(e.css("border-"+t+"-width"))};e.fn.awesomereorder=function(n){return n=e.extend(!0,{},e.fn.awesomereorder.defaults,n),this.each((function(){var i,r,s,o,l,c,d,u,p=e(this),m=e.meta?e.extend({},n,p.data()):n,f=p.children(m.listItemSelector),h="auto"==m.directionType?"block"==f.css("display")||"list-item"==f.css("display")?"v":"h":m.directionType,_=!1;if(void 0!==m.uiDraggableDefaults){var g=["start","drag","stop"];for(var v in g)void 0!==m.uiDraggableDefaults[g[v]]&&(m[g[v]]=m.uiDraggableDefaults[g[v]],delete m.uiDraggableDefaults[g[v]])}var b=function(){return e("<div></div>").data("awesomereorder-placeholder",!0).width(c).height(d)},y=function(t,a){u.stop().slideUp("fast",(function(){e(this).remove()})),u=b(),t[a](u),u.hide().slideDown("fast")},w=function(e){_||(clearInterval(s),s=setInterval(e,10),_=!0)},C=function(t){var a,n=p.offset().top+parseInt(p.css("margin-top"))-p.scrollTop();a=void 0===r?0:t.top-r.top;var s=!1;p.children(e(m.listItemSelector)).each((function(){var r=e(this);if(r.is(":visible")){if(!r.data("awesomereorder-placeholder")){var o=r.outerHeight(!0)*m.activeRange;if(a<=0&&t.top<n+o)return r.prev().data("awesomereorder-placeholder")||y(r,"before"),s=!0,!1;n+=r.outerHeight(!0);var l=t.top+i.outerHeight();return a>=0&&l>n-o&&l<n+o?(r.next().data("awesomereorder-placeholder")||y(r,"after"),s=!0,!1):l<n?(s=!0,!1):void 0}n+=r.outerHeight(!0)}})),s||p.children(":last-child").data("awesomereorder-placeholder")||y(p.children(m.listItemSelector).last(),"after")},x=function(n){n.draggable(e.extend({},{addClass:!1,axis:"v"==h?"y":void 0,helper:"clone",scroll:!1,start:function(a,n){o=void 0,t(p)?o=p:p.parents().each((function(){var a=e(this);if(t(a))return o=a,!1})),i=e(this),n.helper.width(i.width()),c=i.outerWidth(!0),d=i.outerHeight(!0),u=b(),i.after(u),i.hide(),"function"==typeof m.start&&m.start(a,n)},drag:function(e,t){var n={left:t.offset.left,top:t.offset.top};!function(e){if(void 0!==o){var t=o.offset(),n=a(o,"top"),i=a(o,"bottom");e.top<t.top+m.scrollMargin?(l=m.scrollSpeed*Math.min(Math.pow((t.top+m.scrollMargin+n-e.top)/m.scrollMargin,m.scrollCurve),1),w((function(){o.scrollTop(o.scrollTop()-l),C(r)}))):e.top-n+d>t.top+o.outerHeight(!1)-i-m.scrollMargin?(l=m.scrollSpeed*Math.min(Math.pow((e.top+d-n-(t.top+o.outerHeight(!1)-i-m.scrollMargin))/m.scrollMargin,m.scrollCurve),1),w((function(){o.scrollTop(o.scrollTop()+l),C(r)}))):(_=!1,clearInterval(s))}}(n),C(n),r=n,"function"==typeof m.drag&&m.drag(e,t)},stop:function(e,t){_=!1,clearInterval(s),t.helper,u.after(i.show()).remove(),i.trigger("awesomereorder-dropped"),"function"==typeof m.stop&&m.stop(e,t)}},m.uiDraggableDefaults))};x(f),p.on("awesomereorder-listupdated",(function(){f=p.children(m.listItemSelector),x(f.filter(":not(.ui-draggable)"))}))}))},e.fn.awesomereorder.defaults={activeRange:.3,directionType:"auto",drag:null,handleSelector:".",listItemSelector:"li",scrollCurve:3,scrollMargin:40,scrollSpeed:25,start:null,stop:null,uiDraggableDefaults:{containment:"parent",distance:5,opacity:.8}}}(jQuery)}).call(window)},41851:function(e,t){(function(){!function(e){var t;e.fn.colorPicker=function(){return this.length>0&&i(),this.each((function(e){n(this)}))};var a=!1,n=function(t){e(t).on("click",o)},i=function(){var a=['<div id="color_selector">'];e.each(e.fn.colorPicker.defaultColors,(function(t){a.push('<div class="color_block clearfix">'),e.each(this,(function(e){a.push('<a href="#" class="color_swatch" style="background-color:#',this,';">','<span class="inner">&nbsp;</span>',"</a>")})),a.push("</div>")})),a.push('<div id="color_custom">','<label for="color_value">Hex</label>','<input type="text" size="8" id="color_value"/>',"</div>"),a.push("</div>");var n=e(a.join(""));n.find("input#color_value").on("keyup",(function(t){13==t.keyCode&&l(e(this).val()),27==t.keyCode&&o()})),n.on("click",".color_swatch",(function(t){t.preventDefault(),l(e(this).css("background-color"))})).on("mouseover",".color_swatch",(function(t){e(t.target).addClass("hover"),n.find("input#color_value").val(c(e(this).css("background-color")))})).on("mouseout",".color_swatch",(function(a){e(a.target).removeClass("hover"),n.find("input#color_value").val(c(e(t).data("colorpicker-color")))})),e("body").append(n),n.hide()},r=function(a){var n="div#color_selector",i=e(a.target).parents(n).length;a.target==e(n)[0]||a.target==t||i>0||s()},s=function(){var t=e("div#color_selector");e(document).off("mousedown",r),t.hide(),a=!1},o=function(n){var i,o,l,d;n.preventDefault(),t=this,a?s():(i=e("div#color_selector"),o=e(t),l=o.offset().top+o.outerHeight(),d=o.offset().left,l+i.outerHeight()>e(window).height()-30&&(l-=o.outerHeight()+i.outerHeight()),d+i.outerWidth()>e(window).width()-30&&(d-=i.outerWidth()-o.outerWidth()),i.css({top:l,left:d}),hexColor=c(e(t).data("colorpicker-color")),e("input#color_value").val(hexColor),e(".color_swatch").removeClass("selected").each((function(t,a){c(e(a).css("background-color"))==hexColor&&e(a).addClass("selected")})),i.show(),e(document).on("mousedown",r),a=!0)},l=function(a){(selectedValue=c(a))&&(e(t).data("colorpicker-color",selectedValue),e(t).trigger("color_change",[selectedValue]),s())},c=function(e){if(e.match(/[0-9a-fA-F]{3}$/)||e.match(/[0-9a-fA-F]{6}$/))e="#"==e.charAt(0)?e:"#"+e;else if(e.match(/^rgb\(([0-9]|[1-9][0-9]|[1][0-9]{2}|[2][0-4][0-9]|[2][5][0-5]),[ ]{0,1}([0-9]|[1-9][0-9]|[1][0-9]{2}|[2][0-4][0-9]|[2][5][0-5]),[ ]{0,1}([0-9]|[1-9][0-9]|[1][0-9]{2}|[2][0-4][0-9]|[2][5][0-5])\)$/)){var t=[parseInt(RegExp.$1),parseInt(RegExp.$2),parseInt(RegExp.$3)],a=function(e){if(e.length<2)for(var t=0,a=2-e.length;t<a;t++)e="0"+e;return e};if(3==t.length)e="#"+a(t[0].toString(16))+a(t[1].toString(16))+a(t[2].toString(16))}else e=!1;return e};e.fn.colorPicker.addColors=function(t){e.fn.colorPicker.defaultColors=e.fn.colorPicker.defaultColors.concat(t)},e.fn.colorPicker.defaultColors=[["000000","333333","666666","999999","cccccc","eeeeee","f3f3f3","ffffff"],["ff0000","ff9900","ffff00","00ff00","00ffff","0000ff","9900ff","ff00ff"],["f4cccc","fce5cd","fff2cc","d9ead3","d0e0e3","cfe2f3","d9d2e9","ead1dc","ea9999","f9cb9c","ffe599","b6d7a8","a2c4c9","9fc5e8","b4a7d6","d5a6bd","e06666","f6b26b","ffd966","93c47d","76a5af","6fa8dc","8e7cc3","c27ba0","cc0000","e69138","f1c232","6aa84f","45818e","3d85c6","674ea7","a64d79","990000","b45f06","bf9000","38761d","134f5c","0b5394","351c75","741b47","660000","783f04","7f6000","274e13","0c343d","073763","20124d","4c1130"]]}(jQuery)}).call(window)},8485:function(module,exports){var define=void 0,require=void 0,module=void 0,exports=void 0;(function(){(function($){$.extend({tablesorter:new function(){var parsers=[],widgets=[];function benchmark(e,t){log(e+","+((new Date).getTime()-t.getTime())+"ms")}function log(e){"undefined"!=typeof console&&void 0!==console.debug?console.log(e):alert(e)}function buildParserCache(e,t){if(e.config.debug)var a="";var n=$(e).find(e.config.cssSortGroupSelector);if(n.length>0)for(var i=[],r=n[0].cells,s=r.length,o=0;o<s;o++){var l=!1;$.metadata&&$(t[o]).metadata()&&$(t[o]).metadata().sorter?l=getParserById($(t[o]).metadata().sorter):e.config.headers[o]&&e.config.headers[o].sorter&&(l=getParserById(e.config.headers[o].sorter)),l||(l=detectParserForColumn(e,r[o])),e.config.debug&&(a+="column:"+o+" parser:"+l.id+"\n"),i.push(l)}return e.config.debug&&log(a),i}function detectParserForColumn(e,t){for(var a=parsers.length,n=1;n<a;n++)if(parsers[n].is($.trim(getElementText(e.config,t)),e,t))return parsers[n];return parsers[0]}function getParserById(e){for(var t=parsers.length,a=0;a<t;a++)if(parsers[a].id.toLowerCase()==e.toLowerCase())return parsers[a];return!1}function buildCache(e){if(e.config.debug)var t=new Date;for(var a=$(e).find(e.config.cssSortGroupSelector),n=a.length||0,i=a[0]&&a[0].cells.length||0,r=e.config.parsers,s={row:[],normalized:[]},o=0;o<n;++o){var l=a[o],c=[];s.row.push($(l));for(var d=0;d<i;++d)c.push(r[d].format(getElementText(e.config,l.cells[d]),e,l.cells[d]));c.push(o),s.normalized.push(c),c=null}return e.config.debug&&benchmark("Building cache for "+n+" rows:",t),s}function getElementText(e,t){if(!t)return"";return"simple"==e.textExtraction?t.childNodes[0]&&t.childNodes[0].hasChildNodes()?t.childNodes[0].innerHTML:t.innerHTML:"function"==typeof e.textExtraction?e.textExtraction(t):$(t).text()}function appendToTable(e,t){if(e.config.debug)var a=new Date;for(var n=t,i=n.row,r=n.normalized,s=r.length,o=r[0].length-1,l=$(e.tBodies[0]),c=[],d=0;d<s;d++)if(c.push(i[r[d][o]]),!e.config.appender)for(var u=i[r[d][o]],p=u.length,m=0;m<p;m++)l[0].appendChild(u[m]);e.config.appender&&e.config.appender(e,c),c=null,e.config.debug&&benchmark("Rebuilt table:",a),applyWidget(e),setTimeout((function(){$(e).trigger("sortEnd")}),0)}function buildHeaders(e){if(e.config.debug)var t=new Date;$.metadata;for(var a=[],n=0;n<$("tr",e.config.headerNode).length;n++)a[n]=0;var i=$("th",e.config.headerNode);return i.each((function(t){this.column=t,this.count=this.order=formatSortingOrder(e.config.sortInitialOrder),(checkHeaderMetadata(this)||checkHeaderOptions(e,t))&&(this.sortDisabled=!0),this.sortDisabled||$(this).addClass(e.config.cssHeader).prop("tabIndex",0).attr("role","button"),e.config.headerList[t]=this})),e.config.debug&&(benchmark("Built headers:",t),log(i)),i}function checkHeaderMetadata(e){return!(!$.metadata||!1!==$(e).metadata().sorter)}function checkHeaderOptions(e,t){return!(!e.config.headers[t]||!1!==e.config.headers[t].sorter)}function applyWidget(e){for(var t=e.config.widgets,a=t.length,n=0;n<a;n++)getWidgetById(t[n]).format(e)}function getWidgetById(e){for(var t=widgets.length,a=0;a<t;a++)if(widgets[a].id.toLowerCase()==e.toLowerCase())return widgets[a]}function formatSortingOrder(e){return i="Number"!=typeof e?"desc"==e.toLowerCase()?1:0:1==e?e:0,i}function isValueInArray(e,t){for(var a=t.length,n=0;n<a;n++)if(t[n][0]==e)return!0;return!1}function setHeadersCss(e,t,a,n){t.removeClass(n[0]).removeClass(n[1]);var i=[];t.each((function(e){this.sortDisabled||(i[this.column]=$(this))}));for(var r=a.length,s=0;s<r;s++)i[a[s][0]].addClass(n[a[s][1]])}function fixColumnWidth(e,t){if(e.config.widthFixed){var a=$("<colgroup>");$("tr:first td",e.tBodies[0]).each((function(){a.append($("<col>").css("width",$(this).width()))})),$(e).prepend(a)}}function updateHeaderSortCount(e,t){for(var a=e.config,n=t.length,i=0;i<n;i++){var r=t[i],s=a.headerList[r[0]];s.count=r[1],s.count++}}function multisort(table,sortList,cache){if(table.config.debug)var sortTime=new Date;for(var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length,i=0;i<l;i++){var c=sortList[i][0],order=sortList[i][1],s="text"==getCachedSortType(table.config.parsers,c)?0==order?"sortText":"sortTextDesc":0==order?"sortNumeric":"sortNumericDesc",e="e"+i;dynamicExp+="var "+e+" = "+s+"(a["+c+"],b["+c+"]); ",dynamicExp+="if("+e+") { return "+e+"; } ",dynamicExp+="else { "}var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;i<l;i++)dynamicExp+="}; ";return dynamicExp+="return 0; ",dynamicExp+="}; ",eval(dynamicExp),cache.normalized.sort(sortWrapper),table.config.debug&&benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime),cache}function sortText(e,t){return""===e&&""!==t?1:""===t&&""!==e||e<t?-1:e>t?1:0}function sortTextDesc(e,t){return""===e&&""!==t?-1:""===t&&""!==e?1:t<e?-1:t>e?1:0}function sortNumeric(e,t){return e-t}function sortNumericDesc(e,t){return t-e}function getCachedSortType(e,t){return e[t].type}this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssSortGroupSelector:"tbody tr:not(.sortGroup)",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],dateFormat:"us",decimal:".",debug:!1,headerNode:null},this.benchmark=benchmark,this.construct=function(e){return this.each((function(){if(this.tBodies){var t,a,n,i;if(this.config={},!(i=$.extend(this.config,$.tablesorter.defaults,e)).headerNode){if(!this.tHead)return;i.headerNode=this.tHead}t=$(this),a=buildHeaders(this),this.config.parsers=buildParserCache(this,a),n=buildCache(this);var r=[i.cssDesc,i.cssAsc];fixColumnWidth(this),a.on("keypress click",(function(e){if("keypress"===e.type&&13!==e.which)return!0;t.trigger("sortStart");var s=t[0].tBodies[0]&&t[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&s>0){$(this);var o=this.column;if(this.order=this.count++%2,e[i.sortMultiSortKey])if(isValueInArray(o,i.sortList))for(u=0;u<i.sortList.length;u++){var l=i.sortList[u],c=i.headerList[l[0]];l[0]==o&&(c.count=l[1],c.count++,l[1]=c.count%2)}else i.sortList.push([o,this.order]);else{if(i.sortList=[],null!=i.sortForce)for(var d=i.sortForce,u=0;u<d.length;u++)d[u][0]!=o&&i.sortList.push(d[u]);i.sortList.push([o,this.order])}return setTimeout((function(){setHeadersCss(t[0],a,i.sortList,r),appendToTable(t[0],multisort(t[0],i.sortList,n))}),1),!1}})).on("mousedown",(function(){if(i.cancelSelection)return this.onselectstart=function(){return!1},!1})),t.on("update",(function(){this.config.parsers=buildParserCache(this,a),n=buildCache(this)})).on("sorton",(function(e,t){$(this).trigger("sortStart"),i.sortList=t;var s=i.sortList;updateHeaderSortCount(this,s),setHeadersCss(this,a,s,r),appendToTable(this,multisort(this,s,n))})).on("appendCache",(function(){appendToTable(this,n)})).on("applyWidgetId",(function(e,t){getWidgetById(t).format(this)})).on("applyWidgets",(function(){applyWidget(this)})),$.metadata&&$(this).metadata()&&$(this).metadata().sortlist&&(i.sortList=$(this).metadata().sortlist),i.sortList.length>0&&t.trigger("sorton",[i.sortList]),applyWidget(this)}}))},this.addParser=function(e){for(var t=parsers.length,a=!0,n=0;n<t;n++)parsers[n].id.toLowerCase()==e.id.toLowerCase()&&(a=!1);a&&parsers.push(e)},this.addWidget=function(e){widgets.push(e)},this.formatFloat=function(e){var t=parseFloat(e);return isNaN(t)?0:t},this.formatInt=function(e){var t=parseInt(e);return isNaN(t)?0:t},this.isDigit=function(e,t){var a="\\"+t.decimal;return RegExp("/(^[+]?0("+a+"0+)?$)|(^([-+]?[1-9][0-9]*)$)|(^([-+]?((0?|[1-9][0-9]*)"+a+"(0*[1-9][0-9]*)))$)|(^[-+]?[1-9]+[0-9]*"+a+"0+$)/").test($.trim(e))},this.clearTableBody=function(e){if($.browser.msie){(function(){for(;this.firstChild;)this.removeChild(this.firstChild)}).apply(e.tBodies[0])}else e.tBodies[0].innerHTML=""}}}),$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(e){return!0},format:function(e){return $.trim(e.toLowerCase())},type:"text"}),ts.addParser({id:"digit",is:function(e,t){var a=t.config;return $.tablesorter.isDigit(e,a)},format:function(e){return $.tablesorter.formatFloat(e)},type:"numeric"}),ts.addParser({id:"currency",is:function(e){return/^[£$€?.]/.test(e)},format:function(e){return $.tablesorter.formatFloat(e.replace(new RegExp(/[^0-9.]/g),""))},type:"numeric"}),ts.addParser({id:"ipAddress",is:function(e){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(e)},format:function(e){for(var t=e.split("."),a="",n=t.length,i=0;i<n;i++){var r=t[i];2==r.length?a+="0"+r:a+=r}return $.tablesorter.formatFloat(a)},type:"numeric"}),ts.addParser({id:"url",is:function(e){return/^(https?|ftp|file):\/\/$/.test(e)},format:function(e){return jQuery.trim(e.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"}),ts.addParser({id:"isoDate",is:function(e){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(e)},format:function(e){return $.tablesorter.formatFloat(""!=e?new Date(e.replace(new RegExp(/-/g),"/")).getTime():"0")},type:"numeric"}),ts.addParser({id:"percent",is:function(e){return/\%$/.test($.trim(e))},format:function(e){return $.tablesorter.formatFloat(e.replace(new RegExp(/%/g),""))},type:"numeric"}),ts.addParser({id:"usLongDate",is:function(e){return e.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2})( (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM))))?$/))},format:function(e){return $.tablesorter.formatFloat(new Date(e).getTime())},type:"numeric"}),ts.addParser({id:"shortDate",is:function(e){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(e)},format:function(e,t){var a=t.config;return e=e.replace(/\-/g,"/"),"us"==a.dateFormat?e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2"):"uk"==a.dateFormat?e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1"):"dd/mm/yy"!=a.dateFormat&&"dd-mm-yy"!=a.dateFormat||(e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3")),$.tablesorter.formatFloat(new Date(e).getTime())},type:"numeric"}),ts.addParser({id:"time",is:function(e){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(e)},format:function(e){return $.tablesorter.formatFloat(new Date("2000/01/01 "+e).getTime())},type:"numeric"}),ts.addParser({id:"autoDateTime",is:function(e){return!isNaN(new Date(e).getTime())},format:function(e){return $.tablesorter.formatFloat(new Date(e).getTime())}}),ts.addParser({id:"metadata",is:function(e){return!1},format:function(e,t,a){var n=t.config,i=n.parserMetadataName?n.parserMetadataName:"sortValue";return $(a).metadata()[i]},type:"numeric"}),ts.addWidget({id:"zebra",format:function(e){if(e.config.debug)var t=new Date;$("tr:visible",e.tBodies[0]).filter(":even").removeClass(e.config.widgetZebra.css[1]).addClass(e.config.widgetZebra.css[0]).end().filter(":odd").removeClass(e.config.widgetZebra.css[0]).addClass(e.config.widgetZebra.css[1]),e.config.debug&&$.tablesorter.benchmark("Applying Zebra widget",t)}})})(jQuery)}).call(window)},5986:function(e,t){(function(){!function(e){var t,a,n,i=e.$LAB,r=/^[^?#]*\//.exec(location.href)[0],s=/^\w+\:\/\/\/?[^\/]+/.exec(r)[0],o=document.head||document.getElementsByTagName("head"),l=e.opera&&"[object Opera]"==Object.prototype.toString.call(e.opera)||"MozAppearance"in document.documentElement.style,c=function(){},d=c,u=document.createElement("script"),p="boolean"==typeof u.preload,m=p||u.readyState&&"uninitialized"==u.readyState,f=!m&&!0===u.async,h=!m&&!f&&!l;function _(e){return"[object Function]"==Object.prototype.toString.call(e)}function g(e){return"[object Array]"==Object.prototype.toString.call(e)}function v(e,t){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);return t}function b(e){for(var t=!1,a=0;a<e.scripts.length;a++)e.scripts[a].ready&&e.scripts[a].exec_trigger&&(t=!0,e.scripts[a].exec_trigger(),e.scripts[a].exec_trigger=null);return t}function y(e,t,a,n){e.onload=e.onreadystatechange=function(){e.readyState&&"complete"!=e.readyState&&"loaded"!=e.readyState||t[a]||(e.onload=e.onreadystatechange=null,n())}}function w(e){e.ready=e.finished=!0;for(var t=0;t<e.finished_listeners.length;t++)e.finished_listeners[t]();e.ready_listeners=[],e.finished_listeners=[]}e.console&&e.console.log&&(e.console.error||(e.console.error=e.console.log),c=function(t){e.console.log(t)},d=function(t,a){e.console.error(t,a)}),e.$LAB=function t(){var a,n={},l=m||h,u=[],C={};n.UseLocalXHR=!0,n.AlwaysPreserveOrder=!1,n.AllowDuplicates=!1,n.CacheBust=!1;var x=!!((window.blist||{}).feature_flags||{}).debug_labjs;function k(e,t,a,n){var i,l,d,u,h,_=function(){t.finished_cb(t,a)};t.src=(d=t.src,u=e.BasePath,h=/^\w+\:\/\//,/^\/\/\/?/.test(d)?d=location.protocol+d:h.test(d)||"/"==d.charAt(0)||(d=(u||"")+d),h.test(d)?d:("/"==d.charAt(0)?s:r)+d),t.real_src=t.src+(e.CacheBust?(/\?.*$/.test(t.src)?"&_":"?_")+~~(1e9*Math.random())+"=":""),C[t.src]||(C[t.src]={items:[],finished:!1}),l=C[t.src].items,e.AllowDuplicates||0==l.length?(i=l[l.length]={ready:!1,finished:!1,ready_listeners:[function(){t.ready_cb(t,(function(){!function(e,t,a){var n;function i(){null!=n&&(n=null,w(a))}C[t.src].finished||(e.AllowDuplicates||(C[t.src].finished=!0),n=a.elem||document.createElement("script"),t.type&&(n.type=t.type),t.charset&&(n.charset=t.charset),y(n,a,"finished",i),a.elem?a.elem=null:a.text?(n.onload=n.onreadystatechange=null,n.text=a.text):n.src=t.real_src,o.insertBefore(n,o.firstChild),a.text&&i())}(e,t,i)}))}],finished_listeners:[_]},function(e,t,a,n,i){setTimeout((function(){var r,l,d=t.real_src;if("item"in o){if(!o[0])return void setTimeout(arguments.callee,25);o=o[0]}r=document.createElement("script"),t.type&&(r.type=t.type),t.charset&&(r.charset=t.charset),i?m?(e.Debug&&c("start script preload: "+d),a.elem=r,p?(r.preload=!0,r.onpreload=n):r.onreadystatechange=function(){"loaded"==r.readyState&&n()},r.src=d):i&&0==d.indexOf(s)&&e.UseLocalXHR?(l=new XMLHttpRequest,e.Debug&&c("start script preload (xhr): "+d),l.onreadystatechange=function(){4==l.readyState&&(l.onreadystatechange=function(){},a.text=l.responseText+"\n//@ sourceURL="+d,n())},l.open("GET",d),l.send()):(e.Debug&&c("start script preload (cache): "+d),r.type="text/cache-script",y(r,a,"ready",(function(){o.removeChild(r),n()})),r.src=d,o.insertBefore(r,o.firstChild)):f?(e.Debug&&c("start script load (ordered async): "+d),r.async=!1,y(r,a,"finished",n),r.src=d,o.insertBefore(r,o.firstChild)):(e.Debug&&c("start script load: "+d),y(r,a,"finished",n),r.src=d,o.insertBefore(r,o.firstChild))}),0)}(e,t,i,n?function(){i.ready=!0;for(var e=0;e<i.ready_listeners.length;e++)i.ready_listeners[e]();i.ready_listeners=[]}:function(){w(i)},n)):(i=l[0]).finished?_():i.finished_listeners.push(_)}function $(){var e,t,a=v(n,{}),i=[],r=0,s=!1;function o(e,t){a.Debug&&c("script preload finished: "+e.real_src),e.ready=!0,e.exec_trigger=t,p()}function u(e,t){a.Debug&&c("script execution finished: "+e.real_src),e.ready=e.finished=!0,e.exec_trigger=null;for(var n=0;n<t.scripts.length;n++)if(!t.scripts[n].finished)return;t.finished=!0,p()}function p(){for(;r<i.length;)if(_(i[r])){a.Debug&&c("$LAB.wait() executing: "+i[r]);try{i[r++]()}catch(e){a.Debug&&d("$LAB.wait() error caught: ",e)}}else{if(!i[r].finished){if(b(i[r]))continue;break}r++}r==i.length&&(s=!1,t=!1)}function m(){t&&t.scripts||i.push(t={scripts:[],finished:!0})}return e={script:function(){for(var n=0;n<arguments.length;n++)!function(n,i){var r;g(n)||(i=[n]);for(var c=0;c<i.length;c++)m(),_(n=i[c])&&(n=n()),n&&(g(n)?((r=[].slice.call(n)).unshift(c,1),[].splice.apply(i,r),c--):("string"==typeof n&&(n={src:n}),n=v(n,{ready:!1,ready_cb:o,finished:!1,finished_cb:u}),t.finished=!1,t.scripts.push(n),k(a,n,t,l&&s),s=!0,a.AlwaysPreserveOrder&&e.wait()))}(arguments[n],arguments[n]);return e},wait:function(){if(arguments.length>0){for(var a=0;a<arguments.length;a++)i.push(arguments[a]);t=i[i.length-1]}else t=!1;return p(),e}},{script:e.script,wait:e.wait,setOptions:function(t){return v(t,a),e}}}return n.Debug=x,n.BasePath="",a={setGlobalDefaults:function(e){return v(e,n),a},setOptions:function(){return $().setOptions.apply(null,arguments)},script:function(){return $().script.apply(null,arguments)},wait:function(){return $().wait.apply(null,arguments)},queueScript:function(){return u[u.length]={type:"script",args:[].slice.call(arguments)},a},queueWait:function(){return u[u.length]={type:"wait",args:[].slice.call(arguments)},a},runQueue:function(){for(var e,t=a,n=u.length;--n>=0;)t=t[(e=u.shift()).type].apply(null,e.args);return t},noConflict:function(){return e.$LAB=i,a},sandbox:function(){return t()}},a}(),t="addEventListener",a="DOMContentLoaded",null==document.readyState&&document[t]&&(document.readyState="loading",document[t](a,n=function(){document.removeEventListener(a,n,!1),document.readyState="complete"},!1))}(this)}).call(window)},59947:function(e,t,a){var n={"./af":60942,"./af.js":60942,"./ar":64157,"./ar-dz":55560,"./ar-dz.js":55560,"./ar-kw":83118,"./ar-kw.js":83118,"./ar-ly":97201,"./ar-ly.js":97201,"./ar-ma":2914,"./ar-ma.js":2914,"./ar-sa":21530,"./ar-sa.js":21530,"./ar-tn":41162,"./ar-tn.js":41162,"./ar.js":64157,"./az":33783,"./az.js":33783,"./be":78748,"./be.js":78748,"./bg":44322,"./bg.js":44322,"./bm":24384,"./bm.js":24384,"./bn":31443,"./bn-bd":36631,"./bn-bd.js":36631,"./bn.js":31443,"./bo":27118,"./bo.js":27118,"./br":16168,"./br.js":16168,"./bs":53524,"./bs.js":53524,"./ca":89818,"./ca.js":89818,"./cs":3320,"./cs.js":3320,"./cv":13433,"./cv.js":13433,"./cy":69399,"./cy.js":69399,"./da":12761,"./da.js":12761,"./de":75160,"./de-at":43319,"./de-at.js":43319,"./de-ch":63013,"./de-ch.js":63013,"./de.js":75160,"./dv":98878,"./dv.js":98878,"./el":11994,"./el.js":11994,"./en-au":18769,"./en-au.js":18769,"./en-ca":57783,"./en-ca.js":57783,"./en-gb":3950,"./en-gb.js":3950,"./en-ie":28973,"./en-ie.js":28973,"./en-il":13368,"./en-il.js":13368,"./en-in":16373,"./en-in.js":16373,"./en-nz":43048,"./en-nz.js":43048,"./en-sg":50947,"./en-sg.js":50947,"./eo":5891,"./eo.js":5891,"./es":30813,"./es-do":50037,"./es-do.js":50037,"./es-mx":3649,"./es-mx.js":3649,"./es-us":7918,"./es-us.js":7918,"./es.js":30813,"./et":72210,"./et.js":72210,"./eu":89110,"./eu.js":89110,"./fa":33275,"./fa.js":33275,"./fi":17887,"./fi.js":17887,"./fil":10553,"./fil.js":10553,"./fo":70822,"./fo.js":70822,"./fr":57768,"./fr-ca":39045,"./fr-ca.js":39045,"./fr-ch":75949,"./fr-ch.js":75949,"./fr.js":57768,"./fy":53249,"./fy.js":53249,"./ga":24599,"./ga.js":24599,"./gd":38358,"./gd.js":38358,"./gl":40025,"./gl.js":40025,"./gom-deva":13614,"./gom-deva.js":13614,"./gom-latn":57596,"./gom-latn.js":57596,"./gu":96047,"./gu.js":96047,"./he":47802,"./he.js":47802,"./hi":57603,"./hi.js":57603,"./hr":69811,"./hr.js":69811,"./hu":80603,"./hu.js":80603,"./hy-am":85644,"./hy-am.js":85644,"./id":59506,"./id.js":59506,"./is":44842,"./is.js":44842,"./it":49019,"./it-ch":9181,"./it-ch.js":9181,"./it.js":49019,"./ja":30332,"./ja.js":30332,"./jv":61959,"./jv.js":61959,"./ka":93622,"./ka.js":93622,"./kk":4251,"./kk.js":4251,"./km":59581,"./km.js":59581,"./kn":80871,"./kn.js":80871,"./ko":29360,"./ko.js":29360,"./ku":89099,"./ku.js":89099,"./ky":95046,"./ky.js":95046,"./lb":72374,"./lb.js":72374,"./lo":62866,"./lo.js":62866,"./lt":68663,"./lt.js":68663,"./lv":64358,"./lv.js":64358,"./me":31234,"./me.js":31234,"./mi":49323,"./mi.js":49323,"./mk":26064,"./mk.js":26064,"./ml":29784,"./ml.js":29784,"./mn":73967,"./mn.js":73967,"./mr":91567,"./mr.js":91567,"./ms":99403,"./ms-my":549,"./ms-my.js":549,"./ms.js":99403,"./mt":55350,"./mt.js":55350,"./my":47628,"./my.js":47628,"./nb":68989,"./nb.js":68989,"./ne":29059,"./ne.js":29059,"./nl":29041,"./nl-be":60750,"./nl-be.js":60750,"./nl.js":29041,"./nn":59988,"./nn.js":59988,"./oc-lnc":30467,"./oc-lnc.js":30467,"./pa-in":45350,"./pa-in.js":45350,"./pl":68305,"./pl.js":68305,"./pt":1185,"./pt-br":49089,"./pt-br.js":49089,"./pt.js":1185,"./ro":66544,"./ro.js":66544,"./ru":91881,"./ru.js":91881,"./sd":95503,"./sd.js":95503,"./se":71775,"./se.js":71775,"./si":48847,"./si.js":48847,"./sk":31792,"./sk.js":31792,"./sl":56304,"./sl.js":56304,"./sq":14049,"./sq.js":14049,"./sr":88042,"./sr-cyrl":97428,"./sr-cyrl.js":97428,"./sr.js":88042,"./ss":35560,"./ss.js":35560,"./sv":61809,"./sv.js":61809,"./sw":85949,"./sw.js":85949,"./ta":73934,"./ta.js":73934,"./te":12762,"./te.js":12762,"./tet":9858,"./tet.js":9858,"./tg":35492,"./tg.js":35492,"./th":74492,"./th.js":74492,"./tk":86587,"./tk.js":86587,"./tl-ph":45299,"./tl-ph.js":45299,"./tlh":69079,"./tlh.js":69079,"./tr":41117,"./tr.js":41117,"./tzl":77477,"./tzl.js":77477,"./tzm":45131,"./tzm-latn":80683,"./tzm-latn.js":80683,"./tzm.js":45131,"./ug-cn":71958,"./ug-cn.js":71958,"./uk":29258,"./uk.js":29258,"./ur":97787,"./ur.js":97787,"./uz":91992,"./uz-latn":26618,"./uz-latn.js":26618,"./uz.js":91992,"./vi":7666,"./vi.js":7666,"./x-pseudo":29197,"./x-pseudo.js":29197,"./yo":33401,"./yo.js":33401,"./zh-cn":11630,"./zh-cn.js":11630,"./zh-hk":34388,"./zh-hk.js":34388,"./zh-mo":37430,"./zh-mo.js":37430,"./zh-tw":85551,"./zh-tw.js":85551};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id=59947},65311:function(e){"use strict";e.exports=jQuery}},__webpack_module_cache__={},deferred;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var a=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(a.exports,a,a.exports,__webpack_require__),a.loaded=!0,a.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.amdD=function(){throw new Error("define cannot be used indirect")},__webpack_require__.amdO={},deferred=[],__webpack_require__.O=function(e,t,a,n){if(!t){var i=1/0;for(l=0;l<deferred.length;l++){t=deferred[l][0],a=deferred[l][1],n=deferred[l][2];for(var r=!0,s=0;s<t.length;s++)(!1&n||i>=n)&&Object.keys(__webpack_require__.O).every((function(e){return __webpack_require__.O[e](t[s])}))?t.splice(s--,1):(r=!1,n<i&&(i=n));if(r){deferred.splice(l--,1);var o=a();void 0!==o&&(e=o)}}return e}n=n||0;for(var l=deferred.length;l>0&&deferred[l-1][2]>n;l--)deferred[l]=deferred[l-1];deferred[l]=[t,a,n]},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=function(e,t){for(var a in t)__webpack_require__.o(t,a)&&!__webpack_require__.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},__webpack_require__.j=2061,__webpack_require__.p="/javascripts/build/shared/",function(){var e={2061:0,6400:0,9672:0,6231:0,3175:0,1528:0,907:0,879:0,5864:0,8098:0,2163:0,5300:0};__webpack_require__.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,i,r=a[0],s=a[1],o=a[2],l=0;if(r.some((function(t){return 0!==e[t]}))){for(n in s)__webpack_require__.o(s,n)&&(__webpack_require__.m[n]=s[n]);if(o)var c=o(__webpack_require__)}for(t&&t(a);l<r.length;l++)i=r[l],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return __webpack_require__.O(c)},a=self.webpackChunk=self.webpackChunk||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}(),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(20991)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(41851)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(53009)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(11344)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(8485)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(77757)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(45624)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(5986)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(22097)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(42701)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(10428)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(81359)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(13733)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(88319)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(5218)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(27723)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(17064)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(83892)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(55565)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(46782)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(74527)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(78312)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(44477)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(19743)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(65316)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(10681)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(99774)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(92027)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(70297)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(75719)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(57540)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(26327)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(33865)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(16239)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(60112)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(57562)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(90667)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(4459)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(30890)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(26741)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(14813)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(88213)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(79497)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(11064)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(54040)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(14983)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(50992)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(10080)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(62794)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(96012)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(48804)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(64876)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(28025)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(2294)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(83126)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(60799)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(84875)})),__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(52863)}));var __webpack_exports__=__webpack_require__.O(void 0,[4736,8592],(function(){return __webpack_require__(60951)}));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();
//# sourceMappingURL=dataset-show.js.map